webpackJsonp(["vendor"],{"/wuY":function(t,e,i){var s=i("NB7d")("keys"),n=i("X6va");t.exports=function(t){return s[t]||(s[t]=n(t))}},0:function(t,e,i){i("KypI"),i("sHrU"),t.exports=i("dkQV")},"0WCH":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"11Ut":function(t,e,i){var s=i("Gfzd").f,n=i("yS17"),o=i("Ug9I")("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,o)&&s(t,o,{configurable:!0,value:e})}},"1kq3":function(t,e){t.exports=!0},"2mwf":function(t,e,i){i("c2zY")("observable")},"3zRh":function(t,e,i){var s=i("g31e");t.exports=function(t,e,i){if(s(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,s){return t.call(e,i,s)};case 3:return function(i,s,n){return t.call(e,i,s,n)}}return function(){return t.apply(e,arguments)}}},"6MLN":function(t,e,i){t.exports=!i("wLcK")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"6t7t":function(t,e,i){t.exports={default:i("nFDa"),__esModule:!0}},"9kxq":function(t,e,i){var s=i("BxvP"),n=i("i1Q6").document,o=s(n)&&s(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},Aa2f:function(t,e,i){"use strict";var s=i("i1Q6"),n=i("yS17"),o=i("6MLN"),r=i("vSO4"),a=i("gojl"),l=i("e8vu").KEY,c=i("wLcK"),h=i("NB7d"),u=i("11Ut"),m=i("X6va"),_=i("Ug9I"),p=i("ZxII"),d=i("c2zY"),y=i("ycyv"),f=i("ayXv"),x=i("zotD"),v=i("BxvP"),g=i("Wyka"),b=i("EKwp"),S=i("0WCH"),w=i("TNJq"),A=i("rMkZ"),C=i("sxPs"),M=i("Gfzd"),I=i("knrM"),D=C.f,P=M.f,L=A.f,T=s.Symbol,E=s.JSON,B=E&&E.stringify,j=_("_hidden"),R=_("toPrimitive"),V={}.propertyIsEnumerable,G=h("symbol-registry"),F=h("symbols"),O=h("op-symbols"),k=Object.prototype,N="function"==typeof T,J=s.QObject,U=!J||!J.prototype||!J.prototype.findChild,q=o&&c(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,i){var s=D(k,e);s&&delete k[e],P(t,e,i),s&&t!==k&&P(k,e,s)}:P,H=function(t){var e=F[t]=w(T.prototype);return e._k=t,e},z=N&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},X=function(t,e,i){return t===k&&X(O,e,i),x(t),e=b(e,!0),x(i),n(F,e)?(i.enumerable?(n(t,j)&&t[j][e]&&(t[j][e]=!1),i=w(i,{enumerable:S(0,!1)})):(n(t,j)||P(t,j,S(1,{})),t[j][e]=!0),q(t,e,i)):P(t,e,i)},W=function(t,e){x(t);for(var i,s=y(e=g(e)),n=0,o=s.length;o>n;)X(t,i=s[n++],e[i]);return t},Y=function(t,e){return void 0===e?w(t):W(w(t),e)},K=function(t){var e=V.call(this,t=b(t,!0));return!(this===k&&n(F,t)&&!n(O,t))&&(!(e||!n(this,t)||!n(F,t)||n(this,j)&&this[j][t])||e)},Q=function(t,e){if(t=g(t),e=b(e,!0),t!==k||!n(F,e)||n(O,e)){var i=D(t,e);return!i||!n(F,e)||n(t,j)&&t[j][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=L(g(t)),s=[],o=0;i.length>o;)n(F,e=i[o++])||e==j||e==l||s.push(e);return s},$=function(t){for(var e,i=t===k,s=L(i?O:g(t)),o=[],r=0;s.length>r;)!n(F,e=s[r++])||i&&!n(k,e)||o.push(F[e]);return o};N||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=m(arguments.length>0?arguments[0]:void 0),e=function(i){this===k&&e.call(O,i),n(this,j)&&n(this[j],t)&&(this[j][t]=!1),q(this,t,S(1,i))};return o&&U&&q(k,t,{configurable:!0,set:e}),H(t)},a(T.prototype,"toString",function(){return this._k}),C.f=Q,M.f=X,i("Ni5N").f=A.f=Z,i("z7R8").f=K,i("Ocr3").f=$,o&&!i("1kq3")&&a(k,"propertyIsEnumerable",K,!0),p.f=function(t){return H(_(t))}),r(r.G+r.W+r.F*!N,{Symbol:T});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)_(tt[et++]);for(var it=I(_.store),st=0;it.length>st;)d(it[st++]);r(r.S+r.F*!N,"Symbol",{for:function(t){return n(G,t+="")?G[t]:G[t]=T(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),r(r.S+r.F*!N,"Object",{create:Y,defineProperty:X,defineProperties:W,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),E&&r(r.S+r.F*(!N||c(function(){var t=T();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))})),"JSON",{stringify:function(t){for(var e,i,s=[t],n=1;arguments.length>n;)s.push(arguments[n++]);if(i=e=s[1],(v(e)||void 0!==t)&&!z(t))return f(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!z(e))return e}),s[1]=e,B.apply(E,s)}}),T.prototype[R]||i("akPY")(T.prototype,R,T.prototype.valueOf),u(T,"Symbol"),u(Math,"Math",!0),u(s.JSON,"JSON",!0)},B9Lq:function(t,e,i){var s=i("yS17"),n=i("Wyka"),o=i("LNnS")(!1),r=i("/wuY")("IE_PROTO");t.exports=function(t,e){var i,a=n(t),l=0,c=[];for(i in a)i!=r&&s(a,i)&&c.push(i);for(;e.length>l;)s(a,i=e[l++])&&(~o(c,i)||c.push(i));return c}},"BX4+":function(t,e,i){t.exports={default:i("ky2m"),__esModule:!0}},BtHH:function(t,e,i){var s=i("mbLO"),n=i("HHE0");i("cOHw")("getPrototypeOf",function(){return function(t){return n(s(t))}})},BxvP:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},COf8:function(t,e,i){i("OYXR");for(var s=i("i1Q6"),n=i("akPY"),o=i("dhak"),r=i("Ug9I")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],h=s[c],u=h&&h.prototype;u&&!u[r]&&n(u,r,c),o[c]=o.Array}},E5Ce:function(t,e,i){var s=i("ShN9");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==s(t)?t.split(""):Object(t)}},EKwp:function(t,e,i){var s=i("BxvP");t.exports=function(t,e){if(!s(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!s(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},FshL:function(t,e,i){var s=i("vSO4");s(s.S+s.F*!i("6MLN"),"Object",{defineProperties:i("gjjs")})},Gfzd:function(t,e,i){var s=i("zotD"),n=i("R6c1"),o=i("EKwp"),r=Object.defineProperty;e.f=i("6MLN")?Object.defineProperty:function(t,e,i){if(s(t),e=o(e,!0),s(i),n)try{return r(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},"GyB/":function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i("6t7t"),o=s(n),r=i("ibPW"),a=s(r),l="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===l(o.default)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":l(t)}},HHE0:function(t,e,i){var s=i("yS17"),n=i("mbLO"),o=i("/wuY")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),s(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},ID6i:function(t,e){t.exports=function(){}},KxjL:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},Ky5l:function(t,e,i){i("Aa2f"),i("tuDi"),i("c6mp"),i("2mwf"),t.exports=i("zKeE").Symbol},KypI:function(t,e){console.log("This is utils")},LNnS:function(t,e,i){var s=i("Wyka"),n=i("S7IM"),o=i("Zwq5");t.exports=function(t){return function(e,i,r){var a,l=s(e),c=n(l.length),h=o(r,c);if(t&&i!=i){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},LlWG:function(t,e,i){t.exports={default:i("tvE3"),__esModule:!0}},MpYs:function(t,e){var i=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:i)(t)}},NB7d:function(t,e,i){var s=i("zKeE"),n=i("i1Q6"),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:i("1kq3")?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},Ni5N:function(t,e,i){var s=i("B9Lq"),n=i("KxjL").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,n)}},OYXR:function(t,e,i){"use strict";var s=i("ID6i"),n=i("xwD+"),o=i("dhak"),r=i("Wyka");t.exports=i("uRfg")(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):"keys"==e?n(0,i):"values"==e?n(0,t[i]):n(0,[i,t[i]])},"values"),o.Arguments=o.Array,s("keys"),s("values"),s("entries")},Ocr3:function(t,e){e.f=Object.getOwnPropertySymbols},R6c1:function(t,e,i){t.exports=!i("6MLN")&&!i("wLcK")(function(){return 7!=Object.defineProperty(i("9kxq")("div"),"a",{get:function(){return 7}}).a})},S7IM:function(t,e,i){var s=i("MpYs"),n=Math.min;t.exports=function(t){return t>0?n(s(t),9007199254740991):0}},ShN9:function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},TNJq:function(t,e,i){var s=i("zotD"),n=i("gjjs"),o=i("KxjL"),r=i("/wuY")("IE_PROTO"),a=function(){},l=function(){var t,e=i("9kxq")("iframe"),s=o.length;for(e.style.display="none",i("ebIA").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;s--;)delete l.prototype[o[s]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=s(t),i=new a,a.prototype=null,i[r]=t):i=l(),void 0===e?i:n(i,e)}},U72i:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},Ug9I:function(t,e,i){var s=i("NB7d")("wks"),n=i("X6va"),o=i("i1Q6").Symbol,r="function"==typeof o;(t.exports=function(t){return s[t]||(s[t]=r&&o[t]||(r?o:n)("Symbol."+t))}).store=s},Wyka:function(t,e,i){var s=i("E5Ce"),n=i("U72i");t.exports=function(t){return s(n(t))}},X6va:function(t,e){var i=0,s=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+s).toString(36))}},Zwq5:function(t,e,i){var s=i("MpYs"),n=Math.max,o=Math.min;t.exports=function(t,e){return t=s(t),t<0?n(t+e,0):o(t,e)}},ZxII:function(t,e,i){e.f=i("Ug9I")},akPY:function(t,e,i){var s=i("Gfzd"),n=i("0WCH");t.exports=i("6MLN")?function(t,e,i){return s.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},ayXv:function(t,e,i){var s=i("ShN9");t.exports=Array.isArray||function(t){return"Array"==s(t)}},b7Q2:function(t,e,i){"use strict";var s=i("TNJq"),n=i("0WCH"),o=i("11Ut"),r={};i("akPY")(r,i("Ug9I")("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=s(r,{next:n(1,i)}),o(t,e+" Iterator")}},c2zY:function(t,e,i){var s=i("i1Q6"),n=i("zKeE"),o=i("1kq3"),r=i("ZxII"),a=i("Gfzd").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:s.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:r.f(t)})}},c6mp:function(t,e,i){i("c2zY")("asyncIterator")},cOHw:function(t,e,i){var s=i("vSO4"),n=i("zKeE"),o=i("wLcK");t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],r={};r[t]=e(i),s(s.S+s.F*o(function(){i(1)}),"Object",r)}},dhak:function(t,e){t.exports={}},dkQV:function(t,e){var i={};!function(t,e){function i(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,e,i){i.get instanceof Function&&t.__defineGetter__(e,i.get),i.set instanceof Function&&t.__defineSetter__(e,i.set)}),t.inherit=function(t,e){i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){t===e&&(t=0);for(var i=Array(t||0),s=0;s<t;++s)i[s]=0;return i},t.is=function(t,i){return null!==t&&(i instanceof Function&&t instanceof i||!(t.constructor.__implements==e||!t.constructor.__implements[i]))},t.parseUInt=function(t){return Math.abs(parseInt(t))}}(i);var s=Array,n=i.NVector;void 0===i&&(i={}),void 0===i.Collision&&(i.Collision={}),void 0===i.Collision.Shapes&&(i.Collision.Shapes={}),void 0===i.Common&&(i.Common={}),void 0===i.Common.Math&&(i.Common.Math={}),void 0===i.Dynamics&&(i.Dynamics={}),void 0===i.Dynamics.Contacts&&(i.Dynamics.Contacts={}),void 0===i.Dynamics.Controllers&&(i.Dynamics.Controllers={}),void 0===i.Dynamics.Joints&&(i.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function s(){s.b2BoundValues.apply(this,arguments),this.constructor===s&&this.b2BoundValues.apply(this,arguments)}function n(){n.b2Collision.apply(this,arguments)}function o(){o.b2ContactID.apply(this,arguments),this.constructor===o&&this.b2ContactID.apply(this,arguments)}function r(){r.b2ContactPoint.apply(this,arguments)}function a(){a.b2Distance.apply(this,arguments)}function l(){l.b2DistanceInput.apply(this,arguments)}function c(){c.b2DistanceOutput.apply(this,arguments)}function h(){h.b2DistanceProxy.apply(this,arguments)}function u(){u.b2DynamicTree.apply(this,arguments),this.constructor===u&&this.b2DynamicTree.apply(this,arguments)}function m(){m.b2DynamicTreeBroadPhase.apply(this,arguments)}function _(){_.b2DynamicTreeNode.apply(this,arguments)}function p(){p.b2DynamicTreePair.apply(this,arguments)}function d(){d.b2Manifold.apply(this,arguments),this.constructor===d&&this.b2Manifold.apply(this,arguments)}function y(){y.b2ManifoldPoint.apply(this,arguments),this.constructor===y&&this.b2ManifoldPoint.apply(this,arguments)}function f(){f.b2Point.apply(this,arguments)}function x(){x.b2RayCastInput.apply(this,arguments),this.constructor===x&&this.b2RayCastInput.apply(this,arguments)}function v(){v.b2RayCastOutput.apply(this,arguments)}function g(){g.b2Segment.apply(this,arguments)}function b(){b.b2SeparationFunction.apply(this,arguments)}function S(){S.b2Simplex.apply(this,arguments),this.constructor===S&&this.b2Simplex.apply(this,arguments)}function w(){w.b2SimplexCache.apply(this,arguments)}function A(){A.b2SimplexVertex.apply(this,arguments)}function C(){C.b2TimeOfImpact.apply(this,arguments)}function M(){M.b2TOIInput.apply(this,arguments)}function I(){I.b2WorldManifold.apply(this,arguments),this.constructor===I&&this.b2WorldManifold.apply(this,arguments)}function D(){D.ClipVertex.apply(this,arguments)}function P(){P.Features.apply(this,arguments)}function L(){L.b2CircleShape.apply(this,arguments),this.constructor===L&&this.b2CircleShape.apply(this,arguments)}function T(){T.b2EdgeChainDef.apply(this,arguments),this.constructor===T&&this.b2EdgeChainDef.apply(this,arguments)}function E(){E.b2EdgeShape.apply(this,arguments),this.constructor===E&&this.b2EdgeShape.apply(this,arguments)}function B(){B.b2MassData.apply(this,arguments)}function j(){j.b2PolygonShape.apply(this,arguments),this.constructor===j&&this.b2PolygonShape.apply(this,arguments)}function R(){R.b2Shape.apply(this,arguments),this.constructor===R&&this.b2Shape.apply(this,arguments)}function V(){V.b2Color.apply(this,arguments),this.constructor===V&&this.b2Color.apply(this,arguments)}function G(){G.b2Settings.apply(this,arguments)}function F(){F.b2Mat22.apply(this,arguments),this.constructor===F&&this.b2Mat22.apply(this,arguments)}function O(){O.b2Mat33.apply(this,arguments),this.constructor===O&&this.b2Mat33.apply(this,arguments)}function k(){k.b2Math.apply(this,arguments)}function N(){N.b2Sweep.apply(this,arguments)}function J(){J.b2Transform.apply(this,arguments),this.constructor===J&&this.b2Transform.apply(this,arguments)}function U(){U.b2Vec2.apply(this,arguments),this.constructor===U&&this.b2Vec2.apply(this,arguments)}function q(){q.b2Vec3.apply(this,arguments),this.constructor===q&&this.b2Vec3.apply(this,arguments)}function H(){H.b2Body.apply(this,arguments),this.constructor===H&&this.b2Body.apply(this,arguments)}function z(){z.b2BodyDef.apply(this,arguments),this.constructor===z&&this.b2BodyDef.apply(this,arguments)}function X(){X.b2ContactFilter.apply(this,arguments)}function W(){W.b2ContactImpulse.apply(this,arguments)}function Y(){Y.b2ContactListener.apply(this,arguments)}function K(){K.b2ContactManager.apply(this,arguments),this.constructor===K&&this.b2ContactManager.apply(this,arguments)}function Q(){Q.b2DebugDraw.apply(this,arguments),this.constructor===Q&&this.b2DebugDraw.apply(this,arguments)}function Z(){Z.b2DestructionListener.apply(this,arguments)}function $(){$.b2FilterData.apply(this,arguments)}function tt(){tt.b2Fixture.apply(this,arguments),this.constructor===tt&&this.b2Fixture.apply(this,arguments)}function et(){et.b2FixtureDef.apply(this,arguments),this.constructor===et&&this.b2FixtureDef.apply(this,arguments)}function it(){it.b2Island.apply(this,arguments),this.constructor===it&&this.b2Island.apply(this,arguments)}function st(){st.b2TimeStep.apply(this,arguments)}function nt(){nt.b2World.apply(this,arguments),this.constructor===nt&&this.b2World.apply(this,arguments)}function ot(){ot.b2CircleContact.apply(this,arguments)}function rt(){rt.b2Contact.apply(this,arguments),this.constructor===rt&&this.b2Contact.apply(this,arguments)}function at(){at.b2ContactConstraint.apply(this,arguments),this.constructor===at&&this.b2ContactConstraint.apply(this,arguments)}function lt(){lt.b2ContactConstraintPoint.apply(this,arguments)}function ct(){ct.b2ContactEdge.apply(this,arguments)}function ht(){ht.b2ContactFactory.apply(this,arguments),this.constructor===ht&&this.b2ContactFactory.apply(this,arguments)}function ut(){ut.b2ContactRegister.apply(this,arguments)}function mt(){mt.b2ContactResult.apply(this,arguments)}function _t(){_t.b2ContactSolver.apply(this,arguments),this.constructor===_t&&this.b2ContactSolver.apply(this,arguments)}function pt(){pt.b2EdgeAndCircleContact.apply(this,arguments)}function dt(){dt.b2NullContact.apply(this,arguments),this.constructor===dt&&this.b2NullContact.apply(this,arguments)}function yt(){yt.b2PolyAndCircleContact.apply(this,arguments)}function ft(){ft.b2PolyAndEdgeContact.apply(this,arguments)}function xt(){xt.b2PolygonContact.apply(this,arguments)}function vt(){vt.b2PositionSolverManifold.apply(this,arguments),this.constructor===vt&&this.b2PositionSolverManifold.apply(this,arguments)}function gt(){gt.b2BuoyancyController.apply(this,arguments)}function bt(){bt.b2ConstantAccelController.apply(this,arguments)}function St(){St.b2ConstantForceController.apply(this,arguments)}function wt(){wt.b2Controller.apply(this,arguments)}function At(){At.b2ControllerEdge.apply(this,arguments)}function Ct(){Ct.b2GravityController.apply(this,arguments)}function Mt(){Mt.b2TensorDampingController.apply(this,arguments)}function It(){It.b2DistanceJoint.apply(this,arguments),this.constructor===It&&this.b2DistanceJoint.apply(this,arguments)}function Dt(){Dt.b2DistanceJointDef.apply(this,arguments),this.constructor===Dt&&this.b2DistanceJointDef.apply(this,arguments)}function Pt(){Pt.b2FrictionJoint.apply(this,arguments),this.constructor===Pt&&this.b2FrictionJoint.apply(this,arguments)}function Lt(){Lt.b2FrictionJointDef.apply(this,arguments),this.constructor===Lt&&this.b2FrictionJointDef.apply(this,arguments)}function Tt(){Tt.b2GearJoint.apply(this,arguments),this.constructor===Tt&&this.b2GearJoint.apply(this,arguments)}function Et(){Et.b2GearJointDef.apply(this,arguments),this.constructor===Et&&this.b2GearJointDef.apply(this,arguments)}function Bt(){Bt.b2Jacobian.apply(this,arguments)}function jt(){jt.b2Joint.apply(this,arguments),this.constructor===jt&&this.b2Joint.apply(this,arguments)}function Rt(){Rt.b2JointDef.apply(this,arguments),this.constructor===Rt&&this.b2JointDef.apply(this,arguments)}function Vt(){Vt.b2JointEdge.apply(this,arguments)}function Gt(){Gt.b2LineJoint.apply(this,arguments),this.constructor===Gt&&this.b2LineJoint.apply(this,arguments)}function Ft(){Ft.b2LineJointDef.apply(this,arguments),this.constructor===Ft&&this.b2LineJointDef.apply(this,arguments)}function Ot(){Ot.b2MouseJoint.apply(this,arguments),this.constructor===Ot&&this.b2MouseJoint.apply(this,arguments)}function kt(){kt.b2MouseJointDef.apply(this,arguments),this.constructor===kt&&this.b2MouseJointDef.apply(this,arguments)}function Nt(){Nt.b2PrismaticJoint.apply(this,arguments),this.constructor===Nt&&this.b2PrismaticJoint.apply(this,arguments)}function Jt(){Jt.b2PrismaticJointDef.apply(this,arguments),this.constructor===Jt&&this.b2PrismaticJointDef.apply(this,arguments)}function Ut(){Ut.b2PulleyJoint.apply(this,arguments),this.constructor===Ut&&this.b2PulleyJoint.apply(this,arguments)}function qt(){qt.b2PulleyJointDef.apply(this,arguments),this.constructor===qt&&this.b2PulleyJointDef.apply(this,arguments)}function Ht(){Ht.b2RevoluteJoint.apply(this,arguments),this.constructor===Ht&&this.b2RevoluteJoint.apply(this,arguments)}function zt(){zt.b2RevoluteJointDef.apply(this,arguments),this.constructor===zt&&this.b2RevoluteJointDef.apply(this,arguments)}function Xt(){Xt.b2WeldJoint.apply(this,arguments),this.constructor===Xt&&this.b2WeldJoint.apply(this,arguments)}function Wt(){Wt.b2WeldJointDef.apply(this,arguments),this.constructor===Wt&&this.b2WeldJointDef.apply(this,arguments)}i.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",i.Collision.b2AABB=t,i.Collision.b2Bound=e,i.Collision.b2BoundValues=s,i.Collision.b2Collision=n,i.Collision.b2ContactID=o,i.Collision.b2ContactPoint=r,i.Collision.b2Distance=a,i.Collision.b2DistanceInput=l,i.Collision.b2DistanceOutput=c,i.Collision.b2DistanceProxy=h,i.Collision.b2DynamicTree=u,i.Collision.b2DynamicTreeBroadPhase=m,i.Collision.b2DynamicTreeNode=_,i.Collision.b2DynamicTreePair=p,i.Collision.b2Manifold=d,i.Collision.b2ManifoldPoint=y,i.Collision.b2Point=f,i.Collision.b2RayCastInput=x,i.Collision.b2RayCastOutput=v,i.Collision.b2Segment=g,i.Collision.b2SeparationFunction=b,i.Collision.b2Simplex=S,i.Collision.b2SimplexCache=w,i.Collision.b2SimplexVertex=A,i.Collision.b2TimeOfImpact=C,i.Collision.b2TOIInput=M,i.Collision.b2WorldManifold=I,i.Collision.ClipVertex=D,i.Collision.Features=P,i.Collision.Shapes.b2CircleShape=L,i.Collision.Shapes.b2EdgeChainDef=T,i.Collision.Shapes.b2EdgeShape=E,i.Collision.Shapes.b2MassData=B,i.Collision.Shapes.b2PolygonShape=j,i.Collision.Shapes.b2Shape=R,i.Common.b2internal="Box2D.Common.b2internal",i.Common.b2Color=V,i.Common.b2Settings=G,i.Common.Math.b2Mat22=F,i.Common.Math.b2Mat33=O,i.Common.Math.b2Math=k,i.Common.Math.b2Sweep=N,i.Common.Math.b2Transform=J,i.Common.Math.b2Vec2=U,i.Common.Math.b2Vec3=q,i.Dynamics.b2Body=H,i.Dynamics.b2BodyDef=z,i.Dynamics.b2ContactFilter=X,i.Dynamics.b2ContactImpulse=W,i.Dynamics.b2ContactListener=Y,i.Dynamics.b2ContactManager=K,i.Dynamics.b2DebugDraw=Q,i.Dynamics.b2DestructionListener=Z,i.Dynamics.b2FilterData=$,i.Dynamics.b2Fixture=tt,i.Dynamics.b2FixtureDef=et,i.Dynamics.b2Island=it,i.Dynamics.b2TimeStep=st,i.Dynamics.b2World=nt,i.Dynamics.Contacts.b2CircleContact=ot,i.Dynamics.Contacts.b2Contact=rt,i.Dynamics.Contacts.b2ContactConstraint=at,i.Dynamics.Contacts.b2ContactConstraintPoint=lt,i.Dynamics.Contacts.b2ContactEdge=ct,i.Dynamics.Contacts.b2ContactFactory=ht,i.Dynamics.Contacts.b2ContactRegister=ut,i.Dynamics.Contacts.b2ContactResult=mt,i.Dynamics.Contacts.b2ContactSolver=_t,i.Dynamics.Contacts.b2EdgeAndCircleContact=pt,i.Dynamics.Contacts.b2NullContact=dt,i.Dynamics.Contacts.b2PolyAndCircleContact=yt,i.Dynamics.Contacts.b2PolyAndEdgeContact=ft,i.Dynamics.Contacts.b2PolygonContact=xt,i.Dynamics.Contacts.b2PositionSolverManifold=vt,i.Dynamics.Controllers.b2BuoyancyController=gt,i.Dynamics.Controllers.b2ConstantAccelController=bt,i.Dynamics.Controllers.b2ConstantForceController=St,i.Dynamics.Controllers.b2Controller=wt,i.Dynamics.Controllers.b2ControllerEdge=At,i.Dynamics.Controllers.b2GravityController=Ct,i.Dynamics.Controllers.b2TensorDampingController=Mt,i.Dynamics.Joints.b2DistanceJoint=It,i.Dynamics.Joints.b2DistanceJointDef=Dt,i.Dynamics.Joints.b2FrictionJoint=Pt,i.Dynamics.Joints.b2FrictionJointDef=Lt,i.Dynamics.Joints.b2GearJoint=Tt,i.Dynamics.Joints.b2GearJointDef=Et,i.Dynamics.Joints.b2Jacobian=Bt,i.Dynamics.Joints.b2Joint=jt,i.Dynamics.Joints.b2JointDef=Rt,i.Dynamics.Joints.b2JointEdge=Vt,i.Dynamics.Joints.b2LineJoint=Gt,i.Dynamics.Joints.b2LineJointDef=Ft,i.Dynamics.Joints.b2MouseJoint=Ot,i.Dynamics.Joints.b2MouseJointDef=kt,i.Dynamics.Joints.b2PrismaticJoint=Nt,i.Dynamics.Joints.b2PrismaticJointDef=Jt,i.Dynamics.Joints.b2PulleyJoint=Ut,i.Dynamics.Joints.b2PulleyJointDef=qt,i.Dynamics.Joints.b2RevoluteJoint=Ht,i.Dynamics.Joints.b2RevoluteJointDef=zt,i.Dynamics.Joints.b2WeldJoint=Xt,i.Dynamics.Joints.b2WeldJointDef=Wt}(),i.postDefs=[],function(){var t=i.Collision.Shapes.b2CircleShape,e=i.Collision.Shapes.b2PolygonShape,o=i.Collision.Shapes.b2Shape,r=i.Common.b2Settings,a=i.Common.Math.b2Math,l=i.Common.Math.b2Sweep,c=i.Common.Math.b2Transform,h=i.Common.Math.b2Vec2,u=i.Collision.b2AABB,m=i.Collision.b2Bound,_=i.Collision.b2BoundValues,p=i.Collision.b2Collision,d=i.Collision.b2ContactID,y=i.Collision.b2ContactPoint,f=i.Collision.b2Distance,x=i.Collision.b2DistanceInput,v=i.Collision.b2DistanceOutput,g=i.Collision.b2DistanceProxy,b=i.Collision.b2DynamicTree,S=i.Collision.b2DynamicTreeBroadPhase,w=i.Collision.b2DynamicTreeNode,A=i.Collision.b2DynamicTreePair,C=i.Collision.b2Manifold,M=i.Collision.b2ManifoldPoint,I=i.Collision.b2Point,D=i.Collision.b2RayCastInput,P=i.Collision.b2RayCastOutput,L=i.Collision.b2Segment,T=i.Collision.b2SeparationFunction,E=i.Collision.b2Simplex,B=i.Collision.b2SimplexCache,j=i.Collision.b2SimplexVertex,R=i.Collision.b2TimeOfImpact,V=i.Collision.b2TOIInput,G=i.Collision.b2WorldManifold,F=i.Collision.ClipVertex,O=i.Collision.Features,k=i.Collision.IBroadPhase;u.b2AABB=function(){this.lowerBound=new h,this.upperBound=new h},u.prototype.IsValid=function(){var t=this.upperBound.y-this.lowerBound.y;return t=(t=this.upperBound.x-this.lowerBound.x>=0&&t>=0)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},u.prototype.GetCenter=function(){return new h((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},u.prototype.GetExtents=function(){return new h((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},u.prototype.Contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},u.prototype.RayCast=function(t,e){var i=-Number.MAX_VALUE,s=Number.MAX_VALUE,n=e.p1.x,o=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(a),c=t.normal,h=0,u=0,m=h=0;if(m=0,Math.abs(r)<Number.MIN_VALUE){if(n<this.lowerBound.x||this.upperBound.x<n)return!1}else if(h=1/r,u=(this.lowerBound.x-n)*h,h=(this.upperBound.x-n)*h,m=-1,u>h&&(m=u,u=h,h=m,m=1),u>i&&(c.x=m,c.y=0,i=u),s=Math.min(s,h),i>s)return!1;if(l<Number.MIN_VALUE){if(o<this.lowerBound.y||this.upperBound.y<o)return!1}else if(h=1/a,u=(this.lowerBound.y-o)*h,h=(this.upperBound.y-o)*h,m=-1,u>h&&(m=u,u=h,h=m,m=1),u>i&&(c.y=m,c.x=0,i=u),s=Math.min(s,h),i>s)return!1;return t.fraction=i,!0},u.prototype.TestOverlap=function(t){var e=t.lowerBound.y-this.upperBound.y,i=this.lowerBound.y-t.upperBound.y;return!(t.lowerBound.x-this.upperBound.x>0||e>0)&&!(this.lowerBound.x-t.upperBound.x>0||i>0)},u.Combine=function(t,e){var i=new u;return i.Combine(t,e),i},u.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},m.b2Bound=function(){},m.prototype.IsLower=function(){return 0==(1&this.value)},m.prototype.IsUpper=function(){return 1==(1&this.value)},m.prototype.Swap=function(t){var e=this.value,i=this.proxy,s=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=i,t.stabbingCount=s},_.b2BoundValues=function(){},_.prototype.b2BoundValues=function(){this.lowerValues=new n,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new n,this.upperValues[0]=0,this.upperValues[1]=0},p.b2Collision=function(){},p.ClipSegmentToLine=function(t,e,i,s){void 0===s&&(s=0);var n,o=0;n=e[0];var r=n.v;n=e[1];var a=n.v,l=i.x*r.x+i.y*r.y-s;return n=i.x*a.x+i.y*a.y-s,l<=0&&t[o++].Set(e[0]),n<=0&&t[o++].Set(e[1]),l*n<0&&(i=l/(l-n),n=t[o],n=n.v,n.x=r.x+i*(a.x-r.x),n.y=r.y+i*(a.y-r.y),n=t[o],n.id=(l>0?e[0]:e[1]).id,++o),o},p.EdgeSeparation=function(t,e,i,s,n){void 0===i&&(i=0),parseInt(t.m_vertexCount);var o=t.m_vertices;t=t.m_normals;var r,a,l=parseInt(s.m_vertexCount),c=s.m_vertices;r=e.R,a=t[i],t=r.col1.x*a.x+r.col2.x*a.y,s=r.col1.y*a.x+r.col2.y*a.y,r=n.R;var h=r.col1.x*t+r.col1.y*s;r=r.col2.x*t+r.col2.y*s;for(var u=0,m=Number.MAX_VALUE,_=0;_<l;++_)a=c[_],(a=a.x*h+a.y*r)<m&&(m=a,u=_);return a=o[i],r=e.R,i=e.position.x+(r.col1.x*a.x+r.col2.x*a.y),e=e.position.y+(r.col1.y*a.x+r.col2.y*a.y),a=c[u],r=n.R,o=n.position.x+(r.col1.x*a.x+r.col2.x*a.y),n=n.position.y+(r.col1.y*a.x+r.col2.y*a.y),o-=i,n-=e,o*t+n*s},p.FindMaxSeparation=function(t,e,i,s,n){var o,r,a=parseInt(e.m_vertexCount),l=e.m_normals;r=n.R,o=s.m_centroid;var c=n.position.x+(r.col1.x*o.x+r.col2.x*o.y),h=n.position.y+(r.col1.y*o.x+r.col2.y*o.y);r=i.R,o=e.m_centroid,c-=i.position.x+(r.col1.x*o.x+r.col2.x*o.y),h-=i.position.y+(r.col1.y*o.x+r.col2.y*o.y),r=c*i.R.col1.x+h*i.R.col1.y,h=c*i.R.col2.x+h*i.R.col2.y,c=0;for(var u=-Number.MAX_VALUE,m=0;m<a;++m)o=l[m],(o=o.x*r+o.y*h)>u&&(u=o,c=m);l=p.EdgeSeparation(e,i,c,s,n),o=parseInt(c-1>=0?c-1:a-1),r=p.EdgeSeparation(e,i,o,s,n),h=parseInt(c+1<a?c+1:0),u=p.EdgeSeparation(e,i,h,s,n);var _=m=0,d=0;if(r>l&&r>u)d=-1,m=o,_=r;else{if(!(u>l))return t[0]=c,l;d=1,m=h,_=u}for(;c=-1==d?m-1>=0?m-1:a-1:m+1<a?m+1:0,(l=p.EdgeSeparation(e,i,c,s,n))>_;)m=c,_=l;return t[0]=m,_},p.FindIncidentEdge=function(t,e,i,s,n,o){void 0===s&&(s=0),parseInt(e.m_vertexCount);var r=e.m_normals,a=parseInt(n.m_vertexCount);e=n.m_vertices,n=n.m_normals;var l;l=i.R,i=r[s],r=l.col1.x*i.x+l.col2.x*i.y;var c=l.col1.y*i.x+l.col2.y*i.y;l=o.R,i=l.col1.x*r+l.col1.y*c,c=l.col2.x*r+l.col2.y*c,r=i,l=0;for(var h=Number.MAX_VALUE,u=0;u<a;++u)i=n[u],(i=r*i.x+c*i.y)<h&&(h=i,l=u);n=parseInt(l),r=parseInt(n+1<a?n+1:0),a=t[0],i=e[n],l=o.R,a.v.x=o.position.x+(l.col1.x*i.x+l.col2.x*i.y),a.v.y=o.position.y+(l.col1.y*i.x+l.col2.y*i.y),a.id.features.referenceEdge=s,a.id.features.incidentEdge=n,a.id.features.incidentVertex=0,a=t[1],i=e[r],l=o.R,a.v.x=o.position.x+(l.col1.x*i.x+l.col2.x*i.y),a.v.y=o.position.y+(l.col1.y*i.x+l.col2.y*i.y),a.id.features.referenceEdge=s,a.id.features.incidentEdge=r,a.id.features.incidentVertex=1},p.MakeClipPointVector=function(){var t=new s(2);return t[0]=new F,t[1]=new F,t},p.CollidePolygons=function(t,e,i,s,n){var o;t.m_pointCount=0;var a=e.m_radius+s.m_radius;o=0,p.s_edgeAO[0]=o;var l=p.FindMaxSeparation(p.s_edgeAO,e,i,s,n);if(o=p.s_edgeAO[0],!(l>a)){var c=0;p.s_edgeBO[0]=c;var h=p.FindMaxSeparation(p.s_edgeBO,s,n,e,i);if(c=p.s_edgeBO[0],!(h>a)){var u=0,m=0;h>.98*l+.001?(l=s,s=e,e=n,i=i,u=c,t.m_type=C.e_faceB,m=1):(l=e,s=s,e=i,i=n,u=o,t.m_type=C.e_faceA,m=0),o=p.s_incidentEdge,p.FindIncidentEdge(o,l,e,u,s,i),c=parseInt(l.m_vertexCount),n=l.m_vertices,l=n[u];var _;_=u+1<c?n[parseInt(u+1)]:n[0],u=p.s_localTangent,u.Set(_.x-l.x,_.y-l.y),u.Normalize(),n=p.s_localNormal,n.x=u.y,n.y=-u.x,s=p.s_planePoint,s.Set(.5*(l.x+_.x),.5*(l.y+_.y)),h=p.s_tangent,c=e.R,h.x=c.col1.x*u.x+c.col2.x*u.y,h.y=c.col1.y*u.x+c.col2.y*u.y;var d=p.s_tangent2;d.x=-h.x,d.y=-h.y,u=p.s_normal,u.x=h.y,u.y=-h.x;var y=p.s_v11,f=p.s_v12;if(y.x=e.position.x+(c.col1.x*l.x+c.col2.x*l.y),y.y=e.position.y+(c.col1.y*l.x+c.col2.y*l.y),f.x=e.position.x+(c.col1.x*_.x+c.col2.x*_.y),f.y=e.position.y+(c.col1.y*_.x+c.col2.y*_.y),e=u.x*y.x+u.y*y.y,c=h.x*f.x+h.y*f.y+a,_=p.s_clipPoints1,l=p.s_clipPoints2,f=0,!((f=p.ClipSegmentToLine(_,o,d,-h.x*y.x-h.y*y.y+a))<2||(f=p.ClipSegmentToLine(l,_,h,c))<2)){for(t.m_localPlaneNormal.SetV(n),t.m_localPoint.SetV(s),s=n=0;s<r.b2_maxManifoldPoints;++s)o=l[s],u.x*o.v.x+u.y*o.v.y-e<=a&&(h=t.m_points[n],c=i.R,d=o.v.x-i.position.x,y=o.v.y-i.position.y,h.m_localPoint.x=d*c.col1.x+y*c.col1.y,h.m_localPoint.y=d*c.col2.x+y*c.col2.y,h.m_id.Set(o.id),h.m_id.features.flip=m,++n);t.m_pointCount=n}}}},p.CollideCircles=function(t,e,i,s,n){t.m_pointCount=0;var o,r;o=i.R,r=e.m_p;var a=i.position.x+(o.col1.x*r.x+o.col2.x*r.y);i=i.position.y+(o.col1.y*r.x+o.col2.y*r.y),o=n.R,r=s.m_p,a=n.position.x+(o.col1.x*r.x+o.col2.x*r.y)-a,n=n.position.y+(o.col1.y*r.x+o.col2.y*r.y)-i,o=e.m_radius+s.m_radius,a*a+n*n>o*o||(t.m_type=C.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(s.m_p),t.m_points[0].m_id.key=0)},p.CollidePolygonAndCircle=function(t,e,i,s,n){var o,r,a=t.m_pointCount=0,l=0;r=n.R,o=s.m_p;var c=n.position.y+(r.col1.y*o.x+r.col2.y*o.y);a=n.position.x+(r.col1.x*o.x+r.col2.x*o.y)-i.position.x,l=c-i.position.y,r=i.R,i=a*r.col1.x+l*r.col1.y,r=a*r.col2.x+l*r.col2.y;var h=0;c=-Number.MAX_VALUE,n=e.m_radius+s.m_radius;var u=parseInt(e.m_vertexCount),m=e.m_vertices;e=e.m_normals;for(var _=0;_<u;++_){if(o=m[_],a=i-o.x,l=r-o.y,o=e[_],(a=o.x*a+o.y*l)>n)return;a>c&&(c=a,h=_)}if(a=parseInt(h),l=parseInt(a+1<u?a+1:0),o=m[a],m=m[l],c<Number.MIN_VALUE)t.m_pointCount=1,t.m_type=C.e_faceA,t.m_localPlaneNormal.SetV(e[h]),t.m_localPoint.x=.5*(o.x+m.x),t.m_localPoint.y=.5*(o.y+m.y);else if(c=(i-m.x)*(o.x-m.x)+(r-m.y)*(o.y-m.y),(i-o.x)*(m.x-o.x)+(r-o.y)*(m.y-o.y)<=0){if((i-o.x)*(i-o.x)+(r-o.y)*(r-o.y)>n*n)return;t.m_pointCount=1,t.m_type=C.e_faceA,t.m_localPlaneNormal.x=i-o.x,t.m_localPlaneNormal.y=r-o.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(o)}else if(c<=0){if((i-m.x)*(i-m.x)+(r-m.y)*(r-m.y)>n*n)return;t.m_pointCount=1,t.m_type=C.e_faceA,t.m_localPlaneNormal.x=i-m.x,t.m_localPlaneNormal.y=r-m.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(m)}else{if(h=.5*(o.x+m.x),o=.5*(o.y+m.y),(c=(i-h)*e[a].x+(r-o)*e[a].y)>n)return;t.m_pointCount=1,t.m_type=C.e_faceA,t.m_localPlaneNormal.x=e[a].x,t.m_localPlaneNormal.y=e[a].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(h,o)}t.m_points[0].m_localPoint.SetV(s.m_p),t.m_points[0].m_id.key=0},p.TestOverlap=function(t,e){var i=e.lowerBound,s=t.upperBound,n=i.x-s.x,o=i.y-s.y;i=t.lowerBound,s=e.upperBound;var r=i.y-s.y;return!(n>0||o>0)&&!(i.x-s.x>0||r>0)},i.postDefs.push(function(){i.Collision.b2Collision.s_incidentEdge=p.MakeClipPointVector(),i.Collision.b2Collision.s_clipPoints1=p.MakeClipPointVector(),i.Collision.b2Collision.s_clipPoints2=p.MakeClipPointVector(),i.Collision.b2Collision.s_edgeAO=new n(1),i.Collision.b2Collision.s_edgeBO=new n(1),i.Collision.b2Collision.s_localTangent=new h,i.Collision.b2Collision.s_localNormal=new h,i.Collision.b2Collision.s_planePoint=new h,i.Collision.b2Collision.s_normal=new h,i.Collision.b2Collision.s_tangent=new h,i.Collision.b2Collision.s_tangent2=new h,i.Collision.b2Collision.s_v11=new h,i.Collision.b2Collision.s_v12=new h,i.Collision.b2Collision.b2CollidePolyTempVec=new h,i.Collision.b2Collision.b2_nullFeature=255}),d.b2ContactID=function(){this.features=new O},d.prototype.b2ContactID=function(){this.features._m_id=this},d.prototype.Set=function(t){this.key=t._key},d.prototype.Copy=function(){var t=new d;return t.key=this.key,t},Object.defineProperty(d.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(d.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}),y.b2ContactPoint=function(){this.position=new h,this.velocity=new h,this.normal=new h,this.id=new d},f.b2Distance=function(){},f.Distance=function(t,e,i){++f.b2_gjkCalls;var s=i.proxyA,n=i.proxyB,o=i.transformA,l=i.transformB,c=f.s_simplex;c.ReadCache(e,s,o,n,l);var u=c.m_vertices,m=f.s_saveA,_=f.s_saveB,p=0;c.GetClosestPoint().LengthSquared();for(var d,y=0,x=0;x<20;){for(p=c.m_count,y=0;y<p;y++)m[y]=u[y].indexA,_[y]=u[y].indexB;switch(c.m_count){case 1:break;case 2:c.Solve2();break;case 3:c.Solve3();break;default:r.b2Assert(!1)}if(3==c.m_count)break;if(d=c.GetClosestPoint(),d.LengthSquared(),y=c.GetSearchDirection(),y.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;d=u[c.m_count],d.indexA=s.GetSupport(a.MulTMV(o.R,y.GetNegative())),d.wA=a.MulX(o,s.GetVertex(d.indexA)),d.indexB=n.GetSupport(a.MulTMV(l.R,y)),d.wB=a.MulX(l,n.GetVertex(d.indexB)),d.w=a.SubtractVV(d.wB,d.wA),++x,++f.b2_gjkIters;var v=!1;for(y=0;y<p;y++)if(d.indexA==m[y]&&d.indexB==_[y]){v=!0;break}if(v)break;++c.m_count}f.b2_gjkMaxIters=a.Max(f.b2_gjkMaxIters,x),c.GetWitnessPoints(t.pointA,t.pointB),t.distance=a.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=x,c.WriteCache(e),i.useRadii&&(e=s.m_radius,n=n.m_radius,t.distance>e+n&&t.distance>Number.MIN_VALUE?(t.distance-=e+n,i=a.SubtractVV(t.pointB,t.pointA),i.Normalize(),t.pointA.x+=e*i.x,t.pointA.y+=e*i.y,t.pointB.x-=n*i.x,t.pointB.y-=n*i.y):(d=new h,d.x=.5*(t.pointA.x+t.pointB.x),d.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=d.x,t.pointA.y=t.pointB.y=d.y,t.distance=0))},i.postDefs.push(function(){i.Collision.b2Distance.s_simplex=new E,i.Collision.b2Distance.s_saveA=new n(3),i.Collision.b2Distance.s_saveB=new n(3)}),x.b2DistanceInput=function(){},v.b2DistanceOutput=function(){this.pointA=new h,this.pointB=new h},g.b2DistanceProxy=function(){},g.prototype.Set=function(i){switch(i.GetType()){case o.e_circleShape:i=i instanceof t?i:null,this.m_vertices=new s(1,!0),this.m_vertices[0]=i.m_p,this.m_count=1,this.m_radius=i.m_radius;break;case o.e_polygonShape:i=i instanceof e?i:null,this.m_vertices=i.m_vertices,this.m_count=i.m_vertexCount,this.m_radius=i.m_radius;break;default:r.b2Assert(!1)}},g.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,s=1;s<this.m_count;++s){var n=this.m_vertices[s].x*t.x+this.m_vertices[s].y*t.y;n>i&&(e=s,i=n)}return e},g.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,s=1;s<this.m_count;++s){var n=this.m_vertices[s].x*t.x+this.m_vertices[s].y*t.y;n>i&&(e=s,i=n)}return this.m_vertices[e]},g.prototype.GetVertexCount=function(){return this.m_count},g.prototype.GetVertex=function(t){return void 0===t&&(t=0),r.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},b.b2DynamicTree=function(){},b.prototype.b2DynamicTree=function(){this.m_freeList=this.m_root=null,this.m_insertionCount=this.m_path=0},b.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),s=r.b2_aabbExtension,n=r.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-s,i.aabb.lowerBound.y=t.lowerBound.y-n,i.aabb.upperBound.x=t.upperBound.x+s,i.aabb.upperBound.y=t.upperBound.y+n,i.userData=e,this.InsertLeaf(i),i},b.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},b.prototype.MoveProxy=function(t,e,i){if(r.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var s=r.b2_aabbExtension+r.b2_aabbMultiplier*(i.x>0?i.x:-i.x);return i=r.b2_aabbExtension+r.b2_aabbMultiplier*(i.y>0?i.y:-i.y),t.aabb.lowerBound.x=e.lowerBound.x-s,t.aabb.lowerBound.y=e.lowerBound.y-i,t.aabb.upperBound.x=e.upperBound.x+s,t.aabb.upperBound.y=e.upperBound.y+i,this.InsertLeaf(t),!0},b.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;e<t;e++){for(var i=this.m_root,s=0;0==i.IsLeaf();)i=this.m_path>>s&1?i.child2:i.child1,s=s+1&31;++this.m_path,this.RemoveLeaf(i),this.InsertLeaf(i)}},b.prototype.GetFatAABB=function(t){return t.aabb},b.prototype.GetUserData=function(t){return t.userData},b.prototype.Query=function(t,e){if(null!=this.m_root){var i=new s,n=0;for(i[n++]=this.m_root;n>0;){var o=i[--n];if(o.aabb.TestOverlap(e))if(o.IsLeaf()){if(!t(o))break}else i[n++]=o.child1,i[n++]=o.child2}}},b.prototype.RayCast=function(t,e){if(null!=this.m_root){var i=e.p1,n=e.p2,o=a.SubtractVV(i,n);o.Normalize(),o=a.CrossFV(1,o);var r=a.AbsV(o),l=e.maxFraction,c=new u,h=0,m=0;h=i.x+l*(n.x-i.x),m=i.y+l*(n.y-i.y),c.lowerBound.x=Math.min(i.x,h),c.lowerBound.y=Math.min(i.y,m),c.upperBound.x=Math.max(i.x,h),c.upperBound.y=Math.max(i.y,m);var _=new s,p=0;for(_[p++]=this.m_root;p>0;)if(l=_[--p],0!=l.aabb.TestOverlap(c)&&(h=l.aabb.GetCenter(),m=l.aabb.GetExtents(),!(Math.abs(o.x*(i.x-h.x)+o.y*(i.y-h.y))-r.x*m.x-r.y*m.y>0)))if(l.IsLeaf()){if(h=new D,h.p1=e.p1,h.p2=e.p2,h.maxFraction=e.maxFraction,0==(l=t(h,l)))break;l>0&&(h=i.x+l*(n.x-i.x),m=i.y+l*(n.y-i.y),c.lowerBound.x=Math.min(i.x,h),c.lowerBound.y=Math.min(i.y,m),c.upperBound.x=Math.max(i.x,h),c.upperBound.y=Math.max(i.y,m))}else _[p++]=l.child1,_[p++]=l.child2}},b.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new w},b.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},b.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)this.m_root=t,this.m_root.parent=null;else{var e=t.aabb.GetCenter(),i=this.m_root;if(0==i.IsLeaf())do{var s=i.child1;i=i.child2,i=Math.abs((s.aabb.lowerBound.x+s.aabb.upperBound.x)/2-e.x)+Math.abs((s.aabb.lowerBound.y+s.aabb.upperBound.y)/2-e.y)<Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-e.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-e.y)?s:i}while(0==i.IsLeaf());if(e=i.parent,s=this.AllocateNode(),s.parent=e,s.userData=null,s.aabb.Combine(t.aabb,i.aabb),e){i.parent.child1==i?e.child1=s:e.child2=s,s.child1=i,s.child2=t,i.parent=s,t.parent=s;do{if(e.aabb.Contains(s.aabb))break;e.aabb.Combine(e.child1.aabb,e.child2.aabb),s=e,e=e.parent}while(e)}else s.child1=i,s.child2=t,i.parent=s,this.m_root=t.parent=s}},b.prototype.RemoveLeaf=function(t){if(t==this.m_root)this.m_root=null;else{var e=t.parent,i=e.parent;if(t=e.child1==t?e.child2:e.child1,i)for(i.child1==e?i.child1=t:i.child2=t,t.parent=i,this.FreeNode(e);i&&(e=i.aabb,i.aabb=u.Combine(i.child1.aabb,i.child2.aabb),!e.Contains(i.aabb));)i=i.parent;else this.m_root=t,t.parent=null,this.FreeNode(e)}},S.b2DynamicTreeBroadPhase=function(){this.m_tree=new b,this.m_moveBuffer=new s,this.m_pairBuffer=new s,this.m_pairCount=0},S.prototype.CreateProxy=function(t,e){var i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i},S.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},S.prototype.MoveProxy=function(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)},S.prototype.TestOverlap=function(t,e){var i=this.m_tree.GetFatAABB(t),s=this.m_tree.GetFatAABB(e);return i.TestOverlap(s)},S.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},S.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},S.prototype.GetProxyCount=function(){return this.m_proxyCount},S.prototype.UpdatePairs=function(t){var e,i=this,s=i.m_pairCount=0;for(s=0;s<i.m_moveBuffer.length;++s){e=i.m_moveBuffer[s];var n=i.m_tree.GetFatAABB(e);i.m_tree.Query(function(t){if(t==e)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new A);var s=i.m_pairBuffer[i.m_pairCount];return s.proxyA=t<e?t:e,s.proxyB=t>=e?t:e,++i.m_pairCount,!0},n)}for(s=i.m_moveBuffer.length=0;s<i.m_pairCount;){n=i.m_pairBuffer[s];var o=i.m_tree.GetUserData(n.proxyA),r=i.m_tree.GetUserData(n.proxyB);for(t(o,r),++s;s<i.m_pairCount&&(o=i.m_pairBuffer[s],o.proxyA==n.proxyA&&o.proxyB==n.proxyB);)++s}},S.prototype.Query=function(t,e){this.m_tree.Query(t,e)},S.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},S.prototype.Validate=function(){},S.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},S.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},S.prototype.UnBufferMove=function(t){this.m_moveBuffer.splice(parseInt(this.m_moveBuffer.indexOf(t)),1)},S.prototype.ComparePairs=function(){return 0},S.__implements={},S.__implements[k]=!0,w.b2DynamicTreeNode=function(){this.aabb=new u},w.prototype.IsLeaf=function(){return null==this.child1},A.b2DynamicTreePair=function(){},C.b2Manifold=function(){this.m_pointCount=0},C.prototype.b2Manifold=function(){this.m_points=new s(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new M;this.m_localPlaneNormal=new h,this.m_localPoint=new h},C.prototype.Reset=function(){for(var t=0;t<r.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof M?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_pointCount=this.m_type=0},C.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;e<r.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof M?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},C.prototype.Copy=function(){var t=new C;return t.Set(this),t},i.postDefs.push(function(){i.Collision.b2Manifold.e_circles=1,i.Collision.b2Manifold.e_faceA=2,i.Collision.b2Manifold.e_faceB=4}),M.b2ManifoldPoint=function(){this.m_localPoint=new h,this.m_id=new d},M.prototype.b2ManifoldPoint=function(){this.Reset()},M.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_tangentImpulse=this.m_normalImpulse=0,this.m_id.key=0},M.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},I.b2Point=function(){this.p=new h},I.prototype.Support=function(){return this.p},I.prototype.GetFirstVertex=function(){return this.p},D.b2RayCastInput=function(){this.p1=new h,this.p2=new h},D.prototype.b2RayCastInput=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=i},P.b2RayCastOutput=function(){this.normal=new h},L.b2Segment=function(){this.p1=new h,this.p2=new h},L.prototype.TestSegment=function(t,e,i,s){void 0===s&&(s=0);var n=i.p1,o=i.p2.x-n.x,r=i.p2.y-n.y;i=this.p2.y-this.p1.y;var a=-(this.p2.x-this.p1.x),l=100*Number.MIN_VALUE,c=-(o*i+r*a);if(c>l){var h=n.x-this.p1.x,u=n.y-this.p1.y;if(0<=(n=h*i+u*a)&&n<=s*c&&(s=-o*u+r*h,-l*c<=s&&s<=c*(1+l)))return n/=c,s=Math.sqrt(i*i+a*a),i/=s,a/=s,t[0]=n,e.Set(i,a),!0}return!1},L.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},L.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y;t=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:e<0?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p1.y)/i:i<0?(t.lowerBound.y-this.p1.y)/i:Number.POSITIVE_INFINITY),this.p2.x=this.p1.x+e*t,this.p2.y=this.p1.y+i*t},L.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,i=-this.p2.y+this.p1.y;t=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:e<0?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p2.y)/i:i<0?(t.lowerBound.y-this.p2.y)/i:Number.POSITIVE_INFINITY),this.p1.x=this.p2.x+e*t,this.p1.y=this.p2.y+i*t},T.b2SeparationFunction=function(){this.m_localPoint=new h,this.m_axis=new h},T.prototype.Initialize=function(t,e,i,s,n){this.m_proxyA=e,this.m_proxyB=s;var o=parseInt(t.count);r.b2Assert(0<o&&o<3);var l,c,u,m,_=m=u=s=e=0,p=0;_=0,1==o?(this.m_type=T.e_points,l=this.m_proxyA.GetVertex(t.indexA[0]),c=this.m_proxyB.GetVertex(t.indexB[0]),o=l,t=i.R,e=i.position.x+(t.col1.x*o.x+t.col2.x*o.y),s=i.position.y+(t.col1.y*o.x+t.col2.y*o.y),o=c,t=n.R,u=n.position.x+(t.col1.x*o.x+t.col2.x*o.y),m=n.position.y+(t.col1.y*o.x+t.col2.y*o.y),this.m_axis.x=u-e,this.m_axis.y=m-s,this.m_axis.Normalize()):(t.indexB[0]==t.indexB[1]?(this.m_type=T.e_faceA,e=this.m_proxyA.GetVertex(t.indexA[0]),s=this.m_proxyA.GetVertex(t.indexA[1]),c=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(e.x+s.x),this.m_localPoint.y=.5*(e.y+s.y),this.m_axis=a.CrossVF(a.SubtractVV(s,e),1),this.m_axis.Normalize(),o=this.m_axis,t=i.R,_=t.col1.x*o.x+t.col2.x*o.y,p=t.col1.y*o.x+t.col2.y*o.y,o=this.m_localPoint,t=i.R,e=i.position.x+(t.col1.x*o.x+t.col2.x*o.y),s=i.position.y+(t.col1.y*o.x+t.col2.y*o.y),o=c,t=n.R,u=n.position.x+(t.col1.x*o.x+t.col2.x*o.y),m=n.position.y+(t.col1.y*o.x+t.col2.y*o.y),_=(u-e)*_+(m-s)*p):t.indexA[0]==t.indexA[0]?(this.m_type=T.e_faceB,u=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]),l=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(u.x+m.x),this.m_localPoint.y=.5*(u.y+m.y),this.m_axis=a.CrossVF(a.SubtractVV(m,u),1),this.m_axis.Normalize(),o=this.m_axis,t=n.R,_=t.col1.x*o.x+t.col2.x*o.y,p=t.col1.y*o.x+t.col2.y*o.y,o=this.m_localPoint,t=n.R,u=n.position.x+(t.col1.x*o.x+t.col2.x*o.y),m=n.position.y+(t.col1.y*o.x+t.col2.y*o.y),o=l,t=i.R,e=i.position.x+(t.col1.x*o.x+t.col2.x*o.y),s=i.position.y+(t.col1.y*o.x+t.col2.y*o.y),_=(e-u)*_+(s-m)*p):(e=this.m_proxyA.GetVertex(t.indexA[0]),s=this.m_proxyA.GetVertex(t.indexA[1]),u=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]),a.MulX(i,l),l=a.MulMV(i.R,a.SubtractVV(s,e)),a.MulX(n,c),_=a.MulMV(n.R,a.SubtractVV(m,u)),n=l.x*l.x+l.y*l.y,c=_.x*_.x+_.y*_.y,t=a.SubtractVV(_,l),i=l.x*t.x+l.y*t.y,t=_.x*t.x+_.y*t.y,l=l.x*_.x+l.y*_.y,p=n*c-l*l,_=0,0!=p&&(_=a.Clamp((l*t-i*c)/p,0,1)),(l*_+t)/c<0&&(_=a.Clamp((l-i)/n,0,1)),l=new h,l.x=e.x+_*(s.x-e.x),l.y=e.y+_*(s.y-e.y),c=new h,c.x=u.x+_*(m.x-u.x),c.y=u.y+_*(m.y-u.y),0==_||1==_?(this.m_type=T.e_faceB,this.m_axis=a.CrossVF(a.SubtractVV(m,u),1),this.m_axis.Normalize(),this.m_localPoint=c):(this.m_type=T.e_faceA,this.m_axis=a.CrossVF(a.SubtractVV(s,e),1),this.m_localPoint=l)),_<0&&this.m_axis.NegativeSelf())},T.prototype.Evaluate=function(t,e){var i,s,n=0;switch(this.m_type){case T.e_points:return i=a.MulTMV(t.R,this.m_axis),s=a.MulTMV(e.R,this.m_axis.GetNegative()),i=this.m_proxyA.GetSupportVertex(i),s=this.m_proxyB.GetSupportVertex(s),i=a.MulX(t,i),s=a.MulX(e,s),n=(s.x-i.x)*this.m_axis.x+(s.y-i.y)*this.m_axis.y;case T.e_faceA:return n=a.MulMV(t.R,this.m_axis),i=a.MulX(t,this.m_localPoint),s=a.MulTMV(e.R,n.GetNegative()),s=this.m_proxyB.GetSupportVertex(s),s=a.MulX(e,s),n=(s.x-i.x)*n.x+(s.y-i.y)*n.y;case T.e_faceB:return n=a.MulMV(e.R,this.m_axis),s=a.MulX(e,this.m_localPoint),i=a.MulTMV(t.R,n.GetNegative()),i=this.m_proxyA.GetSupportVertex(i),i=a.MulX(t,i),n=(i.x-s.x)*n.x+(i.y-s.y)*n.y;default:return r.b2Assert(!1),0}},i.postDefs.push(function(){i.Collision.b2SeparationFunction.e_points=1,i.Collision.b2SeparationFunction.e_faceA=2,i.Collision.b2SeparationFunction.e_faceB=4}),E.b2Simplex=function(){this.m_v1=new j,this.m_v2=new j,this.m_v3=new j,this.m_vertices=new s(3)},E.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},E.prototype.ReadCache=function(t,e,i,s,n){r.b2Assert(0<=t.count&&t.count<=3);var o,l;this.m_count=t.count;for(var c=this.m_vertices,h=0;h<this.m_count;h++){var u=c[h];u.indexA=t.indexA[h],u.indexB=t.indexB[h],o=e.GetVertex(u.indexA),l=s.GetVertex(u.indexB),u.wA=a.MulX(i,o),u.wB=a.MulX(n,l),u.w=a.SubtractVV(u.wB,u.wA),u.a=0}this.m_count>1&&(t=t.metric,((o=this.GetMetric())<.5*t||2*t<o||o<Number.MIN_VALUE)&&(this.m_count=0)),0==this.m_count&&(u=c[0],u.indexA=0,u.indexB=0,o=e.GetVertex(0),l=s.GetVertex(0),u.wA=a.MulX(i,o),u.wB=a.MulX(n,l),u.w=a.SubtractVV(u.wB,u.wA),this.m_count=1)},E.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=i.parseUInt(this.m_count);for(var e=this.m_vertices,s=0;s<this.m_count;s++)t.indexA[s]=i.parseUInt(e[s].indexA),t.indexB[s]=i.parseUInt(e[s].indexB)},E.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=a.SubtractVV(this.m_v2.w,this.m_v1.w);return a.CrossVV(t,this.m_v1.w.GetNegative())>0?a.CrossFV(1,t):a.CrossVF(t,1);default:return r.b2Assert(!1),new h}},E.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return r.b2Assert(!1),new h;case 1:return this.m_v1.w;case 2:return new h(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return r.b2Assert(!1),new h}},E.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:r.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:r.b2Assert(!1)}},E.prototype.GetMetric=function(){switch(this.m_count){case 0:return r.b2Assert(!1),0;case 1:return 0;case 2:return a.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return a.CrossVV(a.SubtractVV(this.m_v2.w,this.m_v1.w),a.SubtractVV(this.m_v3.w,this.m_v1.w));default:return r.b2Assert(!1),0}},E.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=a.SubtractVV(e,t);t=-(t.x*i.x+t.y*i.y),t<=0?this.m_count=this.m_v1.a=1:(e=e.x*i.x+e.y*i.y,e<=0?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):(i=1/(e+t),this.m_v1.a=e*i,this.m_v2.a=t*i,this.m_count=2))},E.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,s=a.SubtractVV(e,t),n=a.Dot(t,s),o=a.Dot(e,s);n=-n;var r=a.SubtractVV(i,t),l=a.Dot(t,r),c=a.Dot(i,r);l=-l;var h=a.SubtractVV(i,e),u=a.Dot(e,h);h=a.Dot(i,h),u=-u,r=a.CrossVV(s,r),s=r*a.CrossVV(e,i),i=r*a.CrossVV(i,t),t=r*a.CrossVV(t,e),n<=0&&l<=0?this.m_count=this.m_v1.a=1:o>0&&n>0&&t<=0?(c=1/(o+n),this.m_v1.a=o*c,this.m_v2.a=n*c,this.m_count=2):c>0&&l>0&&i<=0?(o=1/(c+l),this.m_v1.a=c*o,this.m_v3.a=l*o,this.m_count=2,this.m_v2.Set(this.m_v3)):o<=0&&u<=0?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):c<=0&&h<=0?(this.m_count=this.m_v3.a=1,this.m_v1.Set(this.m_v3)):h>0&&u>0&&s<=0?(o=1/(h+u),this.m_v2.a=h*o,this.m_v3.a=u*o,this.m_count=2,this.m_v1.Set(this.m_v3)):(o=1/(s+i+t),this.m_v1.a=s*o,this.m_v2.a=i*o,this.m_v3.a=t*o,this.m_count=3)},B.b2SimplexCache=function(){this.indexA=new n(3),this.indexB=new n(3)},j.b2SimplexVertex=function(){},j.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},R.b2TimeOfImpact=function(){},R.TimeOfImpact=function(t){++R.b2_toiCalls;var e=t.proxyA,i=t.proxyB,s=t.sweepA,n=t.sweepB;r.b2Assert(s.t0==n.t0),r.b2Assert(1-s.t0>Number.MIN_VALUE);var o=e.m_radius+i.m_radius;t=t.tolerance;var l=0,c=0,h=0;for(R.s_cache.count=0,R.s_distanceInput.useRadii=!1;;){if(s.GetTransform(R.s_xfA,l),n.GetTransform(R.s_xfB,l),R.s_distanceInput.proxyA=e,R.s_distanceInput.proxyB=i,R.s_distanceInput.transformA=R.s_xfA,R.s_distanceInput.transformB=R.s_xfB,f.Distance(R.s_distanceOutput,R.s_cache,R.s_distanceInput),R.s_distanceOutput.distance<=0){l=1;break}R.s_fcn.Initialize(R.s_cache,e,R.s_xfA,i,R.s_xfB);var u=R.s_fcn.Evaluate(R.s_xfA,R.s_xfB);if(u<=0){l=1;break}if(0==c&&(h=u>o?a.Max(o-t,.75*o):a.Max(u-t,.02*o)),u-h<.5*t){if(0==c){l=1;break}break}var m=l,_=l,p=1;u=u,s.GetTransform(R.s_xfA,p),n.GetTransform(R.s_xfB,p);var d=R.s_fcn.Evaluate(R.s_xfA,R.s_xfB);if(d>=h){l=1;break}for(var y=0;;){var x=0;x=1&y?_+(h-u)*(p-_)/(d-u):.5*(_+p),s.GetTransform(R.s_xfA,x),n.GetTransform(R.s_xfB,x);var v=R.s_fcn.Evaluate(R.s_xfA,R.s_xfB);if(a.Abs(v-h)<.025*t){m=x;break}if(v>h?(_=x,u=v):(p=x,d=v),++y,++R.b2_toiRootIters,50==y)break}if(R.b2_toiMaxRootIters=a.Max(R.b2_toiMaxRootIters,y),m<(1+100*Number.MIN_VALUE)*l)break;if(l=m,c++,++R.b2_toiIters,1e3==c)break}return R.b2_toiMaxIters=a.Max(R.b2_toiMaxIters,c),l},i.postDefs.push(function(){i.Collision.b2TimeOfImpact.b2_toiCalls=0,i.Collision.b2TimeOfImpact.b2_toiIters=0,i.Collision.b2TimeOfImpact.b2_toiMaxIters=0,i.Collision.b2TimeOfImpact.b2_toiRootIters=0,i.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,i.Collision.b2TimeOfImpact.s_cache=new B,i.Collision.b2TimeOfImpact.s_distanceInput=new x,i.Collision.b2TimeOfImpact.s_xfA=new c,i.Collision.b2TimeOfImpact.s_xfB=new c,i.Collision.b2TimeOfImpact.s_fcn=new T,i.Collision.b2TimeOfImpact.s_distanceOutput=new v}),V.b2TOIInput=function(){this.proxyA=new g,this.proxyB=new g,this.sweepA=new l,this.sweepB=new l},G.b2WorldManifold=function(){this.m_normal=new h},G.prototype.b2WorldManifold=function(){this.m_points=new s(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new h},G.prototype.Initialize=function(t,e,i,s,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!=t.m_pointCount){var o,r,a=0,l=0,c=0,h=0,u=0,m=0;switch(o=0,t.m_type){case C.e_circles:r=e.R,o=t.m_localPoint,a=e.position.x+r.col1.x*o.x+r.col2.x*o.y,e=e.position.y+r.col1.y*o.x+r.col2.y*o.y,r=s.R,o=t.m_points[0].m_localPoint,t=s.position.x+r.col1.x*o.x+r.col2.x*o.y,s=s.position.y+r.col1.y*o.x+r.col2.y*o.y,o=t-a,r=s-e,l=o*o+r*r,l>Number.MIN_VALUE*Number.MIN_VALUE?(l=Math.sqrt(l),this.m_normal.x=o/l,this.m_normal.y=r/l):(this.m_normal.x=1,this.m_normal.y=0),o=e+i*this.m_normal.y,s-=n*this.m_normal.y,this.m_points[0].x=.5*(a+i*this.m_normal.x+(t-n*this.m_normal.x)),this.m_points[0].y=.5*(o+s);break;case C.e_faceA:for(r=e.R,o=t.m_localPlaneNormal,l=r.col1.x*o.x+r.col2.x*o.y,c=r.col1.y*o.x+r.col2.y*o.y,r=e.R,o=t.m_localPoint,h=e.position.x+r.col1.x*o.x+r.col2.x*o.y,u=e.position.y+r.col1.y*o.x+r.col2.y*o.y,this.m_normal.x=l,this.m_normal.y=c,a=0;a<t.m_pointCount;a++)r=s.R,o=t.m_points[a].m_localPoint,m=s.position.x+r.col1.x*o.x+r.col2.x*o.y,o=s.position.y+r.col1.y*o.x+r.col2.y*o.y,this.m_points[a].x=m+.5*(i-(m-h)*l-(o-u)*c-n)*l,this.m_points[a].y=o+.5*(i-(m-h)*l-(o-u)*c-n)*c;break;case C.e_faceB:for(r=s.R,o=t.m_localPlaneNormal,l=r.col1.x*o.x+r.col2.x*o.y,c=r.col1.y*o.x+r.col2.y*o.y,r=s.R,o=t.m_localPoint,h=s.position.x+r.col1.x*o.x+r.col2.x*o.y,u=s.position.y+r.col1.y*o.x+r.col2.y*o.y,this.m_normal.x=-l,this.m_normal.y=-c,a=0;a<t.m_pointCount;a++)r=e.R,o=t.m_points[a].m_localPoint,m=e.position.x+r.col1.x*o.x+r.col2.x*o.y,o=e.position.y+r.col1.y*o.x+r.col2.y*o.y,this.m_points[a].x=m+.5*(n-(m-h)*l-(o-u)*c-i)*l,this.m_points[a].y=o+.5*(n-(m-h)*l-(o-u)*c-i)*c}}},F.ClipVertex=function(){this.v=new h,this.id=new d},F.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},O.Features=function(){},Object.defineProperty(O.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(O.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(O.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(O.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}}),Object.defineProperty(O.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(O.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}}),Object.defineProperty(O.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(O.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}})}(),function(){var t=i.Common.b2Settings,e=i.Collision.Shapes.b2CircleShape,o=i.Collision.Shapes.b2EdgeChainDef,r=i.Collision.Shapes.b2EdgeShape,a=i.Collision.Shapes.b2MassData,l=i.Collision.Shapes.b2PolygonShape,c=i.Collision.Shapes.b2Shape,h=i.Common.Math.b2Mat22,u=i.Common.Math.b2Math,m=i.Common.Math.b2Transform,_=i.Common.Math.b2Vec2,p=i.Collision.b2Distance,d=i.Collision.b2DistanceInput,y=i.Collision.b2DistanceOutput,f=i.Collision.b2DistanceProxy,x=i.Collision.b2SimplexCache;i.inherit(e,i.Collision.Shapes.b2Shape),e.prototype.__super=i.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new _},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){this.__super.Set.call(this,t),i.is(t,e)&&this.m_p.SetV((t instanceof e?t:null).m_p)},e.prototype.TestPoint=function(t,e){var i=t.R,s=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y);return i=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),s=e.x-s,i=e.y-i,s*s+i*i<=this.m_radius*this.m_radius},e.prototype.RayCast=function(t,e,i){var s=i.R,n=e.p1.x-(i.position.x+(s.col1.x*this.m_p.x+s.col2.x*this.m_p.y));i=e.p1.y-(i.position.y+(s.col1.y*this.m_p.x+s.col2.y*this.m_p.y)),s=e.p2.x-e.p1.x;var o=e.p2.y-e.p1.y,r=n*s+i*o,a=s*s+o*o,l=r*r-a*(n*n+i*i-this.m_radius*this.m_radius);return!(l<0||a<Number.MIN_VALUE)&&(0<=(r=-(r+Math.sqrt(l)))&&r<=e.maxFraction*a&&(r/=a,t.fraction=r,t.normal.x=n+r*s,t.normal.y=i+r*o,t.normal.Normalize(),!0))},e.prototype.ComputeAABB=function(t,e){var i=e.R,s=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y);i=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),t.lowerBound.Set(s-this.m_radius,i-this.m_radius),t.upperBound.Set(s+this.m_radius,i+this.m_radius)},e.prototype.ComputeMass=function(e,i){void 0===i&&(i=0),e.mass=i*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,i,s){void 0===e&&(e=0),i=u.MulX(i,this.m_p);var n=-(u.Dot(t,i)-e);if(n<-this.m_radius+Number.MIN_VALUE)return 0;if(n>this.m_radius)return s.SetV(i),Math.PI*this.m_radius*this.m_radius;e=this.m_radius*this.m_radius;var o=n*n;return n=e*(Math.asin(n/this.m_radius)+Math.PI/2)+n*Math.sqrt(e-o),e=-2/3*Math.pow(e-o,1.5)/n,s.x=i.x+t.x*e,s.y=i.y+t.y*e,n},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=c.e_circleShape,this.m_radius=t},o.b2EdgeChainDef=function(){},o.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},i.inherit(r,i.Collision.Shapes.b2Shape),r.prototype.__super=i.Collision.Shapes.b2Shape.prototype,r.b2EdgeShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new _,this.m_v1=new _,this.m_v2=new _,this.m_coreV1=new _,this.m_coreV2=new _,this.m_normal=new _,this.m_direction=new _,this.m_cornerDir1=new _,this.m_cornerDir2=new _},r.prototype.TestPoint=function(){return!1},r.prototype.RayCast=function(t,e,i){var s,n=e.p2.x-e.p1.x,o=e.p2.y-e.p1.y;s=i.R;var r=i.position.x+(s.col1.x*this.m_v1.x+s.col2.x*this.m_v1.y),a=i.position.y+(s.col1.y*this.m_v1.x+s.col2.y*this.m_v1.y),l=i.position.y+(s.col1.y*this.m_v2.x+s.col2.y*this.m_v2.y)-a;i=-(i.position.x+(s.col1.x*this.m_v2.x+s.col2.x*this.m_v2.y)-r),s=100*Number.MIN_VALUE;var c=-(n*l+o*i);if(c>s){r=e.p1.x-r;var h=e.p1.y-a;if(0<=(a=r*l+h*i)&&a<=e.maxFraction*c&&(e=-n*h+o*r,-s*c<=e&&e<=c*(1+s)))return a/=c,t.fraction=a,e=Math.sqrt(l*l+i*i),t.normal.x=l/e,t.normal.y=i/e,!0}return!1},r.prototype.ComputeAABB=function(t,e){var i=e.R,s=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),n=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),o=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y);i=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y),s<o?(t.lowerBound.x=s,t.upperBound.x=o):(t.lowerBound.x=o,t.upperBound.x=s),n<i?(t.lowerBound.y=n,t.upperBound.y=i):(t.lowerBound.y=i,t.upperBound.y=n)},r.prototype.ComputeMass=function(t){t.mass=0,t.center.SetV(this.m_v1),t.I=0},r.prototype.ComputeSubmergedArea=function(t,e,i,s){void 0===e&&(e=0);var n=new _(t.x*e,t.y*e),o=u.MulX(i,this.m_v1);i=u.MulX(i,this.m_v2);var r=u.Dot(t,o)-e;if(t=u.Dot(t,i)-e,r>0){if(t>0)return 0;o.x=-t/(r-t)*o.x+r/(r-t)*i.x,o.y=-t/(r-t)*o.y+r/(r-t)*i.y}else t>0&&(i.x=-t/(r-t)*o.x+r/(r-t)*i.x,i.y=-t/(r-t)*o.y+r/(r-t)*i.y);return s.x=(n.x+o.x+i.x)/3,s.y=(n.y+o.y+i.y)/3,.5*((o.x-n.x)*(i.y-n.y)-(o.y-n.y)*(i.x-n.x))},r.prototype.GetLength=function(){return this.m_length},r.prototype.GetVertex1=function(){return this.m_v1},r.prototype.GetVertex2=function(){return this.m_v2},r.prototype.GetCoreVertex1=function(){return this.m_coreV1},r.prototype.GetCoreVertex2=function(){return this.m_coreV2},r.prototype.GetNormalVector=function(){return this.m_normal},r.prototype.GetDirectionVector=function(){return this.m_direction},r.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},r.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},r.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},r.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},r.prototype.GetFirstVertex=function(t){var e=t.R;return new _(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},r.prototype.GetNextEdge=function(){return this.m_nextEdge},r.prototype.GetPrevEdge=function(){return this.m_prevEdge},r.prototype.Support=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.R,n=t.position.x+(s.col1.x*this.m_coreV1.x+s.col2.x*this.m_coreV1.y),o=t.position.y+(s.col1.y*this.m_coreV1.x+s.col2.y*this.m_coreV1.y),r=t.position.x+(s.col1.x*this.m_coreV2.x+s.col2.x*this.m_coreV2.y);return t=t.position.y+(s.col1.y*this.m_coreV2.x+s.col2.y*this.m_coreV2.y),n*e+o*i>r*e+t*i?(this.s_supportVec.x=n,this.s_supportVec.y=o):(this.s_supportVec.x=r,this.s_supportVec.y=t),this.s_supportVec},r.prototype.b2EdgeShape=function(e,i){this.__super.b2Shape.call(this),this.m_type=c.e_edgeShape,this.m_nextEdge=this.m_prevEdge=null,this.m_v1=e,this.m_v2=i,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},r.prototype.SetPrevEdge=function(t,e,i,s){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=s},r.prototype.SetNextEdge=function(t,e,i,s){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=s},a.b2MassData=function(){this.mass=0,this.center=new _(0,0),this.I=0},i.inherit(l,i.Collision.Shapes.b2Shape),l.prototype.__super=i.Collision.Shapes.b2Shape.prototype,l.b2PolygonShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},l.prototype.Copy=function(){var t=new l;return t.Set(this),t},l.prototype.Set=function(t){if(this.__super.Set.call(this,t),i.is(t,l)){t=t instanceof l?t:null,this.m_centroid.SetV(t.m_centroid),this.m_vertexCount=t.m_vertexCount,this.Reserve(this.m_vertexCount);for(var e=0;e<this.m_vertexCount;e++)this.m_vertices[e].SetV(t.m_vertices[e]),this.m_normals[e].SetV(t.m_normals[e])}},l.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var i,n=new s,o=0;for(o=0;o<t.length;++o)i=t[o],n.push(i);this.SetAsVector(n,e)},l.AsArray=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsArray(t,e),i},l.prototype.SetAsVector=function(e,i){void 0===i&&(i=0),0==i&&(i=e.length),t.b2Assert(2<=i),this.m_vertexCount=i,this.Reserve(i);var s=0;for(s=0;s<this.m_vertexCount;s++)this.m_vertices[s].SetV(e[s]);for(s=0;s<this.m_vertexCount;++s){var n=parseInt(s),o=parseInt(s+1<this.m_vertexCount?s+1:0);n=u.SubtractVV(this.m_vertices[o],this.m_vertices[n]),t.b2Assert(n.LengthSquared()>Number.MIN_VALUE),this.m_normals[s].SetV(u.CrossVF(n,1)),this.m_normals[s].Normalize()}this.m_centroid=l.ComputeCentroid(this.m_vertices,this.m_vertexCount)},l.AsVector=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsVector(t,e),i},l.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},l.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new l;return i.SetAsBox(t,e),i},l.prototype.SetAsOrientedBox=function(t,e,i,s){for(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===s&&(s=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=i,t=new m,t.position=i,t.R.Set(s),i=0;i<this.m_vertexCount;++i)this.m_vertices[i]=u.MulX(t,this.m_vertices[i]),this.m_normals[i]=u.MulMV(t.R,this.m_normals[i])},l.AsOrientedBox=function(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===s&&(s=0);var n=new l;return n.SetAsOrientedBox(t,e,i,s),n},l.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=u.CrossVF(u.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},l.AsEdge=function(t,e){var i=new l;return i.SetAsEdge(t,e),i},l.prototype.TestPoint=function(t,e){var i;i=t.R;for(var s=e.x-t.position.x,n=e.y-t.position.y,o=s*i.col1.x+n*i.col1.y,r=s*i.col2.x+n*i.col2.y,a=0;a<this.m_vertexCount;++a)if(i=this.m_vertices[a],s=o-i.x,n=r-i.y,i=this.m_normals[a],i.x*s+i.y*n>0)return!1;return!0},l.prototype.RayCast=function(t,e,i){var s,n,o=0,r=e.maxFraction,a=0,l=0;a=e.p1.x-i.position.x,l=e.p1.y-i.position.y,s=i.R;var c=a*s.col1.x+l*s.col1.y,h=a*s.col2.x+l*s.col2.y;a=e.p2.x-i.position.x,l=e.p2.y-i.position.y,s=i.R,e=a*s.col1.x+l*s.col1.y-c,s=a*s.col2.x+l*s.col2.y-h;for(var u=parseInt(-1),m=0;m<this.m_vertexCount;++m){if(n=this.m_vertices[m],a=n.x-c,l=n.y-h,n=this.m_normals[m],a=n.x*a+n.y*l,0==(l=n.x*e+n.y*s)){if(a<0)return!1}else l<0&&a<o*l?(o=a/l,u=m):l>0&&a<r*l&&(r=a/l);if(r<o-Number.MIN_VALUE)return!1}return u>=0&&(t.fraction=o,s=i.R,n=this.m_normals[u],t.normal.x=s.col1.x*n.x+s.col2.x*n.y,t.normal.y=s.col1.y*n.x+s.col2.y*n.y,!0)},l.prototype.ComputeAABB=function(t,e){for(var i=e.R,s=this.m_vertices[0],n=e.position.x+(i.col1.x*s.x+i.col2.x*s.y),o=e.position.y+(i.col1.y*s.x+i.col2.y*s.y),r=n,a=o,l=1;l<this.m_vertexCount;++l){s=this.m_vertices[l];var c=e.position.x+(i.col1.x*s.x+i.col2.x*s.y);s=e.position.y+(i.col1.y*s.x+i.col2.y*s.y),n=n<c?n:c,o=o<s?o:s,r=r>c?r:c,a=a>s?a:s}t.lowerBound.x=n-this.m_radius,t.lowerBound.y=o-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},l.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0;else{for(var i=0,s=0,n=0,o=0,r=1/3,a=0;a<this.m_vertexCount;++a){var l=this.m_vertices[a],c=a+1<this.m_vertexCount?this.m_vertices[parseInt(a+1)]:this.m_vertices[0],h=l.x-0,u=l.y-0,m=c.x-0,_=c.y-0,p=h*_-u*m,d=.5*p;n+=d,i+=d*r*(0+l.x+c.x),s+=d*r*(0+l.y+c.y),l=h,u=u,m=m,_=_,o+=p*(r*(.25*(l*l+m*l+m*m)+(0*l+0*m))+0+(r*(.25*(u*u+_*u+_*_)+(0*u+0*_))+0))}t.mass=e*n,i*=1/n,s*=1/n,t.center.Set(i,s),t.I=e*o}},l.prototype.ComputeSubmergedArea=function(t,e,i,s){void 0===e&&(e=0);var o=u.MulTMV(i.R,t),r=e-u.Dot(t,i.position),l=new n,c=0,h=parseInt(-1);e=parseInt(-1);var m=!1;for(t=t=0;t<this.m_vertexCount;++t){l[t]=u.Dot(o,this.m_vertices[t])-r;var p=l[t]<-Number.MIN_VALUE;t>0&&(p?m||(h=t-1,c++):m&&(e=t-1,c++)),m=p}switch(c){case 0:return m?(t=new a,this.ComputeMass(t,1),s.SetV(u.MulX(i,t.center)),t.mass):0;case 1:-1==h?h=this.m_vertexCount-1:e=this.m_vertexCount-1}for(t=parseInt((h+1)%this.m_vertexCount),o=parseInt((e+1)%this.m_vertexCount),r=(0-l[h])/(l[t]-l[h]),l=(0-l[e])/(l[o]-l[e]),h=new _(this.m_vertices[h].x*(1-r)+this.m_vertices[t].x*r,this.m_vertices[h].y*(1-r)+this.m_vertices[t].y*r),e=new _(this.m_vertices[e].x*(1-l)+this.m_vertices[o].x*l,this.m_vertices[e].y*(1-l)+this.m_vertices[o].y*l),l=0,r=new _,c=this.m_vertices[t],t=t;t!=o;)t=(t+1)%this.m_vertexCount,m=t==o?e:this.m_vertices[t],p=.5*((c.x-h.x)*(m.y-h.y)-(c.y-h.y)*(m.x-h.x)),l+=p,r.x+=p*(h.x+c.x+m.x)/3,r.y+=p*(h.y+c.y+m.y)/3,c=m;return r.Multiply(1/l),s.SetV(u.MulX(i,r)),l},l.prototype.GetVertexCount=function(){return this.m_vertexCount},l.prototype.GetVertices=function(){return this.m_vertices},l.prototype.GetNormals=function(){return this.m_normals},l.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,s=1;s<this.m_vertexCount;++s){var n=this.m_vertices[s].x*t.x+this.m_vertices[s].y*t.y;n>i&&(e=s,i=n)}return e},l.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,s=1;s<this.m_vertexCount;++s){var n=this.m_vertices[s].x*t.x+this.m_vertices[s].y*t.y;n>i&&(e=s,i=n)}return this.m_vertices[e]},l.prototype.Validate=function(){return!1},l.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=c.e_polygonShape,this.m_centroid=new _,this.m_vertices=new s,this.m_normals=new s},l.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);e<t;e++)this.m_vertices[e]=new _,this.m_normals[e]=new _},l.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var i=new _,s=0,n=0;n<e;++n){var o=t[n],r=n+1<e?t[parseInt(n+1)]:t[0],a=.5*((o.x-0)*(r.y-0)-(o.y-0)*(r.x-0));s+=a,i.x+=a*(1/3)*(0+o.x+r.x),i.y+=a*(1/3)*(0+o.y+r.y)}return i.x*=1/s,i.y*=1/s,i},l.ComputeOBB=function(t,e,i){void 0===i&&(i=0);var n=0,o=new s(i+1);for(n=0;n<i;++n)o[n]=e[n];for(o[i]=o[0],e=Number.MAX_VALUE,n=1;n<=i;++n){var r=o[parseInt(n-1)],a=o[n].x-r.x,l=o[n].y-r.y,c=Math.sqrt(a*a+l*l);a/=c,l/=c;for(var h=-l,u=a,m=c=Number.MAX_VALUE,_=-Number.MAX_VALUE,p=-Number.MAX_VALUE,d=0;d<i;++d){var y=o[d].x-r.x,f=o[d].y-r.y,x=a*y+l*f;y=h*y+u*f,x<c&&(c=x),y<m&&(m=y),x>_&&(_=x),y>p&&(p=y)}d=(_-c)*(p-m),d<.95*e&&(e=d,t.R.col1.x=a,t.R.col1.y=l,t.R.col2.x=h,t.R.col2.y=u,a=.5*(c+_),l=.5*(m+p),h=t.R,t.center.x=r.x+(h.col1.x*a+h.col2.x*l),t.center.y=r.y+(h.col1.y*a+h.col2.y*l),t.extents.x=.5*(_-c),t.extents.y=.5*(p-m))}},i.postDefs.push(function(){i.Collision.Shapes.b2PolygonShape.s_mat=new h}),c.b2Shape=function(){},c.prototype.Copy=function(){return null},c.prototype.Set=function(t){this.m_radius=t.m_radius},c.prototype.GetType=function(){return this.m_type},c.prototype.TestPoint=function(){return!1},c.prototype.RayCast=function(){return!1},c.prototype.ComputeAABB=function(){},c.prototype.ComputeMass=function(){},c.prototype.ComputeSubmergedArea=function(){return 0},c.TestOverlap=function(t,e,i,s){var n=new d;return n.proxyA=new f,n.proxyA.Set(t),n.proxyB=new f,n.proxyB.Set(i),n.transformA=e,n.transformB=s,n.useRadii=!0,t=new x,t.count=0,e=new y,p.Distance(e,t,n),e.distance<10*Number.MIN_VALUE},c.prototype.b2Shape=function(){this.m_type=c.e_unknownShape,this.m_radius=t.b2_linearSlop},i.postDefs.push(function(){i.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),i.Collision.Shapes.b2Shape.e_circleShape=0,i.Collision.Shapes.b2Shape.e_polygonShape=1,i.Collision.Shapes.b2Shape.e_edgeShape=2,i.Collision.Shapes.b2Shape.e_shapeTypeCount=3,i.Collision.Shapes.b2Shape.e_hitCollide=1,i.Collision.Shapes.b2Shape.e_missCollide=0,i.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=i.Common.b2Color,e=i.Common.b2Settings,s=i.Common.Math.b2Math;t.b2Color=function(){this._b=this._g=this._r=0},t.prototype.b2Color=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._r=i.parseUInt(255*s.Clamp(t,0,1)),this._g=i.parseUInt(255*s.Clamp(e,0,1)),this._b=i.parseUInt(255*s.Clamp(n,0,1))},t.prototype.Set=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._r=i.parseUInt(255*s.Clamp(t,0,1)),this._g=i.parseUInt(255*s.Clamp(e,0,1)),this._b=i.parseUInt(255*s.Clamp(n,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=i.parseUInt(255*s.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=i.parseUInt(255*s.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=i.parseUInt(255*s.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},i.postDefs.push(function(){i.Common.b2Settings.VERSION="2.1alpha",i.Common.b2Settings.USHRT_MAX=65535,i.Common.b2Settings.b2_pi=Math.PI,i.Common.b2Settings.b2_maxManifoldPoints=2,i.Common.b2Settings.b2_aabbExtension=.1,i.Common.b2Settings.b2_aabbMultiplier=2,i.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,i.Common.b2Settings.b2_linearSlop=.005,i.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,i.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,i.Common.b2Settings.b2_maxTOIContactsPerIsland=32,i.Common.b2Settings.b2_maxTOIJointsPerIsland=32,i.Common.b2Settings.b2_velocityThreshold=1,i.Common.b2Settings.b2_maxLinearCorrection=.2,i.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,i.Common.b2Settings.b2_maxTranslation=2,i.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,i.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,i.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,i.Common.b2Settings.b2_contactBaumgarte=.2,i.Common.b2Settings.b2_timeToSleep=.5,i.Common.b2Settings.b2_linearSleepTolerance=.01,i.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=i.Common.Math.b2Mat22,e=i.Common.Math.b2Mat33,s=i.Common.Math.b2Math,n=i.Common.Math.b2Sweep,o=i.Common.Math.b2Transform,r=i.Common.Math.b2Vec2,a=i.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new r,this.col2=new r},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var i=new t;return i.Set(e),i},t.FromVV=function(e,i){var s=new t;return s.SetVV(e,i),s},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t);t=Math.sin(t),this.col1.x=e,this.col2.x=-t,this.col1.y=t,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,i=this.col2.x,s=this.col1.y,n=this.col2.y,o=e*n-i*s;return 0!=o&&(o=1/o),t.col1.x=o*n,t.col2.x=-o*i,t.col1.y=-o*s,t.col2.y=o*e,t},t.prototype.Solve=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=this.col1.x,n=this.col2.x,o=this.col1.y,r=this.col2.y,a=s*r-n*o;return 0!=a&&(a=1/a),t.x=a*(r*e-n*i),t.y=a*(s*i-o*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new a,this.col2=new a,this.col3=new a},e.prototype.b2Mat33=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),t||e||i?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,i){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=this.col1.x,n=this.col2.x,o=this.col1.y,r=this.col2.y,a=s*r-n*o;return 0!=a&&(a=1/a),t.x=a*(r*e-n*i),t.y=a*(s*i-o*e),t},e.prototype.Solve33=function(t,e,i,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0);var n=this.col1.x,o=this.col1.y,r=this.col1.z,a=this.col2.x,l=this.col2.y,c=this.col2.z,h=this.col3.x,u=this.col3.y,m=this.col3.z,_=n*(l*m-c*u)+o*(c*h-a*m)+r*(a*u-l*h);return 0!=_&&(_=1/_),t.x=_*(e*(l*m-c*u)+i*(c*h-a*m)+s*(a*u-l*h)),t.y=_*(n*(i*m-s*u)+o*(s*h-e*m)+r*(e*u-i*h)),t.z=_*(n*(l*s-c*i)+o*(c*e-a*s)+r*(a*i-l*e)),t},s.b2Math=function(){},s.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},s.Dot=function(t,e){return t.x*e.x+t.y*e.y},s.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},s.CrossVF=function(t,e){return void 0===e&&(e=0),new r(e*t.y,-e*t.x)},s.CrossFV=function(t,e){return void 0===t&&(t=0),new r(-t*e.y,t*e.x)},s.MulMV=function(t,e){return new r(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},s.MulTMV=function(t,e){return new r(s.Dot(e,t.col1),s.Dot(e,t.col2))},s.MulX=function(t,e){var i=s.MulMV(t.R,e);return i.x+=t.position.x,i.y+=t.position.y,i},s.MulXT=function(t,e){var i=s.SubtractVV(e,t.position),n=i.x*t.R.col1.x+i.y*t.R.col1.y;return i.y=i.x*t.R.col2.x+i.y*t.R.col2.y,i.x=n,i},s.AddVV=function(t,e){return new r(t.x+e.x,t.y+e.y)},s.SubtractVV=function(t,e){return new r(t.x-e.x,t.y-e.y)},s.Distance=function(t,e){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},s.DistanceSquared=function(t,e){var i=t.x-e.x,s=t.y-e.y;return i*i+s*s},s.MulFV=function(t,e){return void 0===t&&(t=0),new r(t*e.x,t*e.y)},s.AddMM=function(e,i){return t.FromVV(s.AddVV(e.col1,i.col1),s.AddVV(e.col2,i.col2))},s.MulMM=function(e,i){return t.FromVV(s.MulMV(e,i.col1),s.MulMV(e,i.col2))},s.MulTMM=function(e,i){var n=new r(s.Dot(e.col1,i.col1),s.Dot(e.col2,i.col1)),o=new r(s.Dot(e.col1,i.col2),s.Dot(e.col2,i.col2));return t.FromVV(n,o)},s.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},s.AbsV=function(t){return new r(s.Abs(t.x),s.Abs(t.y))},s.AbsM=function(e){return t.FromVV(s.AbsV(e.col1),s.AbsV(e.col2))},s.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t<e?t:e},s.MinV=function(t,e){return new r(s.Min(t.x,e.x),s.Min(t.y,e.y))},s.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},s.MaxV=function(t,e){return new r(s.Max(t.x,e.x),s.Max(t.y,e.y))},s.Clamp=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),t<e?e:t>i?i:t},s.ClampV=function(t,e,i){return s.MaxV(e,s.MinV(t,i))},s.Swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},s.Random=function(){return 2*Math.random()-1},s.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.random();return i=(e-t)*i+t},s.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1},s.IsPowerOfTwo=function(t){return void 0===t&&(t=0),t>0&&0==(t&t-1)},i.postDefs.push(function(){i.Common.Math.b2Math.b2Vec2_zero=new r(0,0),i.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new r(1,0),new r(0,1)),i.Common.Math.b2Math.b2Transform_identity=new o(s.b2Vec2_zero,s.b2Mat22_identity)}),n.b2Sweep=function(){this.localCenter=new r,this.c0=new r,this.c=new r},n.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},n.prototype.Copy=function(){var t=new n;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},n.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y,t.R.Set((1-e)*this.a0+e*this.a);var i=t.R;t.position.x-=i.col1.x*this.localCenter.x+i.col2.x*this.localCenter.y,t.position.y-=i.col1.y*this.localCenter.x+i.col2.y*this.localCenter.y},n.prototype.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},o.b2Transform=function(){this.position=new r,this.R=new t},o.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},o.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},o.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},o.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},o.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},r.b2Vec2=function(){},r.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},r.prototype.SetZero=function(){this.y=this.x=0},r.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y},r.prototype.GetNegative=function(){return new r(-this.x,-this.y)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},r.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new r(t,e)},r.prototype.Copy=function(){return new r(this.x,this.y)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},r.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},r.prototype.MulTM=function(t){var e=s.Dot(this,t.col1);this.y=s.Dot(this,t.col2),this.x=e},r.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},r.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},r.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},r.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},r.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},r.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},r.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},r.prototype.IsValid=function(){return s.IsValid(this.x)&&s.IsValid(this.y)},a.b2Vec3=function(){},a.prototype.b2Vec3=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetZero=function(){this.x=this.y=this.z=0},a.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},a.prototype.GetNegative=function(){return new a(-this.x,-this.y,-this.z)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},a.prototype.Copy=function(){return new a(this.x,this.y,this.z)},a.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},a.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},a.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=i.Common.Math.b2Math,e=i.Common.Math.b2Sweep,o=i.Common.Math.b2Transform,r=i.Common.Math.b2Vec2,a=i.Common.b2Color,l=i.Common.b2Settings,c=i.Collision.b2AABB,h=i.Collision.b2ContactPoint,u=i.Collision.b2DynamicTreeBroadPhase,m=i.Collision.b2RayCastInput,_=i.Collision.b2RayCastOutput,p=i.Collision.Shapes.b2CircleShape,d=i.Collision.Shapes.b2EdgeShape,y=i.Collision.Shapes.b2MassData,f=i.Collision.Shapes.b2PolygonShape,x=i.Collision.Shapes.b2Shape,v=i.Dynamics.b2Body,g=i.Dynamics.b2BodyDef,b=i.Dynamics.b2ContactFilter,S=i.Dynamics.b2ContactImpulse,w=i.Dynamics.b2ContactListener,A=i.Dynamics.b2ContactManager,C=i.Dynamics.b2DebugDraw,M=i.Dynamics.b2DestructionListener,I=i.Dynamics.b2FilterData,D=i.Dynamics.b2Fixture,P=i.Dynamics.b2FixtureDef,L=i.Dynamics.b2Island,T=i.Dynamics.b2TimeStep,E=i.Dynamics.b2World,B=i.Dynamics.Contacts.b2Contact,j=i.Dynamics.Contacts.b2ContactFactory,R=i.Dynamics.Contacts.b2ContactSolver,V=i.Dynamics.Joints.b2Joint,G=i.Dynamics.Joints.b2PulleyJoint;v.b2Body=function(){this.m_xf=new o,this.m_sweep=new e,this.m_linearVelocity=new r,this.m_force=new r},v.prototype.connectEdges=function(e,i,s){void 0===s&&(s=0);var n=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x);s=t.MulFV(Math.tan(.5*(n-s)),i.GetDirectionVector()),s=t.SubtractVV(s,i.GetNormalVector()),s=t.MulFV(l.b2_toiSlop,s),s=t.AddVV(s,i.GetVertex1());var o=t.AddVV(e.GetDirectionVector(),i.GetDirectionVector());o.Normalize();var r=t.Dot(e.GetDirectionVector(),i.GetNormalVector())>0;return e.SetNextEdge(i,s,o,r),i.SetPrevEdge(e,s,o,r),n},v.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new D;return e.Create(this,this.m_xf,t),this.m_flags&v.e_activeFlag&&e.CreateProxy(this.m_world.m_contactManager.m_broadPhase,this.m_xf),e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=E.e_newFixture,e},v.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=new P;return i.shape=t,i.density=e,this.CreateFixture(i)},v.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var e=this.m_fixtureList,i=null;null!=e;){if(e==t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next;break}i=e,e=e.m_next}for(e=this.m_contactList;e;){i=e.contact,e=e.next;var s=i.GetFixtureA(),n=i.GetFixtureB();t!=s&&t!=n||this.m_world.m_contactManager.Destroy(i)}this.m_flags&v.e_activeFlag&&t.DestroyProxy(this.m_world.m_contactManager.m_broadPhase),t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},v.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var i;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t),i=this.m_xf.R;var s=this.m_sweep.localCenter;for(this.m_sweep.c.x=i.col1.x*s.x+i.col2.x*s.y,this.m_sweep.c.y=i.col1.y*s.x+i.col2.y*s.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e,s=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},v.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},v.prototype.GetTransform=function(){return this.m_xf},v.prototype.GetPosition=function(){return this.m_xf.position},v.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},v.prototype.GetAngle=function(){return this.m_sweep.a},v.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},v.prototype.GetWorldCenter=function(){return this.m_sweep.c},v.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.SetLinearVelocity=function(t){this.m_type!=v.b2_staticBody&&this.m_linearVelocity.SetV(t)},v.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},v.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=v.b2_staticBody&&(this.m_angularVelocity=t)},v.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},v.prototype.GetDefinition=function(){var t=new g;return t.type=this.GetType(),t.allowSleep=(this.m_flags&v.e_allowSleepFlag)==v.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&v.e_fixedRotationFlag)==v.e_fixedRotationFlag,t.bullet=(this.m_flags&v.e_bulletFlag)==v.e_bulletFlag,t.awake=(this.m_flags&v.e_awakeFlag)==v.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},v.prototype.ApplyForce=function(t,e){this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},v.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},v.prototype.ApplyImpulse=function(t,e){this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},v.prototype.Split=function(e){for(var i,s=this.GetLinearVelocity().Copy(),n=this.GetAngularVelocity(),o=this.GetWorldCenter(),r=this.m_world.CreateBody(this.GetDefinition()),a=this.m_fixtureList;a;)if(e(a)){var l=a.m_next;i?i.m_next=l:this.m_fixtureList=l,this.m_fixtureCount--,a.m_next=r.m_fixtureList,r.m_fixtureList=a,r.m_fixtureCount++,a.m_body=r,a=l}else i=a,a=a.m_next;return this.ResetMassData(),r.ResetMassData(),i=this.GetWorldCenter(),e=r.GetWorldCenter(),i=t.AddVV(s,t.CrossFV(n,t.SubtractVV(i,o))),s=t.AddVV(s,t.CrossFV(n,t.SubtractVV(e,o))),this.SetLinearVelocity(i),r.SetLinearVelocity(s),this.SetAngularVelocity(n),r.SetAngularVelocity(n),this.SynchronizeFixtures(),r.SynchronizeFixtures(),r},v.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var i=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=n,e=i}s.m_fixtureCount=0;var s=this,n=t;s.GetWorldCenter(),n.GetWorldCenter(),s.GetLinearVelocity().Copy(),n.GetLinearVelocity().Copy(),s.GetAngularVelocity(),n.GetAngularVelocity(),s.ResetMassData(),this.SynchronizeFixtures()},v.prototype.GetMass=function(){return this.m_mass},v.prototype.GetInertia=function(){return this.m_I},v.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},v.prototype.SetMassData=function(e){if(l.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==v.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&v.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},v.prototype.ResetMassData=function(){if(this.m_invI=this.m_I=this.m_invMass=this.m_mass=0,this.m_sweep.localCenter.SetZero(),this.m_type!=v.b2_staticBody&&this.m_type!=v.b2_kinematicBody){for(var e=r.Make(0,0),i=this.m_fixtureList;i;i=i.m_next)if(0!=i.m_density){var s=i.GetMassData();this.m_mass+=s.mass,e.x+=s.center.x*s.mass,e.y+=s.center.y*s.mass,this.m_I+=s.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):this.m_invMass=this.m_mass=1,this.m_I>0&&0==(this.m_flags&v.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,l.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0,i=this.m_sweep.c.Copy(),this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},v.prototype.GetWorldPoint=function(t){var e=this.m_xf.R;return t=new r(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y),t.x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,t},v.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},v.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},v.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},v.prototype.GetLinearVelocityFromWorldPoint=function(t){return new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},v.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R;return t=new r(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y),t.x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},v.prototype.GetLinearDamping=function(){return this.m_linearDamping},v.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},v.prototype.GetAngularDamping=function(){return this.m_angularDamping},v.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},v.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t)for(this.m_type=t,this.ResetMassData(),this.m_type==v.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0,t=this.m_contactList;t;t=t.next)t.contact.FlagForFiltering()},v.prototype.GetType=function(){return this.m_type},v.prototype.SetBullet=function(t){t?this.m_flags|=v.e_bulletFlag:this.m_flags&=~v.e_bulletFlag},v.prototype.IsBullet=function(){return(this.m_flags&v.e_bulletFlag)==v.e_bulletFlag},v.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=v.e_allowSleepFlag:(this.m_flags&=~v.e_allowSleepFlag,this.SetAwake(!0))},v.prototype.SetAwake=function(t){t?(this.m_flags|=v.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~v.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},v.prototype.IsAwake=function(){return(this.m_flags&v.e_awakeFlag)==v.e_awakeFlag},v.prototype.SetFixedRotation=function(t){t?this.m_flags|=v.e_fixedRotationFlag:this.m_flags&=~v.e_fixedRotationFlag,this.ResetMassData()},v.prototype.IsFixedRotation=function(){return(this.m_flags&v.e_fixedRotationFlag)==v.e_fixedRotationFlag},v.prototype.SetActive=function(t){if(t!=this.IsActive()){var e;if(t)for(this.m_flags|=v.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.CreateProxy(t,this.m_xf);else{for(this.m_flags&=~v.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.DestroyProxy(t);for(t=this.m_contactList;t;)e=t,t=t.next,this.m_world.m_contactManager.Destroy(e.contact);this.m_contactList=null}}},v.prototype.IsActive=function(){return(this.m_flags&v.e_activeFlag)==v.e_activeFlag},v.prototype.IsSleepingAllowed=function(){return(this.m_flags&v.e_allowSleepFlag)==v.e_allowSleepFlag},v.prototype.GetFixtureList=function(){return this.m_fixtureList},v.prototype.GetJointList=function(){return this.m_jointList},v.prototype.GetControllerList=function(){return this.m_controllerList},v.prototype.GetContactList=function(){return this.m_contactList},v.prototype.GetNext=function(){return this.m_next},v.prototype.GetUserData=function(){return this.m_userData},v.prototype.SetUserData=function(t){this.m_userData=t},v.prototype.GetWorld=function(){return this.m_world},v.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=v.e_bulletFlag),t.fixedRotation&&(this.m_flags|=v.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=v.e_allowSleepFlag),t.awake&&(this.m_flags|=v.e_awakeFlag),t.active&&(this.m_flags|=v.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,s=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*s.x+i.col2.x*s.y,this.m_sweep.c.y=i.col1.y*s.x+i.col2.y*s.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_contactList=this.m_controllerList=this.m_jointList=null,this.m_controllerCount=0,this.m_next=this.m_prev=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_sleepTime=this.m_torque=0,this.m_type=t.type,this.m_type==v.b2_dynamicBody?this.m_invMass=this.m_mass=1:this.m_invMass=this.m_mass=0,this.m_invI=this.m_I=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},v.prototype.SynchronizeFixtures=function(){var t=v.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;for(t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y),i=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.Synchronize(i,t,this.m_xf)},v.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},v.prototype.ShouldCollide=function(t){if(this.m_type!=v.b2_dynamicBody&&t.m_type!=v.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},i.postDefs.push(function(){i.Dynamics.b2Body.s_xf1=new o,i.Dynamics.b2Body.e_islandFlag=1,i.Dynamics.b2Body.e_awakeFlag=2,i.Dynamics.b2Body.e_allowSleepFlag=4,i.Dynamics.b2Body.e_bulletFlag=8,i.Dynamics.b2Body.e_fixedRotationFlag=16,i.Dynamics.b2Body.e_activeFlag=32,i.Dynamics.b2Body.b2_staticBody=0,i.Dynamics.b2Body.b2_kinematicBody=1,i.Dynamics.b2Body.b2_dynamicBody=2}),g.b2BodyDef=function(){this.position=new r,this.linearVelocity=new r},g.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularDamping=this.linearDamping=this.angularVelocity=0,this.awake=this.allowSleep=!0,this.bullet=this.fixedRotation=!1,this.type=v.b2_staticBody,this.active=!0,this.inertiaScale=1},b.b2ContactFilter=function(){},b.prototype.ShouldCollide=function(t,e){var i=t.GetFilterData(),s=e.GetFilterData();return i.groupIndex==s.groupIndex&&0!=i.groupIndex?i.groupIndex>0:0!=(i.maskBits&s.categoryBits)&&0!=(i.categoryBits&s.maskBits)},b.prototype.RayCollide=function(t,e){return!t||this.ShouldCollide(t instanceof D?t:null,e)},i.postDefs.push(function(){i.Dynamics.b2ContactFilter.b2_defaultFilter=new b}),S.b2ContactImpulse=function(){this.normalImpulses=new n(l.b2_maxManifoldPoints),this.tangentImpulses=new n(l.b2_maxManifoldPoints)},w.b2ContactListener=function(){},w.prototype.BeginContact=function(){},w.prototype.EndContact=function(){},w.prototype.PreSolve=function(){},w.prototype.PostSolve=function(){},i.postDefs.push(function(){i.Dynamics.b2ContactListener.b2_defaultListener=new w}),A.b2ContactManager=function(){},A.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=b.b2_defaultFilter,this.m_contactListener=w.b2_defaultListener,this.m_contactFactory=new j(this.m_allocator),this.m_broadPhase=new u},A.prototype.AddPair=function(t,e){var i=t instanceof D?t:null,s=e instanceof D?e:null,n=i.GetBody(),o=s.GetBody();if(n!=o){for(var r=o.GetContactList();r;){if(r.other==n){var a=r.contact.GetFixtureA(),l=r.contact.GetFixtureB();if(a==i&&l==s)return;if(a==s&&l==i)return}r=r.next}0!=o.ShouldCollide(n)&&0!=this.m_contactFilter.ShouldCollide(i,s)&&(r=this.m_contactFactory.Create(i,s),i=r.GetFixtureA(),s=r.GetFixtureB(),n=i.m_body,o=s.m_body,r.m_prev=null,r.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=r),this.m_world.m_contactList=r,r.m_nodeA.contact=r,r.m_nodeA.other=o,r.m_nodeA.prev=null,r.m_nodeA.next=n.m_contactList,null!=n.m_contactList&&(n.m_contactList.prev=r.m_nodeA),n.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=n,r.m_nodeB.prev=null,r.m_nodeB.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=r.m_nodeB),o.m_contactList=r.m_nodeB,++this.m_world.m_contactCount)}},A.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(i.generateCallback(this,this.AddPair))},A.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB();e=e.GetBody(),i=i.GetBody(),t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==e.m_contactList&&(e.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==i.m_contactList&&(i.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},A.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),i=t.GetFixtureB(),s=e.GetBody(),n=i.GetBody();if(0==s.IsAwake()&&0==n.IsAwake())t=t.GetNext();else{if(t.m_flags&B.e_filterFlag){if(0==n.ShouldCollide(s)){e=t,t=e.GetNext(),this.Destroy(e);continue}if(0==this.m_contactFilter.ShouldCollide(e,i)){e=t,t=e.GetNext(),this.Destroy(e);continue}t.m_flags&=~B.e_filterFlag}0==this.m_broadPhase.TestOverlap(e.m_proxy,i.m_proxy)?(e=t,t=e.GetNext(),this.Destroy(e)):(t.Update(this.m_contactListener),t=t.GetNext())}}},i.postDefs.push(function(){i.Dynamics.b2ContactManager.s_evalCP=new h}),C.b2DebugDraw=function(){},C.prototype.b2DebugDraw=function(){},C.prototype.SetFlags=function(){},C.prototype.GetFlags=function(){},C.prototype.AppendFlags=function(){},C.prototype.ClearFlags=function(){},C.prototype.SetSprite=function(){},C.prototype.GetSprite=function(){},C.prototype.SetDrawScale=function(){},C.prototype.GetDrawScale=function(){},C.prototype.SetLineThickness=function(){},C.prototype.GetLineThickness=function(){},C.prototype.SetAlpha=function(){},C.prototype.GetAlpha=function(){},C.prototype.SetFillAlpha=function(){},C.prototype.GetFillAlpha=function(){},C.prototype.SetXFormScale=function(){},C.prototype.GetXFormScale=function(){},C.prototype.DrawPolygon=function(){},C.prototype.DrawSolidPolygon=function(){},C.prototype.DrawCircle=function(){},C.prototype.DrawSolidCircle=function(){},C.prototype.DrawSegment=function(){},C.prototype.DrawTransform=function(){},i.postDefs.push(function(){i.Dynamics.b2DebugDraw.e_shapeBit=1,i.Dynamics.b2DebugDraw.e_jointBit=2,i.Dynamics.b2DebugDraw.e_aabbBit=4,i.Dynamics.b2DebugDraw.e_pairBit=8,i.Dynamics.b2DebugDraw.e_centerOfMassBit=16,i.Dynamics.b2DebugDraw.e_controllerBit=32}),M.b2DestructionListener=function(){},M.prototype.SayGoodbyeJoint=function(){},M.prototype.SayGoodbyeFixture=function(){},I.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},I.prototype.Copy=function(){var t=new I;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},D.b2Fixture=function(){this.m_filter=new I},D.prototype.GetType=function(){return this.m_shape.GetType()},D.prototype.GetShape=function(){return this.m_shape},D.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(t=this.m_body.GetContactList();t;){var e=t.contact,i=e.GetFixtureA(),s=e.GetFixtureB();i!=this&&s!=this||e.SetSensor(i.IsSensor()||s.IsSensor()),t=t.next}},D.prototype.IsSensor=function(){return this.m_isSensor},D.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(t=this.m_body.GetContactList();t;){var e=t.contact,i=e.GetFixtureA(),s=e.GetFixtureB();i!=this&&s!=this||e.FlagForFiltering(),t=t.next}},D.prototype.GetFilterData=function(){return this.m_filter.Copy()},D.prototype.GetBody=function(){return this.m_body},D.prototype.GetNext=function(){return this.m_next},D.prototype.GetUserData=function(){return this.m_userData},D.prototype.SetUserData=function(t){this.m_userData=t},D.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},D.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},D.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new y),this.m_shape.ComputeMass(t,this.m_density),t},D.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},D.prototype.GetDensity=function(){return this.m_density},D.prototype.GetFriction=function(){return this.m_friction},D.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},D.prototype.GetRestitution=function(){return this.m_restitution},D.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},D.prototype.GetAABB=function(){return this.m_aabb},D.prototype.b2Fixture=function(){this.m_aabb=new c,this.m_shape=this.m_next=this.m_body=this.m_userData=null,this.m_restitution=this.m_friction=this.m_density=0},D.prototype.Create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.Copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.Copy(),this.m_density=i.density},D.prototype.Destroy=function(){this.m_shape=null},D.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},D.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},D.prototype.Synchronize=function(e,i,s){if(this.m_proxy){var n=new c,o=new c;this.m_shape.ComputeAABB(n,i),this.m_shape.ComputeAABB(o,s),this.m_aabb.Combine(n,o),i=t.SubtractVV(s.position,i.position),e.MoveProxy(this.m_proxy,this.m_aabb,i)}},P.b2FixtureDef=function(){this.filter=new I},P.prototype.b2FixtureDef=function(){this.userData=this.shape=null,this.friction=.2,this.density=this.restitution=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},L.b2Island=function(){},L.prototype.b2Island=function(){this.m_bodies=new s,this.m_contacts=new s,this.m_joints=new s},L.prototype.Initialize=function(t,e,i,s,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,this.m_allocator=s,this.m_listener=n,this.m_contactSolver=o,r=this.m_bodies.length;r<t;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;r<e;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;r<i;r++)this.m_joints[r]=null},L.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},L.prototype.Solve=function(e,i,s){var n,o=0,r=0;for(o=0;o<this.m_bodyCount;++o)r=this.m_bodies[o],r.GetType()==v.b2_dynamicBody&&(r.m_linearVelocity.x+=e.dt*(i.x+r.m_invMass*r.m_force.x),r.m_linearVelocity.y+=e.dt*(i.y+r.m_invMass*r.m_force.y),r.m_angularVelocity+=e.dt*r.m_invI*r.m_torque,r.m_linearVelocity.Multiply(t.Clamp(1-e.dt*r.m_linearDamping,0,1)),r.m_angularVelocity*=t.Clamp(1-e.dt*r.m_angularDamping,0,1));for(this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator),i=this.m_contactSolver,i.InitVelocityConstraints(e),o=0;o<this.m_jointCount;++o)n=this.m_joints[o],n.InitVelocityConstraints(e);for(o=0;o<e.velocityIterations;++o){for(r=0;r<this.m_jointCount;++r)n=this.m_joints[r],n.SolveVelocityConstraints(e);i.SolveVelocityConstraints()}for(o=0;o<this.m_jointCount;++o)n=this.m_joints[o],n.FinalizeVelocityConstraints();for(i.FinalizeVelocityConstraints(),o=0;o<this.m_bodyCount;++o)if(r=this.m_bodies[o],r.GetType()!=v.b2_staticBody){var a=e.dt*r.m_linearVelocity.x,c=e.dt*r.m_linearVelocity.y;a*a+c*c>l.b2_maxTranslationSquared&&(r.m_linearVelocity.Normalize(),r.m_linearVelocity.x*=l.b2_maxTranslation*e.inv_dt,r.m_linearVelocity.y*=l.b2_maxTranslation*e.inv_dt),a=e.dt*r.m_angularVelocity,a*a>l.b2_maxRotationSquared&&(r.m_angularVelocity=r.m_angularVelocity<0?-l.b2_maxRotation*e.inv_dt:l.b2_maxRotation*e.inv_dt),r.m_sweep.c0.SetV(r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.m_sweep.c.x+=e.dt*r.m_linearVelocity.x,r.m_sweep.c.y+=e.dt*r.m_linearVelocity.y,r.m_sweep.a+=e.dt*r.m_angularVelocity,r.SynchronizeTransform()}for(o=0;o<e.positionIterations;++o){for(a=i.SolvePositionConstraints(l.b2_contactBaumgarte),c=!0,r=0;r<this.m_jointCount;++r)n=this.m_joints[r],n=n.SolvePositionConstraints(l.b2_contactBaumgarte),c=c&&n;if(a&&c)break}if(this.Report(i.m_constraints),s){for(s=Number.MAX_VALUE,i=l.b2_linearSleepTolerance*l.b2_linearSleepTolerance,a=l.b2_angularSleepTolerance*l.b2_angularSleepTolerance,o=0;o<this.m_bodyCount;++o)r=this.m_bodies[o],r.GetType()!=v.b2_staticBody&&(0==(r.m_flags&v.e_allowSleepFlag)&&(s=r.m_sleepTime=0),0==(r.m_flags&v.e_allowSleepFlag)||r.m_angularVelocity*r.m_angularVelocity>a||t.Dot(r.m_linearVelocity,r.m_linearVelocity)>i?s=r.m_sleepTime=0:(r.m_sleepTime+=e.dt,s=t.Min(s,r.m_sleepTime)));if(s>=l.b2_timeToSleep)for(o=0;o<this.m_bodyCount;++o)r=this.m_bodies[o],r.SetAwake(!1)}},L.prototype.SolveTOI=function(t){var e=0,i=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var s=this.m_contactSolver;for(e=0;e<this.m_jointCount;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;e<t.velocityIterations;++e)for(s.SolveVelocityConstraints(),i=0;i<this.m_jointCount;++i)this.m_joints[i].SolveVelocityConstraints(t);for(e=0;e<this.m_bodyCount;++e)if(i=this.m_bodies[e],i.GetType()!=v.b2_staticBody){var n=t.dt*i.m_linearVelocity.x,o=t.dt*i.m_linearVelocity.y;n*n+o*o>l.b2_maxTranslationSquared&&(i.m_linearVelocity.Normalize(),i.m_linearVelocity.x*=l.b2_maxTranslation*t.inv_dt,i.m_linearVelocity.y*=l.b2_maxTranslation*t.inv_dt),n=t.dt*i.m_angularVelocity,n*n>l.b2_maxRotationSquared&&(i.m_angularVelocity=i.m_angularVelocity<0?-l.b2_maxRotation*t.inv_dt:l.b2_maxRotation*t.inv_dt),i.m_sweep.c0.SetV(i.m_sweep.c),i.m_sweep.a0=i.m_sweep.a,i.m_sweep.c.x+=t.dt*i.m_linearVelocity.x,i.m_sweep.c.y+=t.dt*i.m_linearVelocity.y,i.m_sweep.a+=t.dt*i.m_angularVelocity,i.SynchronizeTransform()}for(e=0;e<t.positionIterations;++e){for(n=s.SolvePositionConstraints(.75),o=!0,i=0;i<this.m_jointCount;++i){var r=this.m_joints[i].SolvePositionConstraints(l.b2_contactBaumgarte);o=o&&r}if(n&&o)break}this.Report(s.m_constraints)},L.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;e<this.m_contactCount;++e){for(var i=this.m_contacts[e],s=t[e],n=0;n<s.pointCount;++n)L.s_impulse.normalImpulses[n]=s.points[n].normalImpulse,L.s_impulse.tangentImpulses[n]=s.points[n].tangentImpulse;this.m_listener.PostSolve(i,L.s_impulse)}},L.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},L.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},L.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},i.postDefs.push(function(){i.Dynamics.b2Island.s_impulse=new S}),T.b2TimeStep=function(){},T.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},E.b2World=function(){this.s_stack=new s,this.m_contactManager=new A,this.m_contactSolver=new R,this.m_island=new L},E.prototype.b2World=function(t,e){this.m_controllerList=this.m_jointList=this.m_contactList=this.m_bodyList=this.m_debugDraw=this.m_destructionListener=null,this.m_controllerCount=this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,E.m_warmStarting=!0,E.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this,this.m_groundBody=this.CreateBody(new g)},E.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},E.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},E.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},E.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},E.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var s=i.m_fixtureList;s;s=s.m_next)s.m_proxy=t.CreateProxy(e.GetFatAABB(s.m_proxy),s)},E.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},E.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},E.prototype.CreateBody=function(t){return 1==this.IsLocked()?null:(t=new v(t,this),t.m_prev=null,(t.m_next=this.m_bodyList)&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t)},E.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint)}for(e=t.m_controllerList;e;)i=e,e=e.nextController,i.controller.RemoveBody(t);for(e=t.m_contactList;e;)i=e,e=e.next,this.m_contactManager.Destroy(i.contact);for(t.m_contactList=null,e=t.m_fixtureList;e;)i=e,e=e.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(i),i.DestroyProxy(this.m_contactManager.m_broadPhase),i.Destroy();t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},E.prototype.CreateJoint=function(t){var e=V.Create(t,null);e.m_prev=null,(e.m_next=this.m_jointList)&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,(e.m_edgeA.next=e.m_bodyA.m_jointList)&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,(e.m_edgeB.next=e.m_bodyB.m_jointList)&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,s=t.bodyB;if(0==t.collideConnected)for(t=s.GetContactList();t;)t.other==i&&t.contact.FlagForFiltering(),t=t.next;return e},E.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,s=t.m_bodyB;if(i.SetAwake(!0),s.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==s.m_jointList&&(s.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,V.Destroy(t,null),--this.m_jointCount,0==e)for(t=s.GetContactList();t;)t.other==i&&t.contact.FlagForFiltering(),t=t.next},E.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},E.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},E.prototype.CreateController=function(t){if(t.m_world!=this)throw Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},E.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},E.prototype.SetWarmStarting=function(t){E.m_warmStarting=t},E.prototype.SetContinuousPhysics=function(t){E.m_continuousPhysics=t},E.prototype.GetBodyCount=function(){return this.m_bodyCount},E.prototype.GetJointCount=function(){return this.m_jointCount},E.prototype.GetContactCount=function(){return this.m_contactCount},E.prototype.SetGravity=function(t){this.m_gravity=t},E.prototype.GetGravity=function(){return this.m_gravity},E.prototype.GetGroundBody=function(){return this.m_groundBody},E.prototype.Step=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.m_flags&E.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~E.e_newFixture),this.m_flags|=E.e_locked;var s=E.s_timestep2;s.dt=t,s.velocityIterations=e,s.positionIterations=i,s.inv_dt=t>0?1/t:0,s.dtRatio=this.m_inv_dt0*t,s.warmStarting=E.m_warmStarting,this.m_contactManager.Collide(),s.dt>0&&this.Solve(s),E.m_continuousPhysics&&s.dt>0&&this.SolveTOI(s),s.dt>0&&(this.m_inv_dt0=s.inv_dt),this.m_flags&=~E.e_locked},E.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},E.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,i,s=this.m_debugDraw.GetFlags();new r,new r,new r;var n;new c,new c,n=[new r,new r,new r,new r];var o=new a(0,0,0);if(s&C.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(n=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)i=e.GetShape(),0==t.IsActive()?o.Set(.5,.5,.3):t.GetType()==v.b2_staticBody?o.Set(.5,.9,.5):t.GetType()==v.b2_kinematicBody?o.Set(.5,.5,.9):0==t.IsAwake()?o.Set(.6,.6,.6):o.Set(.9,.7,.7),this.DrawShape(i,n,o);if(s&C.e_jointBit)for(t=this.m_jointList;t;t=t.m_next)this.DrawJoint(t);if(s&C.e_controllerBit)for(t=this.m_controllerList;t;t=t.m_next)t.Draw(this.m_debugDraw);if(s&C.e_pairBit)for(o.Set(.3,.9,.9),t=this.m_contactManager.m_contactList;t;t=t.GetNext())i=t.GetFixtureA(),e=t.GetFixtureB(),i=i.GetAABB().GetCenter(),e=e.GetAABB().GetCenter(),this.m_debugDraw.DrawSegment(i,e,o);if(s&C.e_aabbBit)for(i=this.m_contactManager.m_broadPhase,n=[new r,new r,new r,new r],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var l=i.GetFatAABB(e.m_proxy);n[0].Set(l.lowerBound.x,l.lowerBound.y),n[1].Set(l.upperBound.x,l.lowerBound.y),n[2].Set(l.upperBound.x,l.upperBound.y),n[3].Set(l.lowerBound.x,l.upperBound.y),this.m_debugDraw.DrawPolygon(n,4,o)}if(s&C.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)n=E.s_xf,n.R=t.m_xf.R,n.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(n)}},E.prototype.QueryAABB=function(t,e){var i=this.m_contactManager.m_broadPhase;i.Query(function(e){return t(i.GetUserData(e))},e)},E.prototype.QueryShape=function(t,e,i){void 0===i&&(i=null),null==i&&(i=new o,i.SetIdentity());var s=this.m_contactManager.m_broadPhase,n=new c;e.ComputeAABB(n,i),s.Query(function(n){return n=s.GetUserData(n)instanceof D?s.GetUserData(n):null,!x.TestOverlap(e,i,n.GetShape(),n.GetBody().GetTransform())||t(n)},n)},E.prototype.QueryPoint=function(t,e){var i=this.m_contactManager.m_broadPhase,s=new c;s.lowerBound.Set(e.x-l.b2_linearSlop,e.y-l.b2_linearSlop),s.upperBound.Set(e.x+l.b2_linearSlop,e.y+l.b2_linearSlop),i.Query(function(s){return s=i.GetUserData(s)instanceof D?i.GetUserData(s):null,!s.TestPoint(e)||t(s)},s)},E.prototype.RayCast=function(t,e,i){var s=this.m_contactManager.m_broadPhase,n=new _,o=new m(e,i);s.RayCast(function(o,a){var l=s.GetUserData(a);if(l=l instanceof D?l:null,l.RayCast(n,o)){var c=n.fraction,h=new r((1-c)*e.x+c*i.x,(1-c)*e.y+c*i.y);return t(l,h,n.normal,c)}return o.maxFraction},o)},E.prototype.RayCastOne=function(t,e){var i;return this.RayCast(function(t,e,s,n){return void 0===n&&(n=0),i=t,n},t,e),i},E.prototype.RayCastAll=function(t,e){var i=new s;return this.RayCast(function(t){return i[i.length]=t,1},t,e),i},E.prototype.GetBodyList=function(){return this.m_bodyList},E.prototype.GetJointList=function(){return this.m_jointList},E.prototype.GetContactList=function(){return this.m_contactList},E.prototype.IsLocked=function(){return(this.m_flags&E.e_locked)>0},E.prototype.Solve=function(t){for(var e,i=this.m_controllerList;i;i=i.m_next)i.Step(t);for(i=this.m_island,i.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~v.e_islandFlag;for(var s=this.m_contactList;s;s=s.m_next)s.m_flags&=~B.e_islandFlag;for(s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;parseInt(this.m_bodyCount),s=this.s_stack;for(var n=this.m_bodyList;n;n=n.m_next)if(!(n.m_flags&v.e_islandFlag)&&0!=n.IsAwake()&&0!=n.IsActive()&&n.GetType()!=v.b2_staticBody){i.Clear();var o=0;for(s[o++]=n,n.m_flags|=v.e_islandFlag;o>0;)if(e=s[--o],i.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=v.b2_staticBody){for(var r,a=e.m_contactList;a;a=a.next)a.contact.m_flags&B.e_islandFlag||1!=a.contact.IsSensor()&&0!=a.contact.IsEnabled()&&0!=a.contact.IsTouching()&&(i.AddContact(a.contact),a.contact.m_flags|=B.e_islandFlag,r=a.other,r.m_flags&v.e_islandFlag||(s[o++]=r,r.m_flags|=v.e_islandFlag));for(e=e.m_jointList;e;e=e.next)1!=e.joint.m_islandFlag&&(r=e.other,0!=r.IsActive()&&(i.AddJoint(e.joint),e.joint.m_islandFlag=!0,r.m_flags&v.e_islandFlag||(s[o++]=r,r.m_flags|=v.e_islandFlag)))}for(i.Solve(t,this.m_gravity,this.m_allowSleep),o=0;o<i.m_bodyCount;++o)e=i.m_bodies[o],e.GetType()==v.b2_staticBody&&(e.m_flags&=~v.e_islandFlag)}for(o=0;o<s.length&&s[o];++o)s[o]=null;for(e=this.m_bodyList;e;e=e.m_next)0==e.IsAwake()||0==e.IsActive()||e.GetType()!=v.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},E.prototype.SolveTOI=function(t){var e,i,s,n=this.m_island;n.Initialize(this.m_bodyCount,l.b2_maxTOIContactsPerIsland,l.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var o=E.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~v.e_islandFlag,e.m_sweep.t0=0;for(s=this.m_contactList;s;s=s.m_next)s.m_flags&=~(B.e_toiFlag|B.e_islandFlag);for(s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;for(;;){var r=null,a=1;for(s=this.m_contactList;s;s=s.m_next)if(1!=s.IsSensor()&&0!=s.IsEnabled()&&0!=s.IsContinuous()){if(e=1,s.m_flags&B.e_toiFlag)e=s.m_toi;else{if(e=s.m_fixtureA,i=s.m_fixtureB,e=e.m_body,i=i.m_body,!(e.GetType()==v.b2_dynamicBody&&0!=e.IsAwake()||i.GetType()==v.b2_dynamicBody&&0!=i.IsAwake()))continue;var c=e.m_sweep.t0;e.m_sweep.t0<i.m_sweep.t0?(c=i.m_sweep.t0,e.m_sweep.Advance(c)):i.m_sweep.t0<e.m_sweep.t0&&(c=e.m_sweep.t0,i.m_sweep.Advance(c)),e=s.ComputeTOI(e.m_sweep,i.m_sweep),l.b2Assert(0<=e&&e<=1),e>0&&e<1&&(e=(1-e)*c+e)>1&&(e=1),s.m_toi=e,s.m_flags|=B.e_toiFlag}Number.MIN_VALUE<e&&e<a&&(r=s,a=e)}if(null==r||1-100*Number.MIN_VALUE<a)break;if(e=r.m_fixtureA,i=r.m_fixtureB,e=e.m_body,i=i.m_body,E.s_backupA.Set(e.m_sweep),E.s_backupB.Set(i.m_sweep),e.Advance(a),i.Advance(a),r.Update(this.m_contactManager.m_contactListener),r.m_flags&=~B.e_toiFlag,1==r.IsSensor()||0==r.IsEnabled())e.m_sweep.Set(E.s_backupA),i.m_sweep.Set(E.s_backupB),e.SynchronizeTransform(),i.SynchronizeTransform();else if(0!=r.IsTouching()){for(e=e,e.GetType()!=v.b2_dynamicBody&&(e=i),n.Clear(),r=s=0,o[s+r++]=e,e.m_flags|=v.e_islandFlag;r>0;)if(e=o[s++],--r,n.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==v.b2_dynamicBody){for(i=e.m_contactList;i&&n.m_contactCount!=n.m_contactCapacity;i=i.next)i.contact.m_flags&B.e_islandFlag||1!=i.contact.IsSensor()&&0!=i.contact.IsEnabled()&&0!=i.contact.IsTouching()&&(n.AddContact(i.contact),i.contact.m_flags|=B.e_islandFlag,c=i.other,c.m_flags&v.e_islandFlag||(c.GetType()!=v.b2_staticBody&&(c.Advance(a),c.SetAwake(!0)),o[s+r]=c,++r,c.m_flags|=v.e_islandFlag));for(e=e.m_jointList;e;e=e.next)n.m_jointCount!=n.m_jointCapacity&&1!=e.joint.m_islandFlag&&(c=e.other,0!=c.IsActive()&&(n.AddJoint(e.joint),e.joint.m_islandFlag=!0,c.m_flags&v.e_islandFlag||(c.GetType()!=v.b2_staticBody&&(c.Advance(a),c.SetAwake(!0)),o[s+r]=c,++r,c.m_flags|=v.e_islandFlag)))}for(s=E.s_timestep,s.warmStarting=!1,s.dt=(1-a)*t.dt,s.inv_dt=1/s.dt,s.dtRatio=0,s.velocityIterations=t.velocityIterations,s.positionIterations=t.positionIterations,n.SolveTOI(s),a=a=0;a<n.m_bodyCount;++a)if(e=n.m_bodies[a],e.m_flags&=~v.e_islandFlag,0!=e.IsAwake()&&e.GetType()==v.b2_dynamicBody)for(e.SynchronizeFixtures(),i=e.m_contactList;i;i=i.next)i.contact.m_flags&=~B.e_toiFlag;for(a=0;a<n.m_contactCount;++a)s=n.m_contacts[a],s.m_flags&=~(B.e_toiFlag|B.e_islandFlag);for(a=0;a<n.m_jointCount;++a)s=n.m_joints[a],s.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}},E.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),s=e.m_xf.position,n=i.m_xf.position,o=t.GetAnchorA(),r=t.GetAnchorB(),a=E.s_jointColor;switch(t.m_type){case V.e_distanceJoint:this.m_debugDraw.DrawSegment(o,r,a);break;case V.e_pulleyJoint:e=t instanceof G?t:null,t=e.GetGroundAnchorA(),e=e.GetGroundAnchorB(),this.m_debugDraw.DrawSegment(t,o,a),this.m_debugDraw.DrawSegment(e,r,a),this.m_debugDraw.DrawSegment(t,e,a);break;case V.e_mouseJoint:this.m_debugDraw.DrawSegment(o,r,a);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,o,a),this.m_debugDraw.DrawSegment(o,r,a),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(n,r,a)}},E.prototype.DrawShape=function(e,i,n){switch(e.m_type){case x.e_circleShape:var o=e instanceof p?e:null;this.m_debugDraw.DrawSolidCircle(t.MulX(i,o.m_p),o.m_radius,i.R.col1,n);break;case x.e_polygonShape:o=0,o=e instanceof f?e:null,e=parseInt(o.GetVertexCount());var r=o.GetVertices(),a=new s(e);for(o=0;o<e;++o)a[o]=t.MulX(i,r[o]);this.m_debugDraw.DrawSolidPolygon(a,e,n);break;case x.e_edgeShape:o=e instanceof d?e:null,this.m_debugDraw.DrawSegment(t.MulX(i,o.GetVertex1()),t.MulX(i,o.GetVertex2()),n)}},i.postDefs.push(function(){i.Dynamics.b2World.s_timestep2=new T,i.Dynamics.b2World.s_xf=new o,i.Dynamics.b2World.s_backupA=new e,i.Dynamics.b2World.s_backupB=new e,i.Dynamics.b2World.s_timestep=new T,i.Dynamics.b2World.s_queue=new s,i.Dynamics.b2World.s_jointColor=new a(.5,.8,.8),i.Dynamics.b2World.e_newFixture=1,i.Dynamics.b2World.e_locked=2})}(),function(){var t=i.Collision.Shapes.b2CircleShape,e=i.Collision.Shapes.b2EdgeShape,o=i.Collision.Shapes.b2PolygonShape,r=i.Collision.Shapes.b2Shape,a=i.Dynamics.Contacts.b2CircleContact,l=i.Dynamics.Contacts.b2Contact,c=i.Dynamics.Contacts.b2ContactConstraint,h=i.Dynamics.Contacts.b2ContactConstraintPoint,u=i.Dynamics.Contacts.b2ContactEdge,m=i.Dynamics.Contacts.b2ContactFactory,_=i.Dynamics.Contacts.b2ContactRegister,p=i.Dynamics.Contacts.b2ContactResult,d=i.Dynamics.Contacts.b2ContactSolver,y=i.Dynamics.Contacts.b2EdgeAndCircleContact,f=i.Dynamics.Contacts.b2NullContact,x=i.Dynamics.Contacts.b2PolyAndCircleContact,v=i.Dynamics.Contacts.b2PolyAndEdgeContact,g=i.Dynamics.Contacts.b2PolygonContact,b=i.Dynamics.Contacts.b2PositionSolverManifold,S=i.Dynamics.b2Body,w=i.Dynamics.b2TimeStep,A=i.Common.b2Settings,C=i.Common.Math.b2Mat22,M=i.Common.Math.b2Math,I=i.Common.Math.b2Vec2,D=i.Collision.b2Collision,P=i.Collision.b2ContactID,L=i.Collision.b2Manifold,T=i.Collision.b2TimeOfImpact,E=i.Collision.b2TOIInput,B=i.Collision.b2WorldManifold;i.inherit(a,i.Dynamics.Contacts.b2Contact),a.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,a.b2CircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},a.Create=function(){return new a},a.Destroy=function(){},a.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},a.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();D.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},l.b2Contact=function(){this.m_nodeA=new u,this.m_nodeB=new u,this.m_manifold=new L,this.m_oldManifold=new L},l.prototype.GetManifold=function(){return this.m_manifold},l.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),s=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),s.m_radius,i.GetTransform(),n.m_radius)},l.prototype.IsTouching=function(){return(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag},l.prototype.IsContinuous=function(){return(this.m_flags&l.e_continuousFlag)==l.e_continuousFlag},l.prototype.SetSensor=function(t){t?this.m_flags|=l.e_sensorFlag:this.m_flags&=~l.e_sensorFlag},l.prototype.IsSensor=function(){return(this.m_flags&l.e_sensorFlag)==l.e_sensorFlag},l.prototype.SetEnabled=function(t){t?this.m_flags|=l.e_enabledFlag:this.m_flags&=~l.e_enabledFlag},l.prototype.IsEnabled=function(){return(this.m_flags&l.e_enabledFlag)==l.e_enabledFlag},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetFixtureA=function(){return this.m_fixtureA},l.prototype.GetFixtureB=function(){return this.m_fixtureB},l.prototype.FlagForFiltering=function(){this.m_flags|=l.e_filterFlag},l.prototype.b2Contact=function(){},l.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=l.e_enabledFlag,t&&e){(t.IsSensor()||e.IsSensor())&&(this.m_flags|=l.e_sensorFlag);var i=t.GetBody(),s=e.GetBody();(i.GetType()!=S.b2_dynamicBody||i.IsBullet()||s.GetType()!=S.b2_dynamicBody||s.IsBullet())&&(this.m_flags|=l.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_next=this.m_prev=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null}else this.m_fixtureB=this.m_fixtureA=null},l.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=l.e_enabledFlag;var i=!1;e=(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag;var s=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body,o=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&l.e_sensorFlag)o&&(i=this.m_fixtureA.GetShape(),o=this.m_fixtureB.GetShape(),s=s.GetTransform(),n=n.GetTransform(),i=r.TestOverlap(i,s,o,n)),this.m_manifold.m_pointCount=0;else{if(s.GetType()!=S.b2_dynamicBody||s.IsBullet()||n.GetType()!=S.b2_dynamicBody||n.IsBullet()?this.m_flags|=l.e_continuousFlag:this.m_flags&=~l.e_continuousFlag,o)for(this.Evaluate(),i=this.m_manifold.m_pointCount>0,o=0;o<this.m_manifold.m_pointCount;++o){var a=this.m_manifold.m_points[o];a.m_normalImpulse=0,a.m_tangentImpulse=0;for(var c=a.m_id,h=0;h<this.m_oldManifold.m_pointCount;++h){var u=this.m_oldManifold.m_points[h];if(u.m_id.key==c.key){a.m_normalImpulse=u.m_normalImpulse,a.m_tangentImpulse=u.m_tangentImpulse;break}}}else this.m_manifold.m_pointCount=0;i!=e&&(s.SetAwake(!0),n.SetAwake(!0))}i?this.m_flags|=l.e_touchingFlag:this.m_flags&=~l.e_touchingFlag,0==e&&1==i&&t.BeginContact(this),1==e&&0==i&&t.EndContact(this),0==(this.m_flags&l.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},l.prototype.Evaluate=function(){},l.prototype.ComputeTOI=function(t,e){return l.s_input.proxyA.Set(this.m_fixtureA.GetShape()),l.s_input.proxyB.Set(this.m_fixtureB.GetShape()),l.s_input.sweepA=t,l.s_input.sweepB=e,l.s_input.tolerance=A.b2_linearSlop,T.TimeOfImpact(l.s_input)},i.postDefs.push(function(){i.Dynamics.Contacts.b2Contact.e_sensorFlag=1,i.Dynamics.Contacts.b2Contact.e_continuousFlag=2,i.Dynamics.Contacts.b2Contact.e_islandFlag=4,i.Dynamics.Contacts.b2Contact.e_toiFlag=8,i.Dynamics.Contacts.b2Contact.e_touchingFlag=16,i.Dynamics.Contacts.b2Contact.e_enabledFlag=32,i.Dynamics.Contacts.b2Contact.e_filterFlag=64,i.Dynamics.Contacts.b2Contact.s_input=new E}),c.b2ContactConstraint=function(){this.localPlaneNormal=new I,this.localPoint=new I,this.normal=new I,this.normalMass=new C,this.K=new C},c.prototype.b2ContactConstraint=function(){this.points=new s(A.b2_maxManifoldPoints);for(var t=0;t<A.b2_maxManifoldPoints;t++)this.points[t]=new h},h.b2ContactConstraintPoint=function(){this.localPoint=new I,this.rA=new I,this.rB=new I},u.b2ContactEdge=function(){},m.b2ContactFactory=function(){},m.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},m.prototype.AddType=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.m_registers[i][s].createFcn=t,this.m_registers[i][s].destroyFcn=e,this.m_registers[i][s].primary=!0,i!=s&&(this.m_registers[s][i].createFcn=t,this.m_registers[s][i].destroyFcn=e,this.m_registers[s][i].primary=!1)},m.prototype.InitializeRegisters=function(){this.m_registers=new s(r.e_shapeTypeCount);for(var t=0;t<r.e_shapeTypeCount;t++){this.m_registers[t]=new s(r.e_shapeTypeCount);for(var e=0;e<r.e_shapeTypeCount;e++)this.m_registers[t][e]=new _}this.AddType(a.Create,a.Destroy,r.e_circleShape,r.e_circleShape),this.AddType(x.Create,x.Destroy,r.e_polygonShape,r.e_circleShape),this.AddType(g.Create,g.Destroy,r.e_polygonShape,r.e_polygonShape),this.AddType(y.Create,y.Destroy,r.e_edgeShape,r.e_circleShape),this.AddType(v.Create,v.Destroy,r.e_polygonShape,r.e_edgeShape)},m.prototype.Create=function(t,e){var i=parseInt(t.GetType()),s=parseInt(e.GetType());return i=this.m_registers[i][s],i.pool?(s=i.pool,i.pool=s.m_next,i.poolCount--,s.Reset(t,e),s):(s=i.createFcn,null!=s?(i.primary?(s=s(this.m_allocator),s.Reset(t,e)):(s=s(this.m_allocator),s.Reset(e,t)),s):null)},m.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType());e=this.m_registers[e][i],e.poolCount++,t.m_next=e.pool,e.pool=t,(e=e.destroyFcn)(t,this.m_allocator)},_.b2ContactRegister=function(){},p.b2ContactResult=function(){this.position=new I,this.normal=new I,this.id=new P},d.b2ContactSolver=function(){this.m_step=new w,this.m_constraints=new s},d.prototype.b2ContactSolver=function(){},d.prototype.Initialize=function(t,e,i,s){void 0===i&&(i=0);var n;for(this.m_step.Set(t),this.m_allocator=s,t=0,this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new c;for(t=0;t<i;++t){n=e[t],s=n.m_fixtureA;var o=n.m_fixtureB,r=s.m_shape.m_radius,a=o.m_shape.m_radius,l=s.m_body,h=o.m_body,u=n.GetManifold(),m=A.b2MixFriction(s.GetFriction(),o.GetFriction()),_=A.b2MixRestitution(s.GetRestitution(),o.GetRestitution()),p=l.m_linearVelocity.x,y=l.m_linearVelocity.y,f=h.m_linearVelocity.x,x=h.m_linearVelocity.y,v=l.m_angularVelocity,g=h.m_angularVelocity;for(A.b2Assert(u.m_pointCount>0),d.s_worldManifold.Initialize(u,l.m_xf,r,h.m_xf,a),o=d.s_worldManifold.m_normal.x,n=d.s_worldManifold.m_normal.y,s=this.m_constraints[t],s.bodyA=l,s.bodyB=h,s.manifold=u,s.normal.x=o,s.normal.y=n,s.pointCount=u.m_pointCount,s.friction=m,s.restitution=_,s.localPlaneNormal.x=u.m_localPlaneNormal.x,s.localPlaneNormal.y=u.m_localPlaneNormal.y,s.localPoint.x=u.m_localPoint.x,s.localPoint.y=u.m_localPoint.y,s.radius=r+a,s.type=u.m_type,r=0;r<s.pointCount;++r){m=u.m_points[r],a=s.points[r],a.normalImpulse=m.m_normalImpulse,a.tangentImpulse=m.m_tangentImpulse,a.localPoint.SetV(m.m_localPoint),m=a.rA.x=d.s_worldManifold.m_points[r].x-l.m_sweep.c.x,_=a.rA.y=d.s_worldManifold.m_points[r].y-l.m_sweep.c.y;var b=a.rB.x=d.s_worldManifold.m_points[r].x-h.m_sweep.c.x,S=a.rB.y=d.s_worldManifold.m_points[r].y-h.m_sweep.c.y,w=m*n-_*o,C=b*n-S*o;w*=w,C*=C,a.normalMass=1/(l.m_invMass+h.m_invMass+l.m_invI*w+h.m_invI*C);var M=l.m_mass*l.m_invMass+h.m_mass*h.m_invMass;M+=l.m_mass*l.m_invI*w+h.m_mass*h.m_invI*C,a.equalizedMass=1/M,C=n,M=-o,w=m*M-_*C,C=b*M-S*C,w*=w,C*=C,a.tangentMass=1/(l.m_invMass+h.m_invMass+l.m_invI*w+h.m_invI*C),a.velocityBias=0,m=s.normal.x*(f+-g*S-p- -v*_)+s.normal.y*(x+g*b-y-v*m),m<-A.b2_velocityThreshold&&(a.velocityBias+=-s.restitution*m)}2==s.pointCount&&(x=s.points[0],f=s.points[1],u=l.m_invMass,l=l.m_invI,p=h.m_invMass,h=h.m_invI,y=x.rA.x*n-x.rA.y*o,x=x.rB.x*n-x.rB.y*o,v=f.rA.x*n-f.rA.y*o,f=f.rB.x*n-f.rB.y*o,o=u+p+l*y*y+h*x*x,n=u+p+l*v*v+h*f*f,h=u+p+l*y*v+h*x*f,o*o<100*(o*n-h*h)?(s.K.col1.Set(o,h),s.K.col2.Set(h,n),s.K.GetInverse(s.normalMass)):s.pointCount=1)}},d.prototype.InitVelocityConstraints=function(t){for(var e=0;e<this.m_constraintCount;++e){var i=this.m_constraints[e],s=i.bodyA,n=i.bodyB,o=s.m_invMass,r=s.m_invI,a=n.m_invMass,l=n.m_invI,c=i.normal.x,h=i.normal.y,u=h,m=-c,_=0,p=0;if(t.warmStarting)for(p=i.pointCount,_=0;_<p;++_){var d=i.points[_];d.normalImpulse*=t.dtRatio,d.tangentImpulse*=t.dtRatio;var y=d.normalImpulse*c+d.tangentImpulse*u,f=d.normalImpulse*h+d.tangentImpulse*m;s.m_angularVelocity-=r*(d.rA.x*f-d.rA.y*y),s.m_linearVelocity.x-=o*y,s.m_linearVelocity.y-=o*f,n.m_angularVelocity+=l*(d.rB.x*f-d.rB.y*y),n.m_linearVelocity.x+=a*y,n.m_linearVelocity.y+=a*f}else for(p=i.pointCount,_=0;_<p;++_)s=i.points[_],s.normalImpulse=0,s.tangentImpulse=0}},d.prototype.SolveVelocityConstraints=function(){for(var t,e,i=0,s=0,n=0,o=0,r=n=n=s=s=0,a=s=s=0,l=s=o=0,c=0,h=0;h<this.m_constraintCount;++h){o=this.m_constraints[h];var u=o.bodyA,m=o.bodyB,_=u.m_angularVelocity,p=m.m_angularVelocity,d=u.m_linearVelocity,y=m.m_linearVelocity,f=u.m_invMass,x=u.m_invI,v=m.m_invMass,g=m.m_invI;l=o.normal.x;var b=c=o.normal.y;for(e=-l,a=o.friction,i=0;i<o.pointCount;i++)t=o.points[i],s=y.x-p*t.rB.y-d.x+_*t.rA.y,n=y.y+p*t.rB.x-d.y-_*t.rA.x,s=s*b+n*e,s=t.tangentMass*-s,n=a*t.normalImpulse,n=M.Clamp(t.tangentImpulse+s,-n,n),s=n-t.tangentImpulse,r=s*b,s*=e,d.x-=f*r,d.y-=f*s,_-=x*(t.rA.x*s-t.rA.y*r),y.x+=v*r,y.y+=v*s,p+=g*(t.rB.x*s-t.rB.y*r),t.tangentImpulse=n;if(parseInt(o.pointCount),1==o.pointCount)t=o.points[0],s=y.x+-p*t.rB.y-d.x- -_*t.rA.y,n=y.y+p*t.rB.x-d.y-_*t.rA.x,o=s*l+n*c,s=-t.normalMass*(o-t.velocityBias),n=t.normalImpulse+s,n=n>0?n:0,s=n-t.normalImpulse,r=s*l,s*=c,d.x-=f*r,d.y-=f*s,_-=x*(t.rA.x*s-t.rA.y*r),y.x+=v*r,y.y+=v*s,p+=g*(t.rB.x*s-t.rB.y*r),t.normalImpulse=n;else{t=o.points[0],i=o.points[1],s=t.normalImpulse,a=i.normalImpulse;var S=(y.x-p*t.rB.y-d.x+_*t.rA.y)*l+(y.y+p*t.rB.x-d.y-_*t.rA.x)*c,w=(y.x-p*i.rB.y-d.x+_*i.rA.y)*l+(y.y+p*i.rB.x-d.y-_*i.rA.x)*c;for(n=S-t.velocityBias,r=w-i.velocityBias,e=o.K,n-=e.col1.x*s+e.col2.x*a,r-=e.col1.y*s+e.col2.y*a;;){if(e=o.normalMass,b=-(e.col1.x*n+e.col2.x*r),e=-(e.col1.y*n+e.col2.y*r),b>=0&&e>=0){s=b-s,a=e-a,o=s*l,s*=c,l*=a,c*=a,d.x-=f*(o+l),d.y-=f*(s+c),_-=x*(t.rA.x*s-t.rA.y*o+i.rA.x*c-i.rA.y*l),y.x+=v*(o+l),y.y+=v*(s+c),p+=g*(t.rB.x*s-t.rB.y*o+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(b=-t.normalMass*n,e=0,w=o.K.col1.y*b+r,b>=0&&w>=0){s=b-s,a=e-a,o=s*l,s*=c,l*=a,c*=a,d.x-=f*(o+l),d.y-=f*(s+c),_-=x*(t.rA.x*s-t.rA.y*o+i.rA.x*c-i.rA.y*l),y.x+=v*(o+l),y.y+=v*(s+c),p+=g*(t.rB.x*s-t.rB.y*o+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(b=0,e=-i.normalMass*r,S=o.K.col2.x*e+n,e>=0&&S>=0){s=b-s,a=e-a,o=s*l,s*=c,l*=a,c*=a,d.x-=f*(o+l),d.y-=f*(s+c),_-=x*(t.rA.x*s-t.rA.y*o+i.rA.x*c-i.rA.y*l),y.x+=v*(o+l),y.y+=v*(s+c),p+=g*(t.rB.x*s-t.rB.y*o+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(e=b=0,S=n,w=r,S>=0&&w>=0){s=b-s,a=e-a,o=s*l,s*=c,l*=a,c*=a,d.x-=f*(o+l),d.y-=f*(s+c),_-=x*(t.rA.x*s-t.rA.y*o+i.rA.x*c-i.rA.y*l),y.x+=v*(o+l),y.y+=v*(s+c),p+=g*(t.rB.x*s-t.rB.y*o+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}break}}u.m_angularVelocity=_,m.m_angularVelocity=p}},d.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],i=e.manifold,s=0;s<e.pointCount;++s){var n=i.m_points[s],o=e.points[s];n.m_normalImpulse=o.normalImpulse,n.m_tangentImpulse=o.tangentImpulse}},d.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;i<this.m_constraintCount;i++){var s=this.m_constraints[i],n=s.bodyA,o=s.bodyB,r=n.m_mass*n.m_invMass,a=n.m_mass*n.m_invI,l=o.m_mass*o.m_invMass,c=o.m_mass*o.m_invI;d.s_psm.Initialize(s);for(var h=d.s_psm.m_normal,u=0;u<s.pointCount;u++){var m=s.points[u],_=d.s_psm.m_points[u],p=d.s_psm.m_separations[u],y=_.x-n.m_sweep.c.x,f=_.y-n.m_sweep.c.y,x=_.x-o.m_sweep.c.x;_=_.y-o.m_sweep.c.y,e=e<p?e:p,p=M.Clamp(t*(p+A.b2_linearSlop),-A.b2_maxLinearCorrection,0),p=-m.equalizedMass*p,m=p*h.x,p*=h.y,n.m_sweep.c.x-=r*m,n.m_sweep.c.y-=r*p,n.m_sweep.a-=a*(y*p-f*m),n.SynchronizeTransform(),o.m_sweep.c.x+=l*m,o.m_sweep.c.y+=l*p,o.m_sweep.a+=c*(x*p-_*m),o.SynchronizeTransform()}}return e>-1.5*A.b2_linearSlop},i.postDefs.push(function(){i.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new B,i.Dynamics.Contacts.b2ContactSolver.s_psm=new b}),i.inherit(y,i.Dynamics.Contacts.b2Contact),y.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,y.b2EdgeAndCircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(){return new y},y.Destroy=function(){},y.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},y.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody(),s=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,s.m_xf)},y.prototype.b2CollideEdgeAndCircle=function(){},i.inherit(f,i.Dynamics.Contacts.b2Contact),f.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,f.b2NullContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},f.prototype.Evaluate=function(){},i.inherit(x,i.Dynamics.Contacts.b2Contact),x.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,x.b2PolyAndCircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},x.Create=function(){return new x},x.Destroy=function(){},x.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),A.b2Assert(t.GetType()==r.e_polygonShape),A.b2Assert(e.GetType()==r.e_circleShape)},x.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body;D.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},i.inherit(v,i.Dynamics.Contacts.b2Contact),v.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,v.b2PolyAndEdgeContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},v.Create=function(){return new v},v.Destroy=function(){},v.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),A.b2Assert(t.GetType()==r.e_polygonShape),A.b2Assert(e.GetType()==r.e_edgeShape)},v.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,i.m_xf)},v.prototype.b2CollidePolyAndEdge=function(){},i.inherit(g,i.Dynamics.Contacts.b2Contact),g.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,g.b2PolygonContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},g.Create=function(){return new g},g.Destroy=function(){},g.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},g.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();D.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof o?this.m_fixtureB.GetShape():null,e.m_xf)},b.b2PositionSolverManifold=function(){},b.prototype.b2PositionSolverManifold=function(){this.m_normal=new I,this.m_separations=new n(A.b2_maxManifoldPoints),this.m_points=new s(A.b2_maxManifoldPoints);for(var t=0;t<A.b2_maxManifoldPoints;t++)this.m_points[t]=new I},b.prototype.Initialize=function(t){A.b2Assert(t.pointCount>0);var e,i=0,s=0,n=0,o=0,r=0;switch(t.type){case L.e_circles:e=t.bodyA.m_xf.R,n=t.localPoint,i=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),s=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),e=t.bodyB.m_xf.R,n=t.points[0].localPoint,o=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),e=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),n=o-i,r=e-s;var a=n*n+r*r;a>Number.MIN_VALUE*Number.MIN_VALUE?(a=Math.sqrt(a),this.m_normal.x=n/a,this.m_normal.y=r/a):(this.m_normal.x=1,this.m_normal.y=0),this.m_points[0].x=.5*(i+o),this.m_points[0].y=.5*(s+e),this.m_separations[0]=n*this.m_normal.x+r*this.m_normal.y-t.radius;break;case L.e_faceA:for(e=t.bodyA.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=e.col1.x*n.x+e.col2.x*n.y,this.m_normal.y=e.col1.y*n.x+e.col2.y*n.y,e=t.bodyA.m_xf.R,n=t.localPoint,o=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),r=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),e=t.bodyB.m_xf.R,i=0;i<t.pointCount;++i)n=t.points[i].localPoint,s=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),n=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),this.m_separations[i]=(s-o)*this.m_normal.x+(n-r)*this.m_normal.y-t.radius,this.m_points[i].x=s,this.m_points[i].y=n;break;case L.e_faceB:for(e=t.bodyB.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=e.col1.x*n.x+e.col2.x*n.y,this.m_normal.y=e.col1.y*n.x+e.col2.y*n.y,e=t.bodyB.m_xf.R,n=t.localPoint,o=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),r=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),e=t.bodyA.m_xf.R,i=0;i<t.pointCount;++i)n=t.points[i].localPoint,s=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),n=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),this.m_separations[i]=(s-o)*this.m_normal.x+(n-r)*this.m_normal.y-t.radius,this.m_points[i].Set(s,n);this.m_normal.x*=-1,this.m_normal.y*=-1}},i.postDefs.push(function(){i.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new I,i.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new I})}(),function(){var t=i.Common.Math.b2Mat22,e=i.Common.Math.b2Math,s=i.Common.Math.b2Vec2,n=i.Common.b2Color,o=i.Dynamics.Controllers.b2BuoyancyController,r=i.Dynamics.Controllers.b2ConstantAccelController,a=i.Dynamics.Controllers.b2ConstantForceController,l=i.Dynamics.Controllers.b2Controller,c=i.Dynamics.Controllers.b2ControllerEdge,h=i.Dynamics.Controllers.b2GravityController,u=i.Dynamics.Controllers.b2TensorDampingController;i.inherit(o,i.Dynamics.Controllers.b2Controller),o.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,o.b2BuoyancyController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new s(0,-1),this.density=this.offset=0,this.velocity=new s(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},o.prototype.Step=function(){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;if(0!=e.IsAwake()){for(var i=new s,n=new s,o=0,r=0,a=e.GetFixtureList();a;a=a.GetNext()){var l=new s,c=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),l);o+=c,i.x+=c*l.x,i.y+=c*l.y;var h=0;h=1,r+=c*h,n.x+=c*l.x*h,n.y+=c*l.y*h}i.x/=o,i.y/=o,n.x/=r,n.y/=r,o<Number.MIN_VALUE||(r=this.gravity.GetNegative(),r.Multiply(this.density*o),e.ApplyForce(r,n),n=e.GetLinearVelocityFromWorldPoint(i),n.Subtract(this.velocity),n.Multiply(-this.linearDrag*o),e.ApplyForce(n,i),e.ApplyTorque(-e.GetInertia()/e.GetMass()*o*e.GetAngularVelocity()*this.angularDrag))}}}},o.prototype.Draw=function(t){var e=new s,i=new s;e.x=this.normal.x*this.offset+1e3*this.normal.y,e.y=this.normal.y*this.offset-1e3*this.normal.x,i.x=this.normal.x*this.offset-1e3*this.normal.y,i.y=this.normal.y*this.offset+1e3*this.normal.x;var o=new n(0,0,1);t.DrawSegment(e,i,o)},i.inherit(r,i.Dynamics.Controllers.b2Controller),r.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantAccelController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new s(0,0)},r.prototype.Step=function(t){t=new s(this.A.x*t.dt,this.A.y*t.dt);for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;i.IsAwake()&&i.SetLinearVelocity(new s(i.GetLinearVelocity().x+t.x,i.GetLinearVelocity().y+t.y))}},i.inherit(a,i.Dynamics.Controllers.b2Controller),a.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,a.b2ConstantForceController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new s(0,0)},a.prototype.Step=function(){for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;e.IsAwake()&&e.ApplyForce(this.F,e.GetWorldCenter())}},l.b2Controller=function(){},l.prototype.Step=function(){},l.prototype.Draw=function(){},l.prototype.AddBody=function(t){var e=new c;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},l.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},l.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetWorld=function(){return this.m_world},l.prototype.GetBodyList=function(){return this.m_bodyList},c.b2ControllerEdge=function(){},i.inherit(h,i.Dynamics.Controllers.b2Controller),h.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,h.b2GravityController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},h.prototype.Step=function(){var t=null,e=null,i=null,n=0,o=null,r=null,a=null,l=0,c=0,h=0;if(l=null,this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,i=e.GetWorldCenter(),n=e.GetMass(),o=this.m_bodyList;o!=t;o=o.nextBody)r=o.body,a=r.GetWorldCenter(),l=a.x-i.x,c=a.y-i.y,(h=l*l+c*c)<Number.MIN_VALUE||(l=new s(l,c),l.Multiply(this.G/h/Math.sqrt(h)*n*r.GetMass()),e.IsAwake()&&e.ApplyForce(l,i),l.Multiply(-1),r.IsAwake()&&r.ApplyForce(l,a));else for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,i=e.GetWorldCenter(),n=e.GetMass(),o=this.m_bodyList;o!=t;o=o.nextBody)r=o.body,a=r.GetWorldCenter(),l=a.x-i.x,c=a.y-i.y,(h=l*l+c*c)<Number.MIN_VALUE||(l=new s(l,c),l.Multiply(this.G/h*n*r.GetMass()),e.IsAwake()&&e.ApplyForce(l,i),l.Multiply(-1),r.IsAwake()&&r.ApplyForce(l,a))},i.inherit(u,i.Dynamics.Controllers.b2Controller),u.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,u.b2TensorDampingController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},u.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},u.prototype.Step=function(t){if(!((t=t.dt)<=Number.MIN_VALUE)){t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(var i=this.m_bodyList;i;i=i.nextBody){var n=i.body;if(n.IsAwake()){var o=n.GetWorldVector(e.MulMV(this.T,n.GetLocalVector(n.GetLinearVelocity())));n.SetLinearVelocity(new s(n.GetLinearVelocity().x+o.x*t,n.GetLinearVelocity().y+o.y*t))}}}}}(),function(){var t=i.Common.b2Settings,e=i.Common.Math.b2Mat22,s=i.Common.Math.b2Mat33,n=i.Common.Math.b2Math,o=i.Common.Math.b2Vec2,r=i.Common.Math.b2Vec3,a=i.Dynamics.Joints.b2DistanceJoint,l=i.Dynamics.Joints.b2DistanceJointDef,c=i.Dynamics.Joints.b2FrictionJoint,h=i.Dynamics.Joints.b2FrictionJointDef,u=i.Dynamics.Joints.b2GearJoint,m=i.Dynamics.Joints.b2GearJointDef,_=i.Dynamics.Joints.b2Jacobian,p=i.Dynamics.Joints.b2Joint,d=i.Dynamics.Joints.b2JointDef,y=i.Dynamics.Joints.b2JointEdge,f=i.Dynamics.Joints.b2LineJoint,x=i.Dynamics.Joints.b2LineJointDef,v=i.Dynamics.Joints.b2MouseJoint,g=i.Dynamics.Joints.b2MouseJointDef,b=i.Dynamics.Joints.b2PrismaticJoint,S=i.Dynamics.Joints.b2PrismaticJointDef,w=i.Dynamics.Joints.b2PulleyJoint,A=i.Dynamics.Joints.b2PulleyJointDef,C=i.Dynamics.Joints.b2RevoluteJoint,M=i.Dynamics.Joints.b2RevoluteJointDef,I=i.Dynamics.Joints.b2WeldJoint,D=i.Dynamics.Joints.b2WeldJointDef;i.inherit(a,i.Dynamics.Joints.b2Joint),a.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,a.b2DistanceJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u=new o},a.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},a.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},a.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},a.prototype.GetReactionTorque=function(){return 0},a.prototype.GetLength=function(){return this.m_length},a.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},a.prototype.GetFrequency=function(){return this.m_frequencyHz},a.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},a.prototype.GetDampingRatio=function(){return this.m_dampingRatio},a.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},a.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=this.m_gamma=this.m_impulse=0},a.prototype.InitVelocityConstraints=function(e){var i,s=0,n=this.m_bodyA,o=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;s=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=s,i=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;s=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=s,this.m_u.x=o.m_sweep.c.x+l-n.m_sweep.c.x-r,this.m_u.y=o.m_sweep.c.y+c-n.m_sweep.c.y-a,s=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y),s>t.b2_linearSlop?this.m_u.Multiply(1/s):this.m_u.SetZero(),i=r*this.m_u.y-a*this.m_u.x;var h=l*this.m_u.y-c*this.m_u.x;if(i=n.m_invMass+n.m_invI*i*i+o.m_invMass+o.m_invI*h*h,this.m_mass=0!=i?1/i:0,this.m_frequencyHz>0){s-=this.m_length,h=2*Math.PI*this.m_frequencyHz;var u=this.m_mass*h*h;this.m_gamma=e.dt*(2*this.m_mass*this.m_dampingRatio*h+e.dt*u),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=s*e.dt*u*this.m_gamma,this.m_mass=i+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}e.warmStarting?(this.m_impulse*=e.dtRatio,e=this.m_impulse*this.m_u.x,i=this.m_impulse*this.m_u.y,n.m_linearVelocity.x-=n.m_invMass*e,n.m_linearVelocity.y-=n.m_invMass*i,n.m_angularVelocity-=n.m_invI*(r*i-a*e),o.m_linearVelocity.x+=o.m_invMass*e,o.m_linearVelocity.y+=o.m_invMass*i,o.m_angularVelocity+=o.m_invI*(l*i-c*e)):this.m_impulse=0},a.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*s+t.col2.x*n;n=t.col1.y*s+t.col2.y*n,s=o,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=o,o=-this.m_mass*(this.m_u.x*(i.m_linearVelocity.x+-i.m_angularVelocity*a-(e.m_linearVelocity.x+-e.m_angularVelocity*n))+this.m_u.y*(i.m_linearVelocity.y+i.m_angularVelocity*r-(e.m_linearVelocity.y+e.m_angularVelocity*s))+this.m_bias+this.m_gamma*this.m_impulse),this.m_impulse+=o,t=o*this.m_u.x,o*=this.m_u.y,e.m_linearVelocity.x-=e.m_invMass*t,e.m_linearVelocity.y-=e.m_invMass*o,e.m_angularVelocity-=e.m_invI*(s*o-n*t),i.m_linearVelocity.x+=i.m_invMass*t,i.m_linearVelocity.y+=i.m_invMass*o,i.m_angularVelocity+=i.m_invI*(r*o-a*t)},a.prototype.SolvePositionConstraints=function(){var e;if(this.m_frequencyHz>0)return!0;var i=this.m_bodyA,s=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=e.col1.x*o+e.col2.x*r;r=e.col1.y*o+e.col2.y*r,o=a,e=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;a=e.col1.x*l+e.col2.x*c,c=e.col1.y*l+e.col2.y*c,l=a,a=s.m_sweep.c.x+l-i.m_sweep.c.x-o;var h=s.m_sweep.c.y+c-i.m_sweep.c.y-r;e=Math.sqrt(a*a+h*h),a/=e,h/=e,e-=this.m_length,e=n.Clamp(e,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var u=-this.m_mass*e;return this.m_u.Set(a,h),a=u*this.m_u.x,h=u*this.m_u.y,i.m_sweep.c.x-=i.m_invMass*a,i.m_sweep.c.y-=i.m_invMass*h,i.m_sweep.a-=i.m_invI*(o*h-r*a),s.m_sweep.c.x+=s.m_invMass*a,s.m_sweep.c.y+=s.m_invMass*h,s.m_sweep.a+=s.m_invI*(l*h-c*a),i.SynchronizeTransform(),s.SynchronizeTransform(),n.Abs(e)<t.b2_linearSlop},i.inherit(l,i.Dynamics.Joints.b2JointDef),l.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,l.b2DistanceJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},l.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_distanceJoint,this.length=1,this.dampingRatio=this.frequencyHz=0},l.prototype.Initialize=function(t,e,i,s){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(s)),t=s.x-i.x,i=s.y-i.y,this.length=Math.sqrt(t*t+i*i),this.dampingRatio=this.frequencyHz=0},i.inherit(c,i.Dynamics.Joints.b2Joint),c.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,c.b2FrictionJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_linearMass=new e,this.m_linearImpulse=new o},c.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},c.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},c.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},c.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},c.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},c.prototype.GetMaxForce=function(){return this.m_maxForce},c.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},c.prototype.GetMaxTorque=function(){return this.m_maxTorque},c.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},c.prototype.InitVelocityConstraints=function(t){var i,s=0,n=this.m_bodyA,o=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchorA.x-n.m_sweep.localCenter.x,a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;s=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=s,i=o.m_xf.R;var l=this.m_localAnchorB.x-o.m_sweep.localCenter.x,c=this.m_localAnchorB.y-o.m_sweep.localCenter.y;s=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=s,i=n.m_invMass,s=o.m_invMass;var h=n.m_invI,u=o.m_invI,m=new e;m.col1.x=i+s,m.col2.x=0,m.col1.y=0,m.col2.y=i+s,m.col1.x+=h*a*a,m.col2.x+=-h*r*a,m.col1.y+=-h*r*a,m.col2.y+=h*r*r,m.col1.x+=u*c*c,m.col2.x+=-u*l*c,m.col1.y+=-u*l*c,m.col2.y+=u*l*l,m.GetInverse(this.m_linearMass),this.m_angularMass=h+u,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting?(this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio,t=this.m_linearImpulse,n.m_linearVelocity.x-=i*t.x,n.m_linearVelocity.y-=i*t.y,n.m_angularVelocity-=h*(r*t.y-a*t.x+this.m_angularImpulse),o.m_linearVelocity.x+=s*t.x,o.m_linearVelocity.y+=s*t.y,o.m_angularVelocity+=u*(l*t.y-c*t.x+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0)},c.prototype.SolveVelocityConstraints=function(t){var e,i=0,s=this.m_bodyA,r=this.m_bodyB,a=s.m_linearVelocity,l=s.m_angularVelocity,c=r.m_linearVelocity,h=r.m_angularVelocity,u=s.m_invMass,m=r.m_invMass,_=s.m_invI,p=r.m_invI;e=s.m_xf.R;var d=this.m_localAnchorA.x-s.m_sweep.localCenter.x,y=this.m_localAnchorA.y-s.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*y,y=e.col1.y*d+e.col2.y*y,d=i,e=r.m_xf.R;var f=this.m_localAnchorB.x-r.m_sweep.localCenter.x,x=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*f+e.col2.x*x,x=e.col1.y*f+e.col2.y*x,f=i,e=0,i=-this.m_angularMass*(h-l);var v=this.m_angularImpulse;e=t.dt*this.m_maxTorque,this.m_angularImpulse=n.Clamp(this.m_angularImpulse+i,-e,e),i=this.m_angularImpulse-v,l-=_*i,h+=p*i,e=n.MulMV(this.m_linearMass,new o(-(c.x-h*x-a.x+l*y),-(c.y+h*f-a.y-l*d))),i=this.m_linearImpulse.Copy(),this.m_linearImpulse.Add(e),e=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>e*e&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(e)),e=n.SubtractVV(this.m_linearImpulse,i),a.x-=u*e.x,a.y-=u*e.y,l-=_*(d*e.y-y*e.x),c.x+=m*e.x,c.y+=m*e.y,h+=p*(f*e.y-x*e.x),s.m_angularVelocity=l,r.m_angularVelocity=h},c.prototype.SolvePositionConstraints=function(){return!0},i.inherit(h,i.Dynamics.Joints.b2JointDef),h.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,h.b2FrictionJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},h.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_frictionJoint,this.maxTorque=this.maxForce=0},h.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i))},i.inherit(u,i.Dynamics.Joints.b2Joint),u.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,u.b2GearJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_J=new _},u.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},u.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},u.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},u.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,s=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,n=e.col1.x*i+e.col2.x*s;return s=e.col1.y*i+e.col2.y*s,i=n,t*(this.m_impulse*this.m_J.angularB-i*this.m_impulse*this.m_J.linearB.y+s*this.m_impulse*this.m_J.linearB.x)},u.prototype.GetRatio=function(){return this.m_ratio},u.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},u.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),i=parseInt(t.joint2.m_type);this.m_prismatic2=this.m_revolute2=this.m_prismatic1=this.m_revolute1=null;var s=0,n=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==p.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof C?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),s=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof b?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),s=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),i==p.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof C?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),n=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof b?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),n=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=s+this.m_ratio*n,this.m_impulse=0},u.prototype.InitVelocityConstraints=function(t){var e=this.m_ground1,i=this.m_ground2,s=this.m_bodyA,n=this.m_bodyB,o=0,r=0,a=0,l=0,c=a=0,h=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,h+=s.m_invI):(e=e.m_xf.R,r=this.m_prismatic1.m_localXAxis1,o=e.col1.x*r.x+e.col2.x*r.y,r=e.col1.y*r.x+e.col2.y*r.y,e=s.m_xf.R,a=this.m_localAnchor1.x-s.m_sweep.localCenter.x,l=this.m_localAnchor1.y-s.m_sweep.localCenter.y,c=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=c,a=a*r-l*o,this.m_J.linearA.Set(-o,-r),this.m_J.angularA=-a,h+=s.m_invMass+s.m_invI*a*a),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,h+=this.m_ratio*this.m_ratio*n.m_invI):(e=i.m_xf.R,r=this.m_prismatic2.m_localXAxis1,o=e.col1.x*r.x+e.col2.x*r.y,r=e.col1.y*r.x+e.col2.y*r.y,e=n.m_xf.R,a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y,c=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=c,a=a*r-l*o,this.m_J.linearB.Set(-this.m_ratio*o,-this.m_ratio*r),this.m_J.angularB=-this.m_ratio*a,h+=this.m_ratio*this.m_ratio*(n.m_invMass+n.m_invI*a*a)),this.m_mass=h>0?1/h:0,t.warmStarting?(s.m_linearVelocity.x+=s.m_invMass*this.m_impulse*this.m_J.linearA.x,s.m_linearVelocity.y+=s.m_invMass*this.m_impulse*this.m_J.linearA.y,s.m_angularVelocity+=s.m_invI*this.m_impulse*this.m_J.angularA,n.m_linearVelocity.x+=n.m_invMass*this.m_impulse*this.m_J.linearB.x,n.m_linearVelocity.y+=n.m_invMass*this.m_impulse*this.m_J.linearB.y,n.m_angularVelocity+=n.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},u.prototype.SolveVelocityConstraints=function(){var t=this.m_bodyA,e=this.m_bodyB,i=-this.m_mass*this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity);this.m_impulse+=i,t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*i*this.m_J.angularA,e.m_linearVelocity.x+=e.m_invMass*i*this.m_J.linearB.x,e.m_linearVelocity.y+=e.m_invMass*i*this.m_J.linearB.y,e.m_angularVelocity+=e.m_invI*i*this.m_J.angularB},u.prototype.SolvePositionConstraints=function(){var e=this.m_bodyA,i=this.m_bodyB,s=0,n=0;return s=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),n=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation(),s=-this.m_mass*(this.m_constant-(s+this.m_ratio*n)),e.m_sweep.c.x+=e.m_invMass*s*this.m_J.linearA.x,e.m_sweep.c.y+=e.m_invMass*s*this.m_J.linearA.y,e.m_sweep.a+=e.m_invI*s*this.m_J.angularA,i.m_sweep.c.x+=i.m_invMass*s*this.m_J.linearB.x,i.m_sweep.c.y+=i.m_invMass*s*this.m_J.linearB.y,i.m_sweep.a+=i.m_invI*s*this.m_J.angularB,e.SynchronizeTransform(),i.SynchronizeTransform(),0<t.b2_linearSlop},i.inherit(m,i.Dynamics.Joints.b2JointDef),m.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,m.b2GearJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},m.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_gearJoint,this.joint2=this.joint1=null,this.ratio=1},_.b2Jacobian=function(){this.linearA=new o,this.linearB=new o},_.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},_.prototype.Set=function(t,e,i,s){void 0===e&&(e=0),void 0===s&&(s=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(i),this.angularB=s},_.prototype.Compute=function(t,e,i,s){return void 0===e&&(e=0),void 0===s&&(s=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*s},p.b2Joint=function(){this.m_edgeA=new y,this.m_edgeB=new y,this.m_localCenterA=new o,this.m_localCenterB=new o},p.prototype.GetType=function(){return this.m_type},p.prototype.GetAnchorA=function(){return null},p.prototype.GetAnchorB=function(){return null},p.prototype.GetReactionForce=function(){return null},p.prototype.GetReactionTorque=function(){return 0},p.prototype.GetBodyA=function(){return this.m_bodyA},p.prototype.GetBodyB=function(){return this.m_bodyB},p.prototype.GetNext=function(){return this.m_next},p.prototype.GetUserData=function(){return this.m_userData},p.prototype.SetUserData=function(t){this.m_userData=t},p.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},p.Create=function(t){var e=null;switch(t.type){case p.e_distanceJoint:e=new a(t instanceof l?t:null);break;case p.e_mouseJoint:e=new v(t instanceof g?t:null);break;case p.e_prismaticJoint:e=new b(t instanceof S?t:null);break;case p.e_revoluteJoint:e=new C(t instanceof M?t:null);break;case p.e_pulleyJoint:e=new w(t instanceof A?t:null);break;case p.e_gearJoint:e=new u(t instanceof m?t:null);break;case p.e_lineJoint:e=new f(t instanceof x?t:null);break;case p.e_weldJoint:e=new I(t instanceof D?t:null);break;case p.e_frictionJoint:e=new c(t instanceof h?t:null)}return e},p.Destroy=function(){},p.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_next=this.m_prev=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},p.prototype.InitVelocityConstraints=function(){},p.prototype.SolveVelocityConstraints=function(){},p.prototype.FinalizeVelocityConstraints=function(){},p.prototype.SolvePositionConstraints=function(){return!1},i.postDefs.push(function(){i.Dynamics.Joints.b2Joint.e_unknownJoint=0,i.Dynamics.Joints.b2Joint.e_revoluteJoint=1,i.Dynamics.Joints.b2Joint.e_prismaticJoint=2,i.Dynamics.Joints.b2Joint.e_distanceJoint=3,i.Dynamics.Joints.b2Joint.e_pulleyJoint=4,i.Dynamics.Joints.b2Joint.e_mouseJoint=5,i.Dynamics.Joints.b2Joint.e_gearJoint=6,i.Dynamics.Joints.b2Joint.e_lineJoint=7,i.Dynamics.Joints.b2Joint.e_weldJoint=8,i.Dynamics.Joints.b2Joint.e_frictionJoint=9,i.Dynamics.Joints.b2Joint.e_inactiveLimit=0,i.Dynamics.Joints.b2Joint.e_atLowerLimit=1,i.Dynamics.Joints.b2Joint.e_atUpperLimit=2,i.Dynamics.Joints.b2Joint.e_equalLimits=3}),d.b2JointDef=function(){},d.prototype.b2JointDef=function(){this.type=p.e_unknownJoint,this.bodyB=this.bodyA=this.userData=null,this.collideConnected=!1},y.b2JointEdge=function(){},i.inherit(f,i.Dynamics.Joints.b2Joint),f.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,f.b2LineJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new e,this.m_impulse=new o},f.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},f.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},f.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},f.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},f.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),s=e.GetWorldPoint(this.m_localAnchor2);return e=s.x-i.x,i=s.y-i.y,t=t.GetWorldVector(this.m_localXAxis1),t.x*e+t.y*i},f.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*s+t.col2.x*n;n=t.col1.y*s+t.col2.y*n,s=o,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=o,t=i.m_sweep.c.x+r-(e.m_sweep.c.x+s),o=i.m_sweep.c.y+a-(e.m_sweep.c.y+n);var l=e.GetWorldVector(this.m_localXAxis1),c=e.m_linearVelocity,h=i.m_linearVelocity;return e=e.m_angularVelocity,i=i.m_angularVelocity,t*-e*l.y+o*e*l.x+(l.x*(h.x+-i*a-c.x- -e*n)+l.y*(h.y+i*r-c.y-e*s))},f.prototype.IsLimitEnabled=function(){return this.m_enableLimit},f.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},f.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},f.prototype.GetUpperLimit=function(){return this.m_upperTranslation},f.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},f.prototype.IsMotorEnabled=function(){return this.m_enableMotor},f.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},f.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},f.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},f.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},f.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},f.prototype.GetMotorForce=function(){return this.m_motorImpulse},f.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},f.prototype.InitVelocityConstraints=function(e){var i,s=this.m_bodyA,o=this.m_bodyB,r=0;this.m_localCenterA.SetV(s.GetLocalCenter()),this.m_localCenterB.SetV(o.GetLocalCenter());var a=s.GetTransform();o.GetTransform(),i=s.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=o.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r,i=o.m_sweep.c.x+h-s.m_sweep.c.x-l,r=o.m_sweep.c.y+u-s.m_sweep.c.y-c,this.m_invMassA=s.m_invMass,this.m_invMassB=o.m_invMass,this.m_invIA=s.m_invI,this.m_invIB=o.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(i+l)*this.m_axis.y-(r+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(i+l)*this.m_perp.y-(r+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x,a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,h=this.m_invIB,this.m_K.col1.x=a+l+c*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,this.m_K.col1.y=c*this.m_s1*this.m_a1+h*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=a+l+c*this.m_a1*this.m_a1+h*this.m_a2*this.m_a2,this.m_enableLimit?(i=this.m_axis.x*i+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:i<=this.m_lowerTranslation?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.y=0):i>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.y=0)):this.m_limitState=p.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,i=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,a=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2,s.m_linearVelocity.x-=this.m_invMassA*e,s.m_linearVelocity.y-=this.m_invMassA*i,s.m_angularVelocity-=this.m_invIA*r,o.m_linearVelocity.x+=this.m_invMassB*e,o.m_linearVelocity.y+=this.m_invMassB*i,o.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},f.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,s=e.m_linearVelocity,r=e.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=0,h=0,u=0,m=0;this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(m=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r)),c=this.m_motorImpulse,h=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+m,-h,h),m=this.m_motorImpulse-c,c=m*this.m_axis.x,h=m*this.m_axis.y,u=m*this.m_a1,m*=this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m),h=this.m_perp.x*(a.x-s.x)+this.m_perp.y*(a.y-s.y)+this.m_s2*l-this.m_s1*r,this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit?(u=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,c=this.m_impulse.Copy(),t=this.m_K.Solve(new o,-h,-u),this.m_impulse.Add(t),this.m_limitState==p.e_atLowerLimit?this.m_impulse.y=n.Max(this.m_impulse.y,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.y=n.Min(this.m_impulse.y,0)),h=-h-(this.m_impulse.y-c.y)*this.m_K.col2.x,u=0,u=0!=this.m_K.col1.x?h/this.m_K.col1.x+c.x:c.x,this.m_impulse.x=u,t.x=this.m_impulse.x-c.x,t.y=this.m_impulse.y-c.y,c=t.x*this.m_perp.x+t.y*this.m_axis.x,h=t.x*this.m_perp.y+t.y*this.m_axis.y,u=t.x*this.m_s1+t.y*this.m_a1,m=t.x*this.m_s2+t.y*this.m_a2):(t=0,t=0!=this.m_K.col1.x?-h/this.m_K.col1.x:0,this.m_impulse.x+=t,c=t*this.m_perp.x,h=t*this.m_perp.y,u=t*this.m_s1,m=t*this.m_s2),s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m,e.m_linearVelocity.SetV(s),e.m_angularVelocity=r,i.m_linearVelocity.SetV(a),i.m_angularVelocity=l},f.prototype.SolvePositionConstraints=function(){var i,s=this.m_bodyA,r=this.m_bodyB,a=s.m_sweep.c,l=s.m_sweep.a,c=r.m_sweep.c,h=r.m_sweep.a,u=0,m=0,_=0,p=0,d=i=0,y=0;m=!1;var f=0,x=e.FromAngle(l);_=e.FromAngle(h),i=x,y=this.m_localAnchor1.x-this.m_localCenterA.x;var v=this.m_localAnchor1.y-this.m_localCenterA.y;if(u=i.col1.x*y+i.col2.x*v,v=i.col1.y*y+i.col2.y*v,y=u,i=_,_=this.m_localAnchor2.x-this.m_localCenterB.x,p=this.m_localAnchor2.y-this.m_localCenterB.y,u=i.col1.x*_+i.col2.x*p,p=i.col1.y*_+i.col2.y*p,_=u,i=c.x+_-a.x-y,u=c.y+p-a.y-v,this.m_enableLimit){this.m_axis=n.MulMV(x,this.m_localXAxis1),this.m_a1=(i+y)*this.m_axis.y-(u+v)*this.m_axis.x,this.m_a2=_*this.m_axis.y-p*this.m_axis.x;var g=this.m_axis.x*i+this.m_axis.y*u;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(f=n.Clamp(g,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=n.Abs(g),m=!0):g<=this.m_lowerTranslation?(f=n.Clamp(g-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-g,m=!0):g>=this.m_upperTranslation&&(f=n.Clamp(g-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=g-this.m_upperTranslation,m=!0)}return this.m_perp=n.MulMV(x,this.m_localYAxis1),this.m_s1=(i+y)*this.m_perp.y-(u+v)*this.m_perp.x,this.m_s2=_*this.m_perp.y-p*this.m_perp.x,x=new o,v=this.m_perp.x*i+this.m_perp.y*u,d=n.Max(d,n.Abs(v)),y=0,m?(m=this.m_invMassA,_=this.m_invMassB,p=this.m_invIA,i=this.m_invIB,this.m_K.col1.x=m+_+p*this.m_s1*this.m_s1+i*this.m_s2*this.m_s2,this.m_K.col1.y=p*this.m_s1*this.m_a1+i*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=m+_+p*this.m_a1*this.m_a1+i*this.m_a2*this.m_a2,this.m_K.Solve(x,-v,-f)):(m=this.m_invMassA,_=this.m_invMassB,p=this.m_invIA,i=this.m_invIB,f=m+_+p*this.m_s1*this.m_s1+i*this.m_s2*this.m_s2,m=0,m=0!=f?-v/f:0,x.x=m,x.y=0),f=x.x*this.m_perp.x+x.y*this.m_axis.x,m=x.x*this.m_perp.y+x.y*this.m_axis.y,v=x.x*this.m_s1+x.y*this.m_a1,x=x.x*this.m_s2+x.y*this.m_a2,a.x-=this.m_invMassA*f,a.y-=this.m_invMassA*m,l-=this.m_invIA*v,c.x+=this.m_invMassB*f,c.y+=this.m_invMassB*m,h+=this.m_invIB*x,s.m_sweep.a=l,r.m_sweep.a=h,s.SynchronizeTransform(),r.SynchronizeTransform(),d<=t.b2_linearSlop&&y<=t.b2_angularSlop},i.inherit(x,i.Dynamics.Joints.b2JointDef),x.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,x.b2LineJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},x.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},x.prototype.Initialize=function(t,e,i,s){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(s)},i.inherit(v,i.Dynamics.Joints.b2Joint),v.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,v.b2MouseJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new o,this.m_target=new o,this.m_impulse=new o,this.m_mass=new e,this.m_C=new o},v.prototype.GetAnchorA=function(){return this.m_target},v.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},v.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},v.prototype.GetReactionTorque=function(){return 0},v.prototype.GetTarget=function(){return this.m_target},v.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},v.prototype.GetMaxForce=function(){return this.m_maxForce},v.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},v.prototype.GetFrequency=function(){return this.m_frequencyHz},v.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},v.prototype.GetDampingRatio=function(){return this.m_dampingRatio},v.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},v.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,s=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*s.col1.x+i*s.col1.y,this.m_localAnchor.y=e*s.col2.x+i*s.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_gamma=this.m_beta=0},v.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,i=e.GetMass(),s=2*Math.PI*this.m_frequencyHz,n=i*s*s;this.m_gamma=t.dt*(2*i*this.m_dampingRatio*s+t.dt*n),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*n*this.m_gamma,n=e.m_xf.R,i=this.m_localAnchor.x-e.m_sweep.localCenter.x,s=this.m_localAnchor.y-e.m_sweep.localCenter.y;var o=n.col1.x*i+n.col2.x*s;s=n.col1.y*i+n.col2.y*s,i=o,n=e.m_invMass,o=e.m_invI,this.K1.col1.x=n,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=n,this.K2.col1.x=o*s*s,this.K2.col2.x=-o*i*s,this.K2.col1.y=-o*i*s,this.K2.col2.y=o*i*i,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+i-this.m_target.x,this.m_C.y=e.m_sweep.c.y+s-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=n*this.m_impulse.x,e.m_linearVelocity.y+=n*this.m_impulse.y,e.m_angularVelocity+=o*(i*this.m_impulse.y-s*this.m_impulse.x)},v.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyB,s=0,n=0;e=i.m_xf.R;var o=this.m_localAnchor.x-i.m_sweep.localCenter.x,r=this.m_localAnchor.y-i.m_sweep.localCenter.y;s=e.col1.x*o+e.col2.x*r,r=e.col1.y*o+e.col2.y*r,o=s,s=i.m_linearVelocity.x+-i.m_angularVelocity*r;var a=i.m_linearVelocity.y+i.m_angularVelocity*o;e=this.m_mass,s=s+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,n=a+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y,a=-(e.col1.x*s+e.col2.x*n),n=-(e.col1.y*s+e.col2.y*n),e=this.m_impulse.x,s=this.m_impulse.y,this.m_impulse.x+=a,this.m_impulse.y+=n,t=t.dt*this.m_maxForce,this.m_impulse.LengthSquared()>t*t&&this.m_impulse.Multiply(t/this.m_impulse.Length()),a=this.m_impulse.x-e,n=this.m_impulse.y-s,i.m_linearVelocity.x+=i.m_invMass*a,i.m_linearVelocity.y+=i.m_invMass*n,i.m_angularVelocity+=i.m_invI*(o*n-r*a)},v.prototype.SolvePositionConstraints=function(){return!0},i.inherit(g,i.Dynamics.Joints.b2JointDef),g.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,g.b2MouseJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new o},g.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},i.inherit(b,i.Dynamics.Joints.b2Joint),b.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,b.b2PrismaticJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new s,this.m_impulse=new r},b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},b.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},b.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},b.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),s=e.GetWorldPoint(this.m_localAnchor2);return e=s.x-i.x,i=s.y-i.y,t=t.GetWorldVector(this.m_localXAxis1),t.x*e+t.y*i},b.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*s+t.col2.x*n;n=t.col1.y*s+t.col2.y*n,s=o,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=o,t=i.m_sweep.c.x+r-(e.m_sweep.c.x+s),o=i.m_sweep.c.y+a-(e.m_sweep.c.y+n);var l=e.GetWorldVector(this.m_localXAxis1),c=e.m_linearVelocity,h=i.m_linearVelocity;return e=e.m_angularVelocity,i=i.m_angularVelocity,t*-e*l.y+o*e*l.x+(l.x*(h.x+-i*a-c.x- -e*n)+l.y*(h.y+i*r-c.y-e*s))},b.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},b.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},b.prototype.GetUpperLimit=function(){return this.m_upperTranslation},b.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},b.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},b.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},b.prototype.GetMotorForce=function(){return this.m_motorImpulse},b.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},b.prototype.InitVelocityConstraints=function(e){var i,s=this.m_bodyA,o=this.m_bodyB,r=0;this.m_localCenterA.SetV(s.GetLocalCenter()),this.m_localCenterB.SetV(o.GetLocalCenter());var a=s.GetTransform();o.GetTransform(),i=s.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=o.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r,i=o.m_sweep.c.x+h-s.m_sweep.c.x-l,r=o.m_sweep.c.y+u-s.m_sweep.c.y-c,this.m_invMassA=s.m_invMass,this.m_invMassB=o.m_invMass,this.m_invIA=s.m_invI,this.m_invIB=o.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(i+l)*this.m_axis.y-(r+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(i+l)*this.m_perp.y-(r+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x,a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,h=this.m_invIB,this.m_K.col1.x=a+l+c*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,this.m_K.col1.y=c*this.m_s1+h*this.m_s2,this.m_K.col1.z=c*this.m_s1*this.m_a1+h*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=c+h,this.m_K.col2.z=c*this.m_a1+h*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=a+l+c*this.m_a1*this.m_a1+h*this.m_a2*this.m_a2,this.m_enableLimit?(i=this.m_axis.x*i+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:i<=this.m_lowerTranslation?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.z=0):i>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=p.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,i=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,a=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,s.m_linearVelocity.x-=this.m_invMassA*e,s.m_linearVelocity.y-=this.m_invMassA*i,s.m_angularVelocity-=this.m_invIA*r,o.m_linearVelocity.x+=this.m_invMassB*e,o.m_linearVelocity.y+=this.m_invMassB*i,o.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},b.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,s=e.m_linearVelocity,a=e.m_angularVelocity,l=i.m_linearVelocity,c=i.m_angularVelocity,h=0,u=0,m=0,_=0;this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(_=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(l.x-s.x)+this.m_axis.y*(l.y-s.y)+this.m_a2*c-this.m_a1*a)),h=this.m_motorImpulse,t=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+_,-t,t),_=this.m_motorImpulse-h,h=_*this.m_axis.x,u=_*this.m_axis.y,m=_*this.m_a1,_*=this.m_a2,s.x-=this.m_invMassA*h,s.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*_),m=this.m_perp.x*(l.x-s.x)+this.m_perp.y*(l.y-s.y)+this.m_s2*c-this.m_s1*a,u=c-a,this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit?(t=this.m_axis.x*(l.x-s.x)+this.m_axis.y*(l.y-s.y)+this.m_a2*c-this.m_a1*a,h=this.m_impulse.Copy(),t=this.m_K.Solve33(new r,-m,-u,-t),this.m_impulse.Add(t),this.m_limitState==p.e_atLowerLimit?this.m_impulse.z=n.Max(this.m_impulse.z,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.z=n.Min(this.m_impulse.z,0)),m=-m-(this.m_impulse.z-h.z)*this.m_K.col3.x,u=-u-(this.m_impulse.z-h.z)*this.m_K.col3.y,u=this.m_K.Solve22(new o,m,u),u.x+=h.x,u.y+=h.y,this.m_impulse.x=u.x,this.m_impulse.y=u.y,t.x=this.m_impulse.x-h.x,t.y=this.m_impulse.y-h.y,t.z=this.m_impulse.z-h.z,h=t.x*this.m_perp.x+t.z*this.m_axis.x,u=t.x*this.m_perp.y+t.z*this.m_axis.y,m=t.x*this.m_s1+t.y+t.z*this.m_a1,_=t.x*this.m_s2+t.y+t.z*this.m_a2):(t=this.m_K.Solve22(new o,-m,-u),this.m_impulse.x+=t.x,this.m_impulse.y+=t.y,h=t.x*this.m_perp.x,u=t.x*this.m_perp.y,m=t.x*this.m_s1+t.y,_=t.x*this.m_s2+t.y),s.x-=this.m_invMassA*h,s.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*_,e.m_linearVelocity.SetV(s),e.m_angularVelocity=a,i.m_linearVelocity.SetV(l),i.m_angularVelocity=c},b.prototype.SolvePositionConstraints=function(){var i,s=this.m_bodyA,a=this.m_bodyB,l=s.m_sweep.c,c=s.m_sweep.a,h=a.m_sweep.c,u=a.m_sweep.a,m=0,_=0,p=0,d=m=i=0,y=0;_=!1;var f=0,x=e.FromAngle(c),v=e.FromAngle(u);i=x,y=this.m_localAnchor1.x-this.m_localCenterA.x;var g=this.m_localAnchor1.y-this.m_localCenterA.y;if(m=i.col1.x*y+i.col2.x*g,g=i.col1.y*y+i.col2.y*g,y=m,i=v,v=this.m_localAnchor2.x-this.m_localCenterB.x,p=this.m_localAnchor2.y-this.m_localCenterB.y,m=i.col1.x*v+i.col2.x*p,p=i.col1.y*v+i.col2.y*p,v=m,i=h.x+v-l.x-y,m=h.y+p-l.y-g,this.m_enableLimit){this.m_axis=n.MulMV(x,this.m_localXAxis1),this.m_a1=(i+y)*this.m_axis.y-(m+g)*this.m_axis.x,this.m_a2=v*this.m_axis.y-p*this.m_axis.x;var b=this.m_axis.x*i+this.m_axis.y*m;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(f=n.Clamp(b,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=n.Abs(b),_=!0):b<=this.m_lowerTranslation?(f=n.Clamp(b-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-b,_=!0):b>=this.m_upperTranslation&&(f=n.Clamp(b-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=b-this.m_upperTranslation,_=!0)}return this.m_perp=n.MulMV(x,this.m_localYAxis1),this.m_s1=(i+y)*this.m_perp.y-(m+g)*this.m_perp.x,this.m_s2=v*this.m_perp.y-p*this.m_perp.x,x=new r,g=this.m_perp.x*i+this.m_perp.y*m,v=u-c-this.m_refAngle,d=n.Max(d,n.Abs(g)),y=n.Abs(v),_?(_=this.m_invMassA,p=this.m_invMassB,i=this.m_invIA,m=this.m_invIB,this.m_K.col1.x=_+p+i*this.m_s1*this.m_s1+m*this.m_s2*this.m_s2,this.m_K.col1.y=i*this.m_s1+m*this.m_s2,this.m_K.col1.z=i*this.m_s1*this.m_a1+m*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=i+m,this.m_K.col2.z=i*this.m_a1+m*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=_+p+i*this.m_a1*this.m_a1+m*this.m_a2*this.m_a2,this.m_K.Solve33(x,-g,-v,-f)):(_=this.m_invMassA,p=this.m_invMassB,i=this.m_invIA,m=this.m_invIB,f=i*this.m_s1+m*this.m_s2,b=i+m,this.m_K.col1.Set(_+p+i*this.m_s1*this.m_s1+m*this.m_s2*this.m_s2,f,0),this.m_K.col2.Set(f,b,0),f=this.m_K.Solve22(new o,-g,-v),x.x=f.x,x.y=f.y,x.z=0),f=x.x*this.m_perp.x+x.z*this.m_axis.x,_=x.x*this.m_perp.y+x.z*this.m_axis.y,g=x.x*this.m_s1+x.y+x.z*this.m_a1,x=x.x*this.m_s2+x.y+x.z*this.m_a2,l.x-=this.m_invMassA*f,l.y-=this.m_invMassA*_,c-=this.m_invIA*g,h.x+=this.m_invMassB*f,h.y+=this.m_invMassB*_,u+=this.m_invIB*x,s.m_sweep.a=c,a.m_sweep.a=u,s.SynchronizeTransform(),a.SynchronizeTransform(),d<=t.b2_linearSlop&&y<=t.b2_angularSlop},i.inherit(S,i.Dynamics.Joints.b2JointDef),S.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,S.b2PrismaticJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},S.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},S.prototype.Initialize=function(t,e,i,s){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(s),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},i.inherit(w,i.Dynamics.Joints.b2Joint),w.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,w.b2PulleyJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u1=new o,this.m_u2=new o},w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},w.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},w.prototype.GetReactionTorque=function(){return 0},w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y),Math.sqrt(e*e+t*t)},w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor2.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor2.y),Math.sqrt(e*e+t*t)},w.prototype.GetRatio=function(){return this.m_ratio},w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t),this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=n.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength),this.m_maxLength2=n.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio),this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.InitVelocityConstraints=function(e){var i,s=this.m_bodyA,n=this.m_bodyB;i=s.m_xf.R;var o=this.m_localAnchor1.x-s.m_sweep.localCenter.x,r=this.m_localAnchor1.y-s.m_sweep.localCenter.y,a=i.col1.x*o+i.col2.x*r;r=i.col1.y*o+i.col2.y*r,o=a,i=n.m_xf.R;var l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,c=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=a,i=n.m_sweep.c.x+l,a=n.m_sweep.c.y+c;var h=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,u=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(s.m_sweep.c.x+o-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x),s.m_sweep.c.y+r-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y)),this.m_u2.Set(i-h,a-u),i=this.m_u1.Length(),a=this.m_u2.Length(),i>t.b2_linearSlop?this.m_u1.Multiply(1/i):this.m_u1.SetZero(),a>t.b2_linearSlop?this.m_u2.Multiply(1/a):this.m_u2.SetZero(),this.m_constant-i-this.m_ratio*a>0?(this.m_state=p.e_inactiveLimit,this.m_impulse=0):this.m_state=p.e_atUpperLimit,i<this.m_maxLength1?(this.m_limitState1=p.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=p.e_atUpperLimit,a<this.m_maxLength2?(this.m_limitState2=p.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=p.e_atUpperLimit,i=o*this.m_u1.y-r*this.m_u1.x,a=l*this.m_u2.y-c*this.m_u2.x,this.m_limitMass1=s.m_invMass+s.m_invI*i*i,this.m_limitMass2=n.m_invMass+n.m_invI*a*a,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting?(this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio,e=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,i=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,a=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,h=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y,s.m_linearVelocity.x+=s.m_invMass*e,s.m_linearVelocity.y+=s.m_invMass*i,s.m_angularVelocity+=s.m_invI*(o*i-r*e),n.m_linearVelocity.x+=n.m_invMass*a,n.m_linearVelocity.y+=n.m_invMass*h,n.m_angularVelocity+=n.m_invI*(l*h-c*a)):this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,r=t.col1.x*s+t.col2.x*o;o=t.col1.y*s+t.col2.y*o,s=r,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;r=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=r;var c=r=t=0,h=0;t=h=t=h=c=r=t=0,this.m_state==p.e_atUpperLimit&&(t=e.m_linearVelocity.x+-e.m_angularVelocity*o,r=e.m_linearVelocity.y+e.m_angularVelocity*s,c=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,t=-(this.m_u1.x*t+this.m_u1.y*r)-this.m_ratio*(this.m_u2.x*c+this.m_u2.y*h),h=this.m_pulleyMass*-t,t=this.m_impulse,this.m_impulse=n.Max(0,this.m_impulse+h),h=this.m_impulse-t,t=-h*this.m_u1.x,r=-h*this.m_u1.y,c=-this.m_ratio*h*this.m_u2.x,h=-this.m_ratio*h*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*t,e.m_linearVelocity.y+=e.m_invMass*r,e.m_angularVelocity+=e.m_invI*(s*r-o*t),i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(a*h-l*c)),this.m_limitState1==p.e_atUpperLimit&&(t=e.m_linearVelocity.x+-e.m_angularVelocity*o,r=e.m_linearVelocity.y+e.m_angularVelocity*s,t=-(this.m_u1.x*t+this.m_u1.y*r),h=-this.m_limitMass1*t,t=this.m_limitImpulse1,this.m_limitImpulse1=n.Max(0,this.m_limitImpulse1+h),h=this.m_limitImpulse1-t,t=-h*this.m_u1.x,r=-h*this.m_u1.y,e.m_linearVelocity.x+=e.m_invMass*t,e.m_linearVelocity.y+=e.m_invMass*r,e.m_angularVelocity+=e.m_invI*(s*r-o*t)),this.m_limitState2==p.e_atUpperLimit&&(c=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,t=-(this.m_u2.x*c+this.m_u2.y*h),h=-this.m_limitMass2*t,t=this.m_limitImpulse2,this.m_limitImpulse2=n.Max(0,this.m_limitImpulse2+h),h=this.m_limitImpulse2-t,c=-h*this.m_u2.x,h=-h*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(a*h-l*c))},w.prototype.SolvePositionConstraints=function(){var e,i=this.m_bodyA,s=this.m_bodyB,o=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,r=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,l=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,c=0,h=0,u=0,m=0,_=e=0,d=0,y=0,f=_=y=e=_=e=0;return this.m_state==p.e_atUpperLimit&&(e=i.m_xf.R,c=this.m_localAnchor1.x-i.m_sweep.localCenter.x,h=this.m_localAnchor1.y-i.m_sweep.localCenter.y,_=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=_,e=s.m_xf.R,u=this.m_localAnchor2.x-s.m_sweep.localCenter.x,m=this.m_localAnchor2.y-s.m_sweep.localCenter.y,_=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=_,e=i.m_sweep.c.x+c,_=i.m_sweep.c.y+h,d=s.m_sweep.c.x+u,y=s.m_sweep.c.y+m,this.m_u1.Set(e-o,_-r),this.m_u2.Set(d-a,y-l),e=this.m_u1.Length(),_=this.m_u2.Length(),e>t.b2_linearSlop?this.m_u1.Multiply(1/e):this.m_u1.SetZero(),_>t.b2_linearSlop?this.m_u2.Multiply(1/_):this.m_u2.SetZero(),e=this.m_constant-e-this.m_ratio*_,f=n.Max(f,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),y=-this.m_pulleyMass*e,e=-y*this.m_u1.x,_=-y*this.m_u1.y,d=-this.m_ratio*y*this.m_u2.x,y=-this.m_ratio*y*this.m_u2.y,i.m_sweep.c.x+=i.m_invMass*e,i.m_sweep.c.y+=i.m_invMass*_,i.m_sweep.a+=i.m_invI*(c*_-h*e),s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*y,s.m_sweep.a+=s.m_invI*(u*y-m*d),i.SynchronizeTransform(),s.SynchronizeTransform()),this.m_limitState1==p.e_atUpperLimit&&(e=i.m_xf.R,c=this.m_localAnchor1.x-i.m_sweep.localCenter.x,h=this.m_localAnchor1.y-i.m_sweep.localCenter.y,_=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=_,e=i.m_sweep.c.x+c,_=i.m_sweep.c.y+h,this.m_u1.Set(e-o,_-r),e=this.m_u1.Length(),e>t.b2_linearSlop?(this.m_u1.x*=1/e,this.m_u1.y*=1/e):this.m_u1.SetZero(),e=this.m_maxLength1-e,f=n.Max(f,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),y=-this.m_limitMass1*e,e=-y*this.m_u1.x,_=-y*this.m_u1.y,i.m_sweep.c.x+=i.m_invMass*e,i.m_sweep.c.y+=i.m_invMass*_,i.m_sweep.a+=i.m_invI*(c*_-h*e),i.SynchronizeTransform()),this.m_limitState2==p.e_atUpperLimit&&(e=s.m_xf.R,u=this.m_localAnchor2.x-s.m_sweep.localCenter.x,m=this.m_localAnchor2.y-s.m_sweep.localCenter.y,_=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=_,d=s.m_sweep.c.x+u,y=s.m_sweep.c.y+m,this.m_u2.Set(d-a,y-l),_=this.m_u2.Length(),_>t.b2_linearSlop?(this.m_u2.x*=1/_,this.m_u2.y*=1/_):this.m_u2.SetZero(),e=this.m_maxLength2-_,f=n.Max(f,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),y=-this.m_limitMass2*e,d=-y*this.m_u2.x,y=-y*this.m_u2.y,s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*y,s.m_sweep.a+=s.m_invI*(u*y-m*d),s.SynchronizeTransform()),f<t.b2_linearSlop},i.postDefs.push(function(){i.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),i.inherit(A,i.Dynamics.Joints.b2JointDef),A.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,A.b2PulleyJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new o,this.groundAnchorB=new o,this.localAnchorA=new o,this.localAnchorB=new o},A.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.maxLengthB=this.lengthB=this.maxLengthA=this.lengthA=0,this.ratio=1,this.collideConnected=!0},A.prototype.Initialize=function(t,e,i,s,n,o,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(i),this.groundAnchorB.SetV(s),this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(o),t=n.x-i.x,i=n.y-i.y,this.lengthA=Math.sqrt(t*t+i*i),i=o.x-s.x,s=o.y-s.y,this.lengthB=Math.sqrt(i*i+s*s),this.ratio=r,r=this.lengthA+this.ratio*this.lengthB,this.maxLengthA=r-this.ratio*w.b2_minPulleyLength,this.maxLengthB=(r-w.b2_minPulleyLength)/this.ratio},i.inherit(C,i.Dynamics.Joints.b2Joint),C.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,C.b2RevoluteJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new r,this.impulse2=new o,this.reduced=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_impulse=new r,this.m_mass=new s},C.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},C.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},C.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},C.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},C.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},C.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},C.prototype.IsLimitEnabled=function(){return this.m_enableLimit};C.prototype.EnableLimit=function(t){this.m_enableLimit=t},C.prototype.GetLowerLimit=function(){return this.m_lowerAngle},C.prototype.GetUpperLimit=function(){return this.m_upperAngle},C.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},C.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},C.prototype.EnableMotor=function(t){this.m_enableMotor=t},C.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},C.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},C.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},C.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit},C.prototype.InitVelocityConstraints=function(e){var i,s=this.m_bodyA,o=this.m_bodyB,r=0;i=s.m_xf.R;var a=this.m_localAnchor1.x-s.m_sweep.localCenter.x,l=this.m_localAnchor1.y-s.m_sweep.localCenter.y;r=i.col1.x*a+i.col2.x*l,l=i.col1.y*a+i.col2.y*l,a=r,i=o.m_xf.R;var c=this.m_localAnchor2.x-o.m_sweep.localCenter.x,h=this.m_localAnchor2.y-o.m_sweep.localCenter.y;r=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=r,i=s.m_invMass,r=o.m_invMass;var u=s.m_invI,m=o.m_invI;if(this.m_mass.col1.x=i+r+l*l*u+h*h*m,this.m_mass.col2.x=-l*a*u-h*c*m,this.m_mass.col3.x=-l*u-h*m,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=i+r+a*a*u+c*c*m,this.m_mass.col3.y=a*u+c*m,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+m,this.m_motorMass=1/(u+m),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var _=o.m_sweep.a-s.m_sweep.a-this.m_referenceAngle;n.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=p.e_equalLimits:_<=this.m_lowerAngle?(this.m_limitState!=p.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atLowerLimit):_>=this.m_upperAngle?(this.m_limitState!=p.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atUpperLimit):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=p.e_inactiveLimit;e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x,_=this.m_impulse.y,s.m_linearVelocity.x-=i*e,s.m_linearVelocity.y-=i*_,s.m_angularVelocity-=u*(a*_-l*e+this.m_motorImpulse+this.m_impulse.z),o.m_linearVelocity.x+=r*e,o.m_linearVelocity.y+=r*_,o.m_angularVelocity+=m*(c*_-h*e+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},C.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,s=0,o=s=0,r=0,a=0,l=0,c=e.m_linearVelocity,h=e.m_angularVelocity,u=i.m_linearVelocity,m=i.m_angularVelocity,_=e.m_invMass,d=i.m_invMass,y=e.m_invI,f=i.m_invI;if(this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(o=this.m_motorMass*-(m-h-this.m_motorSpeed),r=this.m_motorImpulse,a=t.dt*this.m_maxMotorTorque,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+o,-a,a),o=this.m_motorImpulse-r,h-=y*o,m+=f*o),this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){t=e.m_xf.R,o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*o+t.col2.x*r,r=t.col1.y*o+t.col2.y*r,o=s,t=i.m_xf.R,a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y,s=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=s,t=u.x+-m*l-c.x- -h*r;var x=u.y+m*a-c.y-h*o;this.m_mass.Solve33(this.impulse3,-t,-x,-(m-h)),this.m_limitState==p.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==p.e_atLowerLimit?(s=this.m_impulse.z+this.impulse3.z)<0&&(this.m_mass.Solve22(this.reduced,-t,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0):this.m_limitState==p.e_atUpperLimit&&(s=this.m_impulse.z+this.impulse3.z)>0&&(this.m_mass.Solve22(this.reduced,-t,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0),c.x-=_*this.impulse3.x,c.y-=_*this.impulse3.y,h-=y*(o*this.impulse3.y-r*this.impulse3.x+this.impulse3.z),u.x+=d*this.impulse3.x,u.y+=d*this.impulse3.y,m+=f*(a*this.impulse3.y-l*this.impulse3.x+this.impulse3.z)}else t=e.m_xf.R,o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*o+t.col2.x*r,r=t.col1.y*o+t.col2.y*r,o=s,t=i.m_xf.R,a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y,s=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=s,this.m_mass.Solve22(this.impulse2,-(u.x+-m*l-c.x- -h*r),-(u.y+m*a-c.y-h*o)),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,c.x-=_*this.impulse2.x,c.y-=_*this.impulse2.y,h-=y*(o*this.impulse2.y-r*this.impulse2.x),u.x+=d*this.impulse2.x,u.y+=d*this.impulse2.y,m+=f*(a*this.impulse2.y-l*this.impulse2.x);e.m_linearVelocity.SetV(c),e.m_angularVelocity=h,i.m_linearVelocity.SetV(u),i.m_angularVelocity=m},C.prototype.SolvePositionConstraints=function(){var e,i=0,s=this.m_bodyA,o=this.m_bodyB,r=0,a=e=0,l=0,c=0;if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){i=o.m_sweep.a-s.m_sweep.a-this.m_referenceAngle;var h=0;this.m_limitState==p.e_equalLimits?(i=n.Clamp(i-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),h=-this.m_motorMass*i,r=n.Abs(i)):this.m_limitState==p.e_atLowerLimit?(i-=this.m_lowerAngle,r=-i,i=n.Clamp(i+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),h=-this.m_motorMass*i):this.m_limitState==p.e_atUpperLimit&&(r=i-=this.m_upperAngle,i=n.Clamp(i-t.b2_angularSlop,0,t.b2_maxAngularCorrection),h=-this.m_motorMass*i),s.m_sweep.a-=s.m_invI*h,o.m_sweep.a+=o.m_invI*h,s.SynchronizeTransform(),o.SynchronizeTransform()}e=s.m_xf.R,h=this.m_localAnchor1.x-s.m_sweep.localCenter.x,i=this.m_localAnchor1.y-s.m_sweep.localCenter.y,a=e.col1.x*h+e.col2.x*i,i=e.col1.y*h+e.col2.y*i,h=a,e=o.m_xf.R;var u=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=a,l=o.m_sweep.c.x+u-s.m_sweep.c.x-h,c=o.m_sweep.c.y+m-s.m_sweep.c.y-i;var _=l*l+c*c;e=Math.sqrt(_),a=s.m_invMass;var d=o.m_invMass,y=s.m_invI,f=o.m_invI,x=10*t.b2_linearSlop;return _>x*x&&(_=1/(a+d),l=_*-l,c=_*-c,s.m_sweep.c.x-=.5*a*l,s.m_sweep.c.y-=.5*a*c,o.m_sweep.c.x+=.5*d*l,o.m_sweep.c.y+=.5*d*c,l=o.m_sweep.c.x+u-s.m_sweep.c.x-h,c=o.m_sweep.c.y+m-s.m_sweep.c.y-i),this.K1.col1.x=a+d,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=a+d,this.K2.col1.x=y*i*i,this.K2.col2.x=-y*h*i,this.K2.col1.y=-y*h*i,this.K2.col2.y=y*h*h,this.K3.col1.x=f*m*m,this.K3.col2.x=-f*u*m,this.K3.col1.y=-f*u*m,this.K3.col2.y=f*u*u,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(C.tImpulse,-l,-c),l=C.tImpulse.x,c=C.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*l,s.m_sweep.c.y-=s.m_invMass*c,s.m_sweep.a-=s.m_invI*(h*c-i*l),o.m_sweep.c.x+=o.m_invMass*l,o.m_sweep.c.y+=o.m_invMass*c,o.m_sweep.a+=o.m_invI*(u*c-m*l),s.SynchronizeTransform(),o.SynchronizeTransform(),e<=t.b2_linearSlop&&r<=t.b2_angularSlop},i.postDefs.push(function(){i.Dynamics.Joints.b2RevoluteJoint.tImpulse=new o}),i.inherit(M,i.Dynamics.Joints.b2JointDef),M.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,M.b2RevoluteJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},M.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.motorSpeed=this.maxMotorTorque=this.upperAngle=this.lowerAngle=this.referenceAngle=0,this.enableMotor=this.enableLimit=!1},M.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},i.inherit(I,i.Dynamics.Joints.b2Joint),I.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,I.b2WeldJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_impulse=new r,this.m_mass=new s},I.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},I.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},I.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},I.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},I.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new s},I.prototype.InitVelocityConstraints=function(t){var e,i=0,s=this.m_bodyA,n=this.m_bodyB;e=s.m_xf.R;var o=this.m_localAnchorA.x-s.m_sweep.localCenter.x,r=this.m_localAnchorA.y-s.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*r,r=e.col1.y*o+e.col2.y*r,o=i,e=n.m_xf.R;var a=this.m_localAnchorB.x-n.m_sweep.localCenter.x,l=this.m_localAnchorB.y-n.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i,e=s.m_invMass,i=n.m_invMass;var c=s.m_invI,h=n.m_invI;this.m_mass.col1.x=e+i+r*r*c+l*l*h,this.m_mass.col2.x=-r*o*c-l*a*h,this.m_mass.col3.x=-r*c-l*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=e+i+o*o*c+a*a*h,this.m_mass.col3.y=o*c+a*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+h,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,s.m_linearVelocity.x-=e*this.m_impulse.x,s.m_linearVelocity.y-=e*this.m_impulse.y,s.m_angularVelocity-=c*(o*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),n.m_linearVelocity.x+=i*this.m_impulse.x,n.m_linearVelocity.y+=i*this.m_impulse.y,n.m_angularVelocity+=h*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},I.prototype.SolveVelocityConstraints=function(){var t,e=0,i=this.m_bodyA,s=this.m_bodyB,n=i.m_linearVelocity,o=i.m_angularVelocity,a=s.m_linearVelocity,l=s.m_angularVelocity,c=i.m_invMass,h=s.m_invMass,u=i.m_invI,m=s.m_invI;t=i.m_xf.R;var _=this.m_localAnchorA.x-i.m_sweep.localCenter.x,p=this.m_localAnchorA.y-i.m_sweep.localCenter.y;e=t.col1.x*_+t.col2.x*p,p=t.col1.y*_+t.col2.y*p,_=e,t=s.m_xf.R;var d=this.m_localAnchorB.x-s.m_sweep.localCenter.x,y=this.m_localAnchorB.y-s.m_sweep.localCenter.y;e=t.col1.x*d+t.col2.x*y,y=t.col1.y*d+t.col2.y*y,d=e,t=a.x-l*y-n.x+o*p,e=a.y+l*d-n.y-o*_;var f=l-o,x=new r;this.m_mass.Solve33(x,-t,-e,-f),this.m_impulse.Add(x),n.x-=c*x.x,n.y-=c*x.y,o-=u*(_*x.y-p*x.x+x.z),a.x+=h*x.x,a.y+=h*x.y,l+=m*(d*x.y-y*x.x+x.z),i.m_angularVelocity=o,s.m_angularVelocity=l},I.prototype.SolvePositionConstraints=function(){var e,i=0,s=this.m_bodyA,o=this.m_bodyB;e=s.m_xf.R;var a=this.m_localAnchorA.x-s.m_sweep.localCenter.x,l=this.m_localAnchorA.y-s.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i,e=o.m_xf.R;var c=this.m_localAnchorB.x-o.m_sweep.localCenter.x,h=this.m_localAnchorB.y-o.m_sweep.localCenter.y;i=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=i,e=s.m_invMass,i=o.m_invMass;var u=s.m_invI,m=o.m_invI,_=o.m_sweep.c.x+c-s.m_sweep.c.x-a,p=o.m_sweep.c.y+h-s.m_sweep.c.y-l,d=o.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,y=10*t.b2_linearSlop,f=Math.sqrt(_*_+p*p),x=n.Abs(d);return f>y&&(u*=1,m*=1),this.m_mass.col1.x=e+i+l*l*u+h*h*m,this.m_mass.col2.x=-l*a*u-h*c*m,this.m_mass.col3.x=-l*u-h*m,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=e+i+a*a*u+c*c*m,this.m_mass.col3.y=a*u+c*m,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+m,y=new r,this.m_mass.Solve33(y,-_,-p,-d),s.m_sweep.c.x-=e*y.x,s.m_sweep.c.y-=e*y.y,s.m_sweep.a-=u*(a*y.y-l*y.x+y.z),o.m_sweep.c.x+=i*y.x,o.m_sweep.c.y+=i*y.y,o.m_sweep.a+=m*(c*y.y-h*y.x+y.z),s.SynchronizeTransform(),o.SynchronizeTransform(),f<=t.b2_linearSlop&&x<=t.b2_angularSlop},i.inherit(D,i.Dynamics.Joints.b2JointDef),D.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,D.b2WeldJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},D.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_weldJoint,this.referenceAngle=0},D.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=i.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_xformScale=this.m_fillAlpha=this.m_alpha=this.m_lineThickness=this.m_drawScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,i){if(e){var s=this.m_ctx,n=this.m_drawScale;for(s.beginPath(),s.strokeStyle=this._color(i.color,this.m_alpha),s.moveTo(t[0].x*n,t[0].y*n),i=1;i<e;i++)s.lineTo(t[i].x*n,t[i].y*n);s.lineTo(t[0].x*n,t[0].y*n),s.closePath(),s.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,i){if(e){var s=this.m_ctx,n=this.m_drawScale;for(s.beginPath(),s.strokeStyle=this._color(i.color,this.m_alpha),s.fillStyle=this._color(i.color,this.m_fillAlpha),s.moveTo(t[0].x*n,t[0].y*n),i=1;i<e;i++)s.lineTo(t[i].x*n,t[i].y*n);s.lineTo(t[0].x*n,t[0].y*n),s.closePath(),s.fill(),s.stroke()}},t.prototype.DrawCircle=function(t,e,i){if(e){var s=this.m_ctx,n=this.m_drawScale;s.beginPath(),s.strokeStyle=this._color(i.color,this.m_alpha),s.arc(t.x*n,t.y*n,e*n,0,2*Math.PI,!0),s.closePath(),s.stroke()}},t.prototype.DrawSolidCircle=function(t,e,i,s){if(e){var n=this.m_ctx,o=this.m_drawScale,r=t.x*o,a=t.y*o;n.moveTo(0,0),n.beginPath(),n.strokeStyle=this._color(s.color,this.m_alpha),n.fillStyle=this._color(s.color,this.m_fillAlpha),n.arc(r,a,e*o,0,2*Math.PI,!0),n.moveTo(r,a),n.lineTo((t.x+i.x*e)*o,(t.y+i.y*e)*o),n.closePath(),n.fill(),n.stroke()}},t.prototype.DrawSegment=function(t,e,i){var s=this.m_ctx,n=this.m_drawScale;s.strokeStyle=this._color(i.color,this.m_alpha),s.beginPath(),s.moveTo(t.x*n,t.y*n),s.lineTo(e.x*n,e.y*n),s.closePath(),s.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,i=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*i,(t.position.y+this.m_xformScale*t.R.col1.y)*i),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*i,(t.position.y+this.m_xformScale*t.R.col2.y)*i),e.closePath(),e.stroke()}}();var o;for(o=0;o<i.postDefs.length;++o)i.postDefs[o]();delete i.postDefs,window.Box2D=i},e8vu:function(t,e,i){var s=i("X6va")("meta"),n=i("BxvP"),o=i("yS17"),r=i("Gfzd").f,a=0,l=Object.isExtensible||function(){return!0},c=!i("wLcK")(function(){return l(Object.preventExtensions({}))}),h=function(t){r(t,s,{value:{i:"O"+ ++a,w:{}}})},u=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,s)){if(!l(t))return"F";if(!e)return"E";h(t)}return t[s].i},m=function(t,e){if(!o(t,s)){if(!l(t))return!0;if(!e)return!1;h(t)}return t[s].w},_=function(t){return c&&p.NEED&&l(t)&&!o(t,s)&&h(t),t},p=t.exports={KEY:s,NEED:!1,fastKey:u,getWeak:m,onFreeze:_}},ebIA:function(t,e,i){var s=i("i1Q6").document;t.exports=s&&s.documentElement},g31e:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},gjjs:function(t,e,i){var s=i("Gfzd"),n=i("zotD"),o=i("knrM");t.exports=i("6MLN")?Object.defineProperties:function(t,e){n(t);for(var i,r=o(e),a=r.length,l=0;a>l;)s.f(t,i=r[l++],e[i]);return t}},gojl:function(t,e,i){t.exports=i("akPY")},h6ac:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},"i+u+":function(t,e,i){"use strict";var s=i("lytE")(!0);i("uRfg")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=s(e,i),this._i+=t.length,{value:t,done:!1})})},i1Q6:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},ibPW:function(t,e,i){t.exports={default:i("Ky5l"),__esModule:!0}},knrM:function(t,e,i){var s=i("B9Lq"),n=i("KxjL");t.exports=Object.keys||function(t){return s(t,n)}},ky2m:function(t,e,i){i("BtHH"),t.exports=i("zKeE").Object.getPrototypeOf},lytE:function(t,e,i){var s=i("MpYs"),n=i("U72i");t.exports=function(t){return function(e,i){var o,r,a=String(n(e)),l=s(i),c=a.length;return l<0||l>=c?t?"":void 0:(o=a.charCodeAt(l),o<55296||o>56319||l+1===c||(r=a.charCodeAt(l+1))<56320||r>57343?t?a.charAt(l):o:t?a.slice(l,l+2):r-56320+(o-55296<<10)+65536)}}},mbLO:function(t,e,i){var s=i("U72i");t.exports=function(t){return Object(s(t))}},nFDa:function(t,e,i){i("i+u+"),i("COf8"),t.exports=i("ZxII").f("iterator")},"pv+l":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},rMkZ:function(t,e,i){var s=i("Wyka"),n=i("Ni5N").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return n(t)}catch(t){return r.slice()}};t.exports.f=function(t){return r&&"[object Window]"==o.call(t)?a(t):n(s(t))}},sHrU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){var n=i("GyB/"),o=i.n(n),r=i("LlWG"),a=i.n(r),l=i("BX4+"),c=i.n(l);/*!
 * @license CreateJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2015 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */
window.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,s=c.a&&c()(i)||i.__proto__;if(s){i[(e+="_")+"constructor"]=s.constructor;for(var n in s)i.hasOwnProperty(n)&&"function"==typeof s[n]&&(i[e+n]=s[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[t];return n&&this.removeEventListener(t,e,i),n=s[t],n?n.push(e):s[t]=[e],e},e.on=function(t,e,i,s,n,o){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),s&&t.remove()},o)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[t];if(n)for(var o=0,r=n.length;r>o;o++)if(n[o]==e){1==r?delete s[t]:n.splice(o,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var s=this._listeners;if(!(e||s&&s[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var n=this,o=[n];n.parent;)o.push(n=n.parent);var r,a=o.length;for(r=a-1;r>=0&&!t.propagationStopped;r--)o[r]._dispatchEvent(t,1+(0==r));for(r=1;a>r&&!t.propagationStopped;r++)o[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s=1==e?this._captureListeners:this._listeners;if(t&&s){var n=s[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,n=n.slice();for(var o=0;i>o&&!t.immediatePropagationStopped;o++){var r=n[o];r.handleEvent?r.handleEvent(t):r(t),t.removed&&(this.off(t.type,r,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{a()(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,s=t._tickTimes;if(!s||s.length<1)return-1;e=Math.min(s.length,e||0|t.getFPS());for(var n=0;e>n;n++)i+=s[n];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),s=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=s),t.hasEventListener("tick")){var n=new createjs.Event("tick"),o=t.maxDelta;n.delta=o&&s>o?o:s,n.paused=e,n.time=i,n.runTime=i-t._pausedTime,t.dispatchEvent(n)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s,n,o,r,a,l,c,h){this.Event_constructor(t,e,i),this.stageX=s,this.stageY=n,this.rawX=null==l?s:l,this.rawY=null==c?n:c,this.nativeEvent=o,this.pointerID=r,this.primary=!!a,this.relatedTarget=h}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{a()(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s,n,o){this.setValues(t,e,i,s,n,o)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,s,n,o){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==s?1:s,this.tx=n||0,this.ty=o||0,this},e.append=function(t,e,i,s,n,o){var r=this.a,a=this.b,l=this.c,c=this.d;return(1!=t||0!=e||0!=i||1!=s)&&(this.a=r*t+l*e,this.b=a*t+c*e,this.c=r*i+l*s,this.d=a*i+c*s),this.tx=r*n+l*o+this.tx,this.ty=a*n+c*o+this.ty,this},e.prepend=function(t,e,i,s,n,o){var r=this.a,a=this.c,l=this.tx;return this.a=t*r+i*this.b,this.b=e*r+s*this.b,this.c=t*a+i*this.d,this.d=e*a+s*this.d,this.tx=t*l+i*this.ty+n,this.ty=e*l+s*this.ty+o,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,s,n,o,r,a,l,c){if(o%360)var h=o*t.DEG_TO_RAD,u=Math.cos(h),m=Math.sin(h);else u=1,m=0;return r||a?(r*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),e,i),this.append(u*s,m*s,-m*n,u*n,0,0)):this.append(u*s,m*s,-m*n,u*n,e,i),(l||c)&&(this.tx-=l*this.a+c*this.c,this.ty-=l*this.b+c*this.d),this},e.prependTransform=function(e,i,s,n,o,r,a,l,c){if(o%360)var h=o*t.DEG_TO_RAD,u=Math.cos(h),m=Math.sin(h);else u=1,m=0;return(l||c)&&(this.tx-=l,this.ty-=c),r||a?(r*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(u*s,m*s,-m*n,u*n,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),e,i)):this.prepend(u*s,m*s,-m*n,u*n,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),s=Math.sin(e),n=this.a,o=this.b;return this.a=n*i+this.c*s,this.b=o*i+this.d*s,this.c=-n*s+this.c*i,this.d=-o*s+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a);return 1e-5>Math.abs(1-i/s)?(e.rotation=s/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=s/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s,n){this.setValues(t,e,i,s,n)}var e=t.prototype;e.setValues=function(t,e,i,s,n){return this.visible=null==t||!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=s,this.matrix=n||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,i,s,n){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&t,n&&this.matrix.appendMatrix(n),this},e.prepend=function(t,e,i,s,n){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&t,n&&this.matrix.prependMatrix(n),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=t}(),this.createjs=this.createjs||{},function(){function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s){this.setValues(t,e,i,s)}var e=t.prototype;e.setValues=function(t,e,i,s){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this},e.extend=function(t,e,i,s){return i=i||0,s=s||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+s>this.y+this.height&&(this.height=e+s-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,s){return this.x-=e,this.y-=t,this.width+=e+s,this.height+=t+i,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,s){return i=i||0,s=s||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+s<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,s=e.y,n=i+e.width,o=s+e.height;return this.x>i&&(i=this.x),this.y>s&&(s=this.y),this.x+this.width<n&&(n=this.x+this.width),this.y+this.height<o&&(o=this.y+this.height),i>=n||s>=o?null:new t(i,s,n-i,o-s)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s,n,o,r){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==s?"down":s,this.play=n,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),o&&(r&&(o.actionsEnabled=!1,o.gotoAndStop&&o.gotoAndStop(r)),t.hitArea=o))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},e.getEnabled=function(){return this._enabled};try{a()(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,s=t.type;"mousedown"==s?(this._isPressed=!0,e=this.downLabel):"pressup"==s?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==s?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=s||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{a()(e,{animations:{get:e.getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,s,n;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(n=this._images=[],e=0;i>e;e++){var o=t.images[e];if("string"==typeof o){var r=o;o=document.createElement("img"),o.src=r}n.push(o),o.getContext||o.naturalWidth||(this._loadCount++,this.complete=!1,function(t,e){o.onload=function(){t._handleImageLoad(e)}}(this,r),function(t,e){o.onerror=function(){t._handleImageError(e)}}(this,r))}if(null==t.frames);else if(Array.isArray(t.frames))for(this._frames=[],n=t.frames,e=0,i=n.length;i>e;e++){var a=n[e];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new createjs.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else s=t.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=t.animations)){this._data={};var l;for(l in s){var c={name:l},h=s[l];if("number"==typeof h)n=c.frames=[h];else if(Array.isArray(h))if(1==h.length)c.frames=[h[0]];else for(c.speed=h[3],c.next=h[2],n=c.frames=[],e=h[0];e<=h[1];e++)n.push(e);else{c.speed=h.speed,c.next=h.next;var u=h.frames;n=c.frames="number"==typeof u?[u]:u.slice(0)}(!0===c.next||void 0===c.next)&&(c.next=l),(!1===c.next||n.length<2&&c.next==l)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(l),this._data[l]=c}}}},e._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var e=new createjs.Event("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,s=this._frameHeight,n=this._spacing,o=this._margin;t:for(var r=0,a=this._images;r<a.length;r++)for(var l=a[r],c=l.width,h=l.height,u=o;h-o-s>=u;){for(var m=o;c-o-i>=m;){if(e>=t)break t;e++,this._frames.push({image:l,rect:new createjs.Rectangle(m,u,i,s),regX:this._regX,regY:this._regY}),m+=i+n}u+=s+n}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,i=t;t.getRGB=function(t,e,i,s){return null!=t&&null==i&&(s=e,i=255&t,e=t>>8&255,t=t>>16&255),null==s?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+s+")"},t.getHSL=function(t,e,i,s){return null==s?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+s+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var s=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");s.getContext&&(t._ctx=s.getContext("2d"),s.width=s.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{a()(e,{instructions:{get:e.getInstructions}})}catch(t){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,s=this._storeIndex,n=i.length;n>s;s++)i[s].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,s=this._storeIndex,n=i.length;n>s;s++)!1!==(e=i[s]).path&&e.exec(t)},e.moveTo=function(t,e){return this.append(new i.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new i.LineTo(t,e))},e.arcTo=function(t,e,s,n,o){return this.append(new i.ArcTo(t,e,s,n,o))},e.arc=function(t,e,s,n,o,r){return this.append(new i.Arc(t,e,s,n,o,r))},e.quadraticCurveTo=function(t,e,s,n){return this.append(new i.QuadraticCurveTo(t,e,s,n))},e.bezierCurveTo=function(t,e,s,n,o,r){return this.append(new i.BezierCurveTo(t,e,s,n,o,r))},e.rect=function(t,e,s,n){return this.append(new i.Rect(t,e,s,n))},e.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new i.Fill(t):null)},e.beginLinearGradientFill=function(t,e,s,n,o,r){return this._setFill((new i.Fill).linearGradient(t,e,s,n,o,r))},e.beginRadialGradientFill=function(t,e,s,n,o,r,a,l){return this._setFill((new i.Fill).radialGradient(t,e,s,n,o,r,a,l))},e.beginBitmapFill=function(t,e,s){return this._setFill(new i.Fill(null,s).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,s,n,o){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(t,e,s,n,o),this._stroke&&(this._stroke.ignoreScale=o),this._strokeIgnoreScale=o,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new i.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new i.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,s,n,o,r){return this._setStroke((new i.Stroke).linearGradient(t,e,s,n,o,r))},e.beginRadialGradientStroke=function(t,e,s,n,o,r,a,l){return this._setStroke((new i.Stroke).radialGradient(t,e,s,n,o,r,a,l))},e.beginBitmapStroke=function(t,e){return this._setStroke((new i.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,s,n){return this.drawRoundRectComplex(t,e,i,s,n,n,n,n)},e.drawRoundRectComplex=function(t,e,s,n,o,r,a,l){return this.append(new i.RoundRect(t,e,s,n,o,r,a,l))},e.drawCircle=function(t,e,s){return this.append(new i.Circle(t,e,s))},e.drawEllipse=function(t,e,s,n){return this.append(new i.Ellipse(t,e,s,n))},e.drawPolyStar=function(t,e,s,n,o,r){return this.append(new i.PolyStar(t,e,s,n,o,r))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],s=[2,2,4,6,0],n=0,o=e.length,r=[],a=0,l=0,c=t.BASE_64;o>n;){var h=e.charAt(n),u=c[h],m=u>>3,_=i[m];if(!_||3&u)throw"bad path data (@"+n+"): "+h;var p=s[m];m||(a=l=0),r.length=0,n++;for(var d=2+(u>>2&1),y=0;p>y;y++){var f=c[e.charAt(n)],x=f>>5?-1:1;f=(31&f)<<6|c[e.charAt(n+1)],3==d&&(f=f<<6|c[e.charAt(n+2)]),f=x*f/10,y%2?a=f+=a:l=f+=l,r[y]=f,n+=d}_.apply(this,r)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,s=this._activeInstructions,n=this._commitIndex;if(this._dirty&&s.length){i.length=n,i.push(t.beginCmd);var o=s.length,r=i.length;i.length=r+o;for(var a=0;o>a;a++)i[a+r]=s[a];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}e&&(s.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(i.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(i.ArcTo=function(t,e,i,s,n){this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=n}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(t,e,i,s,n,o){this.x=t,this.y=e,this.radius=i,this.startAngle=s,this.endAngle=n,this.anticlockwise=!!o}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(t,e,i,s){this.cpx=t,this.cpy=e,this.x=i,this.y=s}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(t,e,i,s,n,o){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=s,this.x=n,this.y=o}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(i.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},e=(i.Fill=function(t,e){this.style=t,this.matrix=e}).prototype,e.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,s,n,o,r){for(var a=this.style=t._ctx.createLinearGradient(s,n,o,r),l=0,c=e.length;c>l;l++)a.addColorStop(i[l],e[l]);return a.props={colors:e,ratios:i,x0:s,y0:n,x1:o,y1:r,type:"linear"},this},e.radialGradient=function(e,i,s,n,o,r,a,l){for(var c=this.style=t._ctx.createRadialGradient(s,n,o,r,a,l),h=0,u=e.length;u>h;h++)c.addColorStop(i[h],e[h]);return c.props={colors:e,ratios:i,x0:s,y0:n,r0:o,x1:r,y1:a,r1:l,type:"radial"},this},e.bitmap=function(e,i){if(e.naturalWidth||e.getContext||e.readyState>=2){(this.style=t._ctx.createPattern(e,i||"")).props={image:e,repetition:i,type:"bitmap"}}return this},e.path=!1,e=(i.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype,e.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=i.Fill.prototype.linearGradient,e.radialGradient=i.Fill.prototype.radialGradient,e.bitmap=i.Fill.prototype.bitmap,e.path=!1,e=(i.StrokeStyle=function(t,e,i,s,n){this.width=t,this.caps=e,this.joints=i,this.miterLimit=s,this.ignoreScale=n}).prototype,e.exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit,e.ignoreScale=null!=this.ignoreScale&&this.ignoreScale},e.path=!1,(i.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||i.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},i.StrokeDash.EMPTY_SEGMENTS=[],(i.RoundRect=function(t,e,i,s,n,o,r,a){this.x=t,this.y=e,this.w=i,this.h=s,this.radiusTL=n,this.radiusTR=o,this.radiusBR=r,this.radiusBL=a}).prototype.exec=function(t){var e=(c>l?l:c)/2,i=0,s=0,n=0,o=0,r=this.x,a=this.y,l=this.w,c=this.h,h=this.radiusTL,u=this.radiusTR,m=this.radiusBR,_=this.radiusBL;0>h&&(h*=i=-1),h>e&&(h=e),0>u&&(u*=s=-1),u>e&&(u=e),0>m&&(m*=n=-1),m>e&&(m=e),0>_&&(_*=o=-1),_>e&&(_=e),t.moveTo(r+l-u,a),t.arcTo(r+l+u*s,a-u*s,r+l,a+u,u),t.lineTo(r+l,a+c-m),t.arcTo(r+l+m*n,a+c+m*n,r+l-m,a+c,m),t.lineTo(r+_,a+c),t.arcTo(r-_*o,a+c+_*o,r,a+c-_,_),t.lineTo(r,a+h),t.arcTo(r-h*i,a-h*i,r+h,a,h),t.closePath()},(i.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.w,n=this.h,o=.5522848,r=s/2*o,a=n/2*o,l=e+s,c=i+n,h=e+s/2,u=i+n/2;t.moveTo(e,u),t.bezierCurveTo(e,u-a,h-r,i,h,i),t.bezierCurveTo(h+r,i,l,u-a,l,u),t.bezierCurveTo(l,u+a,h+r,c,h,c),t.bezierCurveTo(h-r,c,e,u+a,e,u)},(i.PolyStar=function(t,e,i,s,n,o){this.x=t,this.y=e,this.radius=i,this.sides=s,this.pointSize=n,this.angle=o}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.radius,n=(this.angle||0)/180*Math.PI,o=this.sides,r=1-(this.pointSize||0),a=Math.PI/o;t.moveTo(e+Math.cos(n)*s,i+Math.sin(n)*s);for(var l=0;o>l;l++)n+=a,1!=r&&t.lineTo(e+Math.cos(n)*s*r,i+Math.sin(n)*s*r),n+=a,t.lineTo(e+Math.cos(n)*s,i+Math.sin(n)*s);t.closePath()},t.beginCmd=new i.BeginPath,createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var e=createjs.extend(t,createjs.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{a()(e,{stage:{get:e.getStage}})}catch(t){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var s=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/s,i.height/s),!0},e.updateContext=function(e){var i=this,s=i.mask,n=i._props.matrix;s&&s.graphics&&!s.graphics.isEmpty()&&(s.getMatrix(n),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),s.graphics.drawAsPath(e),e.clip(),n.invert(),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)),this.getMatrix(n);var o=n.tx,r=n.ty;t._snapToPixelEnabled&&i.snapToPixel&&(o=o+(0>o?-.5:.5)|0,r=r+(0>r?-.5:.5)|0),e.transform(n.a,n.b,n.c,n.d,o,r),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,i,s,n){n=n||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=s,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=n,this.updateCache()},e.updateCache=function(e){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var s=this._cacheScale,n=this._cacheOffsetX*s,o=this._cacheOffsetY*s,r=this._cacheWidth,a=this._cacheHeight,l=i.getContext("2d"),c=this._getFilterBounds();n+=this._filterOffsetX=c.x,o+=this._filterOffsetY=c.y,r=Math.ceil(r*s)+c.width,a=Math.ceil(a*s)+c.height,r!=i.width||a!=i.height?(i.width=r,i.height=a):e||l.clearRect(0,0,r+1,a+1),l.save(),l.globalCompositeOperation=e,l.setTransform(s,0,0,s,-n,-o),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new createjs.Point)},e.globalToLocal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new createjs.Point)},e.localToLocal=function(t,e,i,s){return s=this.localToGlobal(t,e,s),i.globalToLocal(s.x,s.y,s)},e.setTransform=function(t,e,i,s,n,o,r,a,l){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=n||0,this.skewX=o||0,this.skewY=r||0,this.regX=a||0,this.regY=l||0,this},e.getMatrix=function(t){var e=this,i=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;var e=this,i=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t},e.hitTest=function(e,i){var s=t._hitTestContext;s.setTransform(1,0,0,1,-e,-i),this.draw(s);var n=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),n},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,s){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).setValues(t,e,i,s)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,s=this.cacheCanvas.height,n=0;t>n;n++)this.filters[n].applyFilter(e,0,0,i,s)},e._getFilterBounds=function(t){var e,i=this.filters,s=this._rectangle.setValues(0,0,0,0);if(!i||!(e=i.length))return s;for(var n=0;e>n;n++){var o=this.filters[n];o.getBounds&&o.getBounds(s)}return s},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var s=t.x,n=t.y,o=t.width,r=t.height,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(s||n)&&a.appendTransform(0,0,1,1,0,0,0,-s,-n),e&&a.prependMatrix(e);var l=o*a.a,c=o*a.b,h=r*a.c,u=r*a.d,m=a.tx,_=a.ty,p=m,d=m,y=_,f=_;return(s=l+m)<p?p=s:s>d&&(d=s),(s=l+h+m)<p?p=s:s>d&&(d=s),(s=h+m)<p?p=s:s>d&&(d=s),(n=c+_)<y?y=n:n>f&&(f=n),(n=c+u+_)<y?y=n:n>f&&(f=n),(n=u+_)<y?y=n:n>f&&(f=n),t.setValues(p,y,d-p,f-y)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,s=e.length;s>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=createjs.extend(t,createjs.DisplayObject);e.getNumChildren=function(){return this.children.length};try{a()(e,{numChildren:{get:e.getNumChildren}})}catch(t){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),s=0,n=i.length;n>s;s++){var o=i[s];o.isVisible()&&(t.save(),o.updateContext(t),o.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,s=arguments[i-1];if(0>s||s>this.children.length)return arguments[i-2];if(i>2){for(var n=0;i-1>n;n++)this.addChildAt(arguments[n],s+n);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;e>s;s++)i=i&&this.removeChild(arguments[s]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],s=0;e>s;s++)i[s]=arguments[s];i.sort(function(t,e){return e-t});for(var n=!0,s=0;e>s;s++)n=n&&this.removeChildAt(i[s]);return n}if(0>t||t>this.children.length-1)return!1;var o=this.children[t];return o&&(o.parent=null),this.children.splice(t,1),o.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,s=e.length;s>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,s=i[t],n=i[e];s&&n&&(i[t]=n,i[e]=s)},e.swapChildren=function(t,e){for(var i,s,n=this.children,o=0,r=n.length;r>o&&(n[o]==t&&(i=o),n[o]==e&&(s=o),null==i||null==s);o++);o!=r&&(n[i]=e,n[s]=t)},e.setChildIndex=function(t,e){var i=this.children,s=i.length;if(!(t.parent!=this||0>e||e>=s)){for(var n=0;s>n&&i[n]!=t;n++);n!=s&&n!=e&&(i.splice(n,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var s=[],n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,s,i>0,1==i),s},e.getObjectUnderPoint=function(t,e,i){var s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,s=this.children.length;s>i;i++){var n=this.children[i].clone(!0);n.parent=t,e.push(n)}},e._getObjectsUnderPoint=function(e,i,s,n,o,r){if(!(r=r||0)&&!this._testMask(this,e,i))return null;var a,l=createjs.DisplayObject._hitTestContext;o=o||n&&this._hasMouseEventListener();for(var c=this.children,h=c.length,u=h-1;u>=0;u--){var m=c[u],_=m.hitArea;if(m.visible&&(_||m.isVisible())&&(!n||m.mouseEnabled)&&(_||this._testMask(m,e,i)))if(!_&&m instanceof t){var p=m._getObjectsUnderPoint(e,i,s,n,o,r+1);if(!s&&p)return n&&!this.mouseChildren?this:p}else{if(n&&!o&&!m._hasMouseEventListener())continue;var d=m.getConcatenatedDisplayProps(m._props);if(a=d.matrix,_&&(a.appendMatrix(_.getMatrix(_._props.matrix)),d.alpha=_.alpha),l.globalAlpha=d.alpha,l.setTransform(a.a,a.b,a.c,a.d,a.tx-e,a.ty-i),(_||m).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!s)return n&&!this.mouseChildren?this:m;s.push(m)}}return null},e._testMask=function(t,e,i){var s=t.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var n=this._props.matrix,o=t.parent;n=o?o.getConcatenatedMatrix(n):n.identity(),n=s.getMatrix(s._props.matrix).prependMatrix(n);var r=createjs.DisplayObject._hitTestContext;return r.setTransform(n.a,n.b,n.c,n.d,n.tx-e,n.ty-i),s.graphics.drawAsPath(r),r.fillStyle="#000",r.fill(),!!this._testHit(r)&&(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),!0)},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var s=this._props.matrix;s=e?s.identity():this.getMatrix(s),t&&s.prependMatrix(t);for(var n=this.children.length,o=null,r=0;n>r;r++){var a=this.children[r];a.visible&&(i=a._getBounds(s))&&(o?o.extend(i.x,i.y,i.width,i.height):o=i.clone())}return o},createjs.Container=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{a()(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),!1!==this.dispatchEvent("drawstart",!1,!0))){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&!1!==this.dispatchEvent("tickstart",!1,!0)){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,s=this.canvas.getContext("2d"),n=this.canvas.width,o=this.canvas.height;if(t){i=s.getImageData(0,0,n,o);var r=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=t,s.fillRect(0,0,n,o)}var a=this.canvas.toDataURL(e||"image/png");return t&&(s.putImageData(i,0,0),s.globalCompositeOperation=r),a},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,s=this._eventListeners;if(!t&&s){for(e in s)i=s[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!s&&this.canvas){var n=window.addEventListener?window:document,o=this;s=this._eventListeners={},s.mouseup={t:n,f:function(t){o._handleMouseUp(t)}},s.mousemove={t:n,f:function(t){o._handleMouseMove(t)}},s.dblclick={t:this.canvas,f:function(t){o._handleDoubleClick(t)}},s.mousedown={t:this.canvas,f:function(t){o._handleMouseDown(t)}};for(e in s)i=s[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,o=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),r=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),a=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),l=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+i+o,right:e.right+i-a,top:e.top+s+r,bottom:e.bottom+s-l}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,s,n){if((!this._prevStage||void 0!==n)&&this.canvas){var o=this._nextStage,r=this._getPointerData(t),a=r.inBounds;this._updatePointerPosition(t,e,i,s),(a||r.inBounds||this.mouseMoveOutside)&&(-1===t&&r.inBounds==!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,r,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,r,e),this._dispatchMouseEvent(r.target,"pressmove",!0,t,r,e)),o&&o._handlePointerMove(t,e,i,s,null)}},e._updatePointerPosition=function(t,e,i,s){var n=this._getElementRect(this.canvas);i-=n.left,s-=n.top;var o=this.canvas.width,r=this.canvas.height;i/=(n.right-n.left)/o,s/=(n.bottom-n.top)/r;var a=this._getPointerData(t);(a.inBounds=i>=0&&s>=0&&o-1>=i&&r-1>=s)?(a.x=i,a.y=s):this.mouseMoveOutside&&(a.x=0>i?0:i>o-1?o-1:i,a.y=0>s?0:s>r-1?r-1:s),a.posEvtObj=e,a.rawX=i,a.rawY=s,(t===this._primaryPointerID||-1===t)&&(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,s){var n=this._nextStage,o=this._getPointerData(t);if(!this._prevStage||void 0!==s){var r=null,a=o.target;s||!a&&!n||(r=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,o,e,r),o.down=!1),r==a&&this._dispatchMouseEvent(a,"click",!0,t,o,e),this._dispatchMouseEvent(a,"pressup",!0,t,o,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):o.target=null,n&&n._handlePointerUp(t,e,i,s||r&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,s,n){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=s&&this._updatePointerPosition(t,e,i,s);var o=null,r=this._nextStage,a=this._getPointerData(t);n||(o=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,o),a.down=!0),this._dispatchMouseEvent(o,"mousedown",!0,t,a,e),r&&r._handlePointerDown(t,e,i,s,n||o&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var s=this._nextStage;if(!this._mouseOverIntervalID)return void(s&&s._testMouseOver(t,e,i));var n=this._getPointerData(-1);if(n&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var o,r,a,l=n.posEvtObj,c=i||l&&l.target==this.canvas,h=null,u=-1,m="";!e&&(t||this.mouseInBounds&&c)&&(h=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var _=this._mouseOverTarget||[],p=_[_.length-1],d=this._mouseOverTarget=[];for(o=h;o;)d.unshift(o),m||(m=o.cursor),o=o.parent;for(this.canvas.style.cursor=m,!e&&i&&(i.canvas.style.cursor=m),r=0,a=d.length;a>r&&d[r]==_[r];r++)u=r;for(p!=h&&this._dispatchMouseEvent(p,"mouseout",!0,-1,n,l,h),r=_.length-1;r>u;r--)this._dispatchMouseEvent(_[r],"rollout",!1,-1,n,l,h);for(r=d.length-1;r>u;r--)this._dispatchMouseEvent(d[r],"rollover",!1,-1,n,l,p);p!=h&&this._dispatchMouseEvent(h,"mouseover",!0,-1,n,l,p),s&&s._testMouseOver(t,e||h&&this,i||c&&this)}}},e._handleDoubleClick=function(t,e){var i=null,s=this._nextStage,n=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(n.x,n.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,n,t)),s&&s._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,s,n,o,r){if(t&&(i||t.hasEventListener(e))){var a=new createjs.MouseEvent(e,i,!1,n.x,n.y,o,s,s===this._primaryPointerID||-1===s,n.rawX,n.rawY,r);t.dispatchEvent(a)}},createjs.Stage=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,s=this.sourceRect;if(s){var n=s.x,o=s.y,r=n+s.width,a=o+s.height,l=0,c=0,h=i.width,u=i.height;0>n&&(l-=n,n=0),r>h&&(r=h),0>o&&(c-=o,o=0),a>u&&(a=u),t.drawImage(i,n,o,r-n,a-o,l,c,r-n,a-o)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e;return e&&(e.naturalWidth||e.getContext||e.readyState>=2)?this._rectangle.setValues(0,0,i.width,i.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var s=i.rect;return s.width&&s.height&&t.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,s=this.paused,n=this._currentFrame;if(i){var o=i.speed||1,r=this.currentAnimationFrame;if(e=i.frames.length,r+t*o>=e){var a=i.next;if(this._dispatchAnimationEnd(i,n,s,a,e-1))return;if(a)return this._goto(a,t-(e-r)/o);this.paused=!0,r=i.frames.length-1}else r+=t*o;this.currentAnimationFrame=r,this._currentFrame=i.frames[0|r]}else if(n=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),n>=e&&e>0&&!this._dispatchAnimationEnd(i,n,s,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();n=0|this._currentFrame,this.currentFrame!=n&&(this.currentFrame=n,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,s,n){var o=t?t.name:null;if(this.hasEventListener("animationend")){var r=new createjs.Event("animationend");r.name=o,r.next=s,this.dispatchEvent(r)}var a=this._animation!=t||this._currentFrame!=e;return a||i||!this.paused||(this.currentAnimationFrame=n,a=!0),a},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),this.graphics=t||new createjs.Graphics}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t,this),!0)},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=createjs.extend(t,createjs.DisplayObject),i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""===this.text)return null;var i=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,n=s*t.H_OFFSETS[this.textAlign||"left"],o=this.lineHeight||this.getMeasuredLineHeight(),r=o*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(n,r,s,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,s){var n=!!e;n||(e=t._workingContext,e.save(),this._prepContext(e));for(var o=this.lineHeight||this.getMeasuredLineHeight(),r=0,a=0,l=String(this.text).split(/(?:\r\n|\r|\n)/),c=0,h=l.length;h>c;c++){var u=l[c],m=null;if(null!=this.lineWidth&&(m=e.measureText(u).width)>this.lineWidth){var _=u.split(/(\s)/);u=_[0],m=e.measureText(u).width;for(var p=1,d=_.length;d>p;p+=2){var y=e.measureText(_[p]+_[p+1]).width;m+y>this.lineWidth?(n&&this._drawTextLine(e,u,a*o),s&&s.push(u),m>r&&(r=m),u=_[p+1],m=e.measureText(u).width,a++):(u+=_[p]+_[p+1],m+=y)}}n&&this._drawTextLine(e,u,a*o),s&&s.push(u),i&&null==m&&(m=e.measureText(u).width),m>r&&(r=m),a++}return i&&(i.width=r,i.height=a*o),n||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var s=this._prepContext(i).measureText(e).width;return i.restore(),s},createjs.Text=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=createjs.extend(t,createjs.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&s.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,i=0,s=0,n=this._oldProps,o=!1,r=this.spaceWidth,a=this.lineHeight,l=this.spriteSheet,c=t._spritePool,h=this.children,u=0,m=h.length;for(var _ in n)n[_]!=this[_]&&(n[_]=this[_],o=!0);if(o){var p=!!this._getFrame(" ",l);p||r||(r=this._getSpaceWidth(l)),a||(a=this._getLineHeight(l));for(var d=0,y=this.text.length;y>d;d++){var f=this.text.charAt(d);if(" "!=f||p)if("\n"!=f&&"\r"!=f){var x=this._getFrameIndex(f,l);null!=x&&(m>u?e=h[u]:(h.push(e=c.length?c.pop():new createjs.Sprite),e.parent=this,m++),e.spriteSheet=l,e.gotoAndStop(x),e.x=i,e.y=s,u++,i+=e.getBounds().width+this.letterSpacing)}else"\r"==f&&"\n"==this.text.charAt(d+1)&&d++,i=0,s+=a;else i+=r}for(;m>u;)c.push(e=h.pop()),e.parent=null,m--;c.length>t.maxPoolSize&&(c.length=t.maxPoolSize)}},createjs.BitmapText=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(e,i,s,n){this.Container_constructor(),!t.inited&&t.init(),this.mode=e||t.INDEPENDENT,this.startPosition=i||0,this.loop=s,this.currentFrame=0,this.timeline=new createjs.Timeline(null,n,{paused:!0,position:i,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var i=createjs.extend(t,createjs.Container);t.INDEPENDENT="independent",t.SINGLE_FRAME="single",t.SYNCHED="synched",t.inited=!1,t.init=function(){t.inited||(e.install(),t.inited=!0)},i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},i.getDuration=function(){return this.timeline.duration};try{a()(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel},totalFrames:{get:i.getDuration},duration:{get:i.getDuration}})}catch(t){}i.initialize=t,i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this._updateTimeline(),this.Container_draw(t,e),!0)},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},i.gotoAndStop=function(t){this.paused=!0,this._goto(t)},i.advance=function(e){var i=t.INDEPENDENT;if(this.mode==i){for(var s=this,n=s.framerate;(s=s.parent)&&null==n;)s.mode==i&&(n=s._framerate);this._framerate=n;var o=null!=n&&-1!=n&&null!=e?e/(1e3/n)+this._t:1,r=0|o;for(this._t=o-r;!this.paused&&r--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},i.clone=function(){throw"MovieClip cannot be cloned."},i.toString=function(){return"[MovieClip (name="+this.name+")]"},i._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},i._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},i._updateTimeline=function(){var e=this.timeline,i=this.mode!=t.INDEPENDENT;e.loop=null==this.loop||this.loop;var s=i?this.startPosition+(this.mode==t.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,n=i||!this.actionsEnabled?createjs.Tween.NONE:null;if(this.currentFrame=e._calcPosition(s),e.setPosition(s,n),this._prevPosition=e._prevPosition,this._prevPos!=e._prevPos){this.currentFrame=this._prevPos=e._prevPos;for(var o in this._managed)this._managed[o]=1;for(var r=e._tweens,a=0,l=r.length;l>a;a++){var c=r[a],h=c._target;if(h!=this&&!c.passive){var u=c._stepPosition;h instanceof createjs.DisplayObject?this._addManagedChild(h,u):this._setState(h.state,u)}}var m=this.children;for(a=m.length-1;a>=0;a--){var _=m[a].id;1==this._managed[_]&&(this.removeChildAt(a),delete this._managed[_])}}},i._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var s=t[i],n=s.t,o=s.p;for(var r in o)n[r]=o[r];this._addManagedChild(n,e)}},i._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof t&&(e._synchOffset=i,e.mode==t.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},i._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},createjs.MovieClip=createjs.promote(t,"Container"),e.priority=100,e.install=function(){createjs.Tween.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(e,i,s,n,o,r,a,l){return e.target instanceof t?1==r?o[i]:n[i]:s}}(),this.createjs=this.createjs||{},function(){function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,s,n){if(i||s||n){var o=0;i&&t._flip(e,++o,!0,!1),s&&t._flip(e,++o,!1,!0),n&&t._flip(e,++o,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var s=e.getFrame(i);if(!s)return null;var n=s.rect,o=t._workingCanvas;o.width=n.width,o.height=n.height,t._workingContext.drawImage(s.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height);var r=document.createElement("img");return r.src=o.toDataURL("image/png"),r},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var s=i.getContext("2d");return s.save(),s.drawImage(t,0,0),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),s.restore(),i},t._flip=function(e,i,s,n){for(var o=e._images,r=t._workingCanvas,a=t._workingContext,l=o.length/i,c=0;l>c;c++){var h=o[c];h.__tmp=c,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,r.width+1,r.height+1),r.width=h.width,r.height=h.height,a.setTransform(s?-1:1,0,0,n?-1:1,s?h.width:0,n?h.height:0),a.drawImage(h,0,0);var u=document.createElement("img");u.src=r.toDataURL("image/png"),u.width=h.width,u.height=h.height,o.push(u)}var m=e._frames,_=m.length/i;for(c=0;_>c;c++){h=m[c];var p=h.rect.clone();u=o[h.image.__tmp+l*i];var d={image:u,rect:p,regX:h.regX,regY:h.regY};s&&(p.x=u.width-p.x-p.width,d.regX=p.width-h.regX),n&&(p.y=u.height-p.y-p.height,d.regY=p.height-h.regY),m.push(d)}var y="_"+(s?"h":"")+(n?"v":""),f=e._animations,x=e._data,v=f.length/i;for(c=0;v>c;c++){var g=f[c];h=x[g];var b={name:g+y,speed:h.speed,next:h.next,frames:[]};h.next&&(b.next+=y),m=h.frames;for(var S=0,w=m.length;w>S;S++)b.frames.push(m[S]+_*i);x[b.name]=b,f.push(b.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){function t(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=createjs.extend(t,createjs.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,s,n,o){if(this._data)throw t.ERR_RUNNING;var r=i||e.bounds||e.nominalBounds;return!r&&e.getBounds&&(r=e.getBounds()),r?(s=s||1,this._frames.push({source:e,sourceRect:r,scale:s,funct:n,data:o,index:this._frames.length,height:r.height*s})-1):null},e.addAnimation=function(e,i,s,n){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:s,speed:n}},e.addMovieClip=function(e,i,s,n,o,r){if(this._data)throw t.ERR_RUNNING;var a=e.frameBounds,l=i||e.bounds||e.nominalBounds;if(!l&&e.getBounds&&(l=e.getBounds()),l||a){var c,h,u=this._frames.length,m=e.timeline.duration;for(c=0;m>c;c++){var _=a&&a[c]?a[c]:l;this.addFrame(e,_,s,this._setupMovieClipFrame,{i:c,f:n,d:o})}var p=e.timeline._labels,d=[];for(var y in p)d.push({index:p[y],label:y});if(d.length)for(d.sort(function(t,e){return t.index-e.index}),c=0,h=d.length;h>c;c++){for(var f=d[c].label,x=u+d[c].index,v=u+(c==h-1?m:d[c+1].index),g=[],b=x;v>b;b++)g.push(b);(!r||(f=r(f,e,x,v)))&&this.addAnimation(f,g,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,framerate:this.framerate,animations:this._animations};var s=this._frames.slice();if(s.sort(function(t,e){return t.height<=e.height?-1:1}),s[s.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var n=0,o=0,r=0;s.length;){var a=this._fillRow(s,n,r,i,e);if(a.w>o&&(o=a.w),n+=a.h,!a.h||!s.length){var l=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.width=this._getSize(o,this.maxWidth),l.height=this._getSize(n,this.maxHeight),this._data.images[r]=l,a.h||(o=n=0,r++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,s,n,o){var r=this.maxWidth,a=this.maxHeight;i+=o;for(var l=a-i,c=o,h=0,u=e.length-1;u>=0;u--){var m=e[u],_=this._scale*m.scale,p=m.sourceRect,d=m.source,y=Math.floor(_*p.x-o),f=Math.floor(_*p.y-o),x=Math.ceil(_*p.height+2*o),v=Math.ceil(_*p.width+2*o);if(v>r)throw t.ERR_DIMENSIONS;x>l||c+v>r||(m.img=s,m.rect=new createjs.Rectangle(c,i,v,x),h=h||x,e.splice(u,1),n[m.index]=[c,i,v,x,s,Math.round(-y+_*d.regX-o),Math.round(-f+_*d.regY-o)],c+=v)}return{w:c,h:h}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-t)}var n=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var o=new createjs.Event("progress");o.progress=n,this.dispatchEvent(o)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,n=this._data.images[t.img],o=n.getContext("2d");return t.funct&&t.funct(t.source,t.data),o.save(),o.beginPath(),o.rect(i.x,i.y,i.width,i.height),o.clip(),o.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),o.scale(e,e),t.source.draw(o),o.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,s=this.getConcatenatedDisplayProps(this._props),n=s.matrix,o=s.visible?"visible":"hidden";if(o!=i.visibility&&(i.visibility=o),s.visible){var r=this._oldProps,a=r&&r.matrix,l=1e4;if(!a||!a.equals(n)){var c="matrix("+(n.a*l|0)/l+","+(n.b*l|0)/l+","+(n.c*l|0)/l+","+(n.d*l|0)/l+","+(n.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=c+","+(n.ty+.5|0)+")",i.MozTransform=c+"px,"+(n.ty+.5|0)+"px)",r||(r=this._oldProps=new createjs.DisplayProps(!0,NaN)),r.matrix.copy(n)}r.alpha!=s.alpha&&(i.opacity=""+(s.alpha*l|0)/l,r.alpha=s.alpha)}}},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,s,n,o,r,a){o=o||t,null==r&&(r=e),null==a&&(a=i);try{var l=t.getImageData(e,i,s,n)}catch(t){return!1}return!!this._applyFilter(l)&&(o.putImageData(l,r,a),!0)},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(t){return!0},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=createjs.extend(t,createjs.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(0>=e&&0>=i)return t;var s=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(e*s+1,i*s+1,e*s+1,i*s+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var s=this.blurY>>1;if(isNaN(s)||0>s)return!1;if(0==i&&0==s)return!1;var n=this.quality;(isNaN(n)||1>n)&&(n=1),n|=0,n>3&&(n=3),1>n&&(n=1);var o=e.data,r=0,a=0,l=0,c=0,h=0,u=0,m=0,_=0,p=0,d=0,y=0,f=0,x=0,v=0,g=0,b=i+i+1|0,S=s+s+1|0,w=0|e.width,A=0|e.height,C=w-1|0,M=A-1|0,I=i+1|0,D=s+1|0,P={r:0,b:0,g:0,a:0},L=P;for(l=1;b>l;l++)L=L.n={r:0,b:0,g:0,a:0};L.n=P;var T={r:0,b:0,g:0,a:0},E=T;for(l=1;S>l;l++)E=E.n={r:0,b:0,g:0,a:0};E.n=T;for(var B=null,j=0|t.MUL_TABLE[i],R=0|t.SHG_TABLE[i],V=0|t.MUL_TABLE[s],G=0|t.SHG_TABLE[s];n-- >0;){m=u=0;var F=j,O=R;for(a=A;--a>-1;){for(_=I*(f=o[0|u]),p=I*(x=o[u+1|0]),d=I*(v=o[u+2|0]),y=I*(g=o[u+3|0]),L=P,l=I;--l>-1;)L.r=f,L.g=x,L.b=v,L.a=g,L=L.n;for(l=1;I>l;l++)c=u+((l>C?C:l)<<2)|0,_+=L.r=o[c],p+=L.g=o[c+1],d+=L.b=o[c+2],y+=L.a=o[c+3],L=L.n;for(B=P,r=0;w>r;r++)o[u++]=_*F>>>O,o[u++]=p*F>>>O,o[u++]=d*F>>>O,o[u++]=y*F>>>O,c=m+((c=r+i+1)<C?c:C)<<2,_-=B.r-(B.r=o[c]),p-=B.g-(B.g=o[c+1]),d-=B.b-(B.b=o[c+2]),y-=B.a-(B.a=o[c+3]),B=B.n;m+=w}for(F=V,O=G,r=0;w>r;r++){for(u=r<<2|0,_=D*(f=o[u])|0,p=D*(x=o[u+1|0])|0,d=D*(v=o[u+2|0])|0,y=D*(g=o[u+3|0])|0,E=T,l=0;D>l;l++)E.r=f,E.g=x,E.b=v,E.a=g,E=E.n;for(h=w,l=1;s>=l;l++)u=h+r<<2,_+=E.r=o[u],p+=E.g=o[u+1],d+=E.b=o[u+2],y+=E.a=o[u+3],E=E.n,M>l&&(h+=w);if(u=r,B=T,n>0)for(a=0;A>a;a++)c=u<<2,o[c+3]=g=y*F>>>O,g>0?(o[c]=_*F>>>O,o[c+1]=p*F>>>O,o[c+2]=d*F>>>O):o[c]=o[c+1]=o[c+2]=0,c=r+((c=a+D)<M?c:M)*w<<2,_-=B.r-(B.r=o[c]),p-=B.g-(B.g=o[c+1]),d-=B.b-(B.b=o[c+2]),y-=B.a-(B.a=o[c+3]),B=B.n,u+=w;else for(a=0;A>a;a++)c=u<<2,o[c+3]=g=y*F>>>O,g>0?(g=255/g,o[c]=(_*F>>>O)*g,o[c+1]=(p*F>>>O)*g,o[c+2]=(d*F>>>O)*g):o[c]=o[c+1]=o[c+2]=0,c=r+((c=a+D)<M?c:M)*w<<2,_-=B.r-(B.r=o[c]),p-=B.g-(B.g=o[c+1]),d-=B.b-(B.b=o[c+2]),y-=B.a-(B.a=o[c+3]),B=B.n,u+=w}}return!0},createjs.BlurFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=createjs.extend(t,createjs.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,s=0,n=e.length;n>s;s+=4)e[s+3]=i[s]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var s=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){function t(t){this.mask=t}var e=createjs.extend(t,createjs.Filter);e.applyFilter=function(t,e,i,s,n,o,r,a){return!this.mask||(o=o||t,null==r&&(r=e),null==a&&(a=i),o.save(),t==o&&(o.globalCompositeOperation="destination-in",o.drawImage(this.mask,r,a),o.restore(),!0))},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s,n,o,r,a){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=s?s:1,this.redOffset=n||0,this.greenOffset=o||0,this.blueOffset=r||0,this.alphaOffset=a||0}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,s=0;i>s;s+=4)e[s]=e[s]*this.redMultiplier+this.redOffset,e[s+1]=e[s+1]*this.greenMultiplier+this.greenOffset,e[s+2]=e[s+2]*this.blueMultiplier+this.blueOffset,e[s+3]=e[s+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s){this.setColor(t,e,i,s)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,s){return this.reset().adjustColor(t,e,i,s)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,s){return this.adjustHue(s),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return 0>e?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,s=.6094,n=.082;return this._multiplyMatrix([i*(1-e)+e,s*(1-e),n*(1-e),0,0,i*(1-e),s*(1-e)+e,n*(1-e),0,0,i*(1-e),s*(1-e),n*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),s=.213,n=.715,o=.072;return this._multiplyMatrix([s+e*(1-s)+i*-s,n+e*-n+i*-n,o+e*-o+i*(1-o),0,0,s+e*-s+.143*i,n+e*(1-n)+.14*i,o+e*-o+-.283*i,0,0,s+e*-s+-.787*i,n+e*-n+i*n,o+e*(1-o)+i*o,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,s=t.LENGTH;s>i;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,s=0;i>s;s++)this[s]=e[s];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,s,n=[];for(e=0;5>e;e++){for(i=0;5>i;i++)n[i]=this[i+5*e];for(i=0;5>i;i++){var o=0;for(s=0;5>s;s++)o+=t[i+5*s]*n[s];this[i+5*e]=o}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){function t(t){this.matrix=t}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,s,n,o=t.data,r=o.length,a=this.matrix,l=a[0],c=a[1],h=a[2],u=a[3],m=a[4],_=a[5],p=a[6],d=a[7],y=a[8],f=a[9],x=a[10],v=a[11],g=a[12],b=a[13],S=a[14],w=a[15],A=a[16],C=a[17],M=a[18],I=a[19],D=0;r>D;D+=4)e=o[D],i=o[D+1],s=o[D+2],n=o[D+3],o[D]=e*l+i*c+s*h+n*u+m,o[D+1]=e*_+i*p+s*d+n*y+f,o[D+2]=e*x+i*v+s*g+n*b+S,o[D+3]=e*w+i*A+s*C+n*M+I;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,s){return!!(e&&e.canvas&&t.isSupported())&&(!!e.__touch||(e.__touch={pointers:{},multitouch:!i,preventDefault:!s,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0))},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",s,!1),i.addEventListener("touchmove",s,!1),i.addEventListener("touchend",s,!1),i.addEventListener("touchcancel",s,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,s=e.type,n=0,o=i.length;o>n;n++){var r=i[n],a=r.identifier;r.target==t.canvas&&("touchstart"==s?this._handleStart(t,a,e,r.pageX,r.pageY):"touchmove"==s?this._handleMove(t,a,e,r.pageX,r.pageY):("touchend"==s||"touchcancel"==s)&&this._handleEnd(t,a,e))}}},t._IE_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",s,!1),window.addEventListener("MSPointerMove",s,!1),window.addEventListener("MSPointerUp",s,!1),window.addEventListener("MSPointerCancel",s,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",s,!1),window.addEventListener("pointermove",s,!1),window.addEventListener("pointerup",s,!1),window.addEventListener("pointercancel",s,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,s=e.pointerId,n=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;n[s]=!0,this._handleStart(t,s,e,e.pageX,e.pageY)}else n[s]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,s,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete n[s],this._handleEnd(t,s,e)))}},t._handleStart=function(t,e,i,s,n){var o=t.__touch;if(o.multitouch||!o.count){var r=o.pointers;r[e]||(r[e]=!0,o.count++,t._handlePointerDown(e,i,s,n))}},t._handleMove=function(t,e,i,s,n){t.__touch.pointers[e]&&t._handlePointerMove(e,i,s,n)},t._handleEnd=function(t,e,i){var s=t.__touch,n=s.pointers;n[e]&&(s.count--,t._handlePointerUp(e,i,!0),delete n[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.8.2",t.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),this.createjs=this.createjs||{},function(){var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function s(t,e){function i(t){if(i[t]!==f)return i[t];var s;if("bug-string-char-index"==t)s="a"!="a"[0];else if("json"==t)s=i("json-stringify")&&i("json-parse");else{var o,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var l=e.stringify,c="function"==typeof l&&g;if(c){(o=function(){return 1}).toJSON=o;try{c="0"===l(0)&&"0"===l(new n)&&'""'==l(new a)&&l(v)===f&&l(f)===f&&l()===f&&"1"===l(o)&&"[1]"==l([o])&&"[null]"==l([f])&&"null"==l(null)&&"[null,null,null]"==l([f,v,null])&&l({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===l(null,o)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new h(-1))}catch(t){c=!1}}s=c}if("json-parse"==t){var u=e.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){o=u(r);var m=5==o.a.length&&1===o.a[0];if(m){try{m=!u('"\t"')}catch(t){}if(m)try{m=1!==u("01")}catch(t){}if(m)try{m=1!==u("1.")}catch(t){}}}}catch(t){m=!1}s=m}}return i[t]=!!s}t||(t=l.Object()),e||(e=l.Object());var n=t.Number||l.Number,a=t.String||l.String,c=t.Object||l.Object,h=t.Date||l.Date,u=t.SyntaxError||l.SyntaxError,m=t.TypeError||l.TypeError,_=t.Math||l.Math,p=t.JSON||l.JSON;"object"==(void 0===p?"undefined":o()(p))&&p&&(e.stringify=p.stringify,e.parse=p.parse);var d,y,f,x=c.prototype,v=x.toString,g=new h(-0xc782b5b800cec);try{g=-109252==g.getUTCFullYear()&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()}catch(t){}if(!i("json")){var b="[object Function]",S="[object Number]",w="[object String]",A="[object Array]",C=i("bug-string-char-index");if(!g)var M=_.floor,I=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(t,e){return I[e]+365*(t-1970)+M((t-1969+(e=+(e>1)))/4)-M((t-1901+e)/100)+M((t-1601+e)/400)};if((d=x.hasOwnProperty)||(d=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=v?d=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,d=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,d.call(this,t)}),y=function(t,e){var i,s,n,a=0;(i=function(){this.valueOf=0}).prototype.valueOf=0,s=new i;for(n in s)d.call(s,n)&&a++;return i=s=null,a?y=2==a?function(t,e){var i,s={},n=v.call(t)==b;for(i in t)n&&"prototype"==i||d.call(s,i)||!(s[i]=1)||!d.call(t,i)||e(i)}:function(t,e){var i,s,n=v.call(t)==b;for(i in t)n&&"prototype"==i||!d.call(t,i)||(s="constructor"===i)||e(i);(s||d.call(t,i="constructor"))&&e(i)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var i,n,a=v.call(t)==b,l=!a&&"function"!=typeof t.constructor&&r[o()(t.hasOwnProperty)]&&t.hasOwnProperty||d;for(i in t)a&&"prototype"==i||!l.call(t,i)||e(i);for(n=s.length;i=s[--n];l.call(t,i)&&e(i));}),y(t,e)},!i("json-stringify")){var P={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L=function(t,e){return("000000"+(e||0)).slice(-t)},T=function(t){for(var e='"',i=0,s=t.length,n=!C||s>10,o=n&&(C?t.split(""):t);s>i;i++){var r=t.charCodeAt(i);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=P[r];break;default:if(32>r){e+="\\u00"+L(2,r.toString(16));break}e+=n?o[i]:t.charAt(i)}}return e+'"'},E=function t(e,i,s,n,r,a,l){var c,h,u,_,p,x,g,b,C,I,P,E,B,j,R,V;try{c=i[e]}catch(t){}if("object"==(void 0===c?"undefined":o()(c))&&c)if("[object Date]"!=(h=v.call(c))||d.call(c,"toJSON"))"function"==typeof c.toJSON&&(h!=S&&h!=w&&h!=A||d.call(c,"toJSON"))&&(c=c.toJSON(e));else if(c>-1/0&&1/0>c){if(D){for(p=M(c/864e5),u=M(p/365.2425)+1970-1;D(u+1,0)<=p;u++);for(_=M((p-D(u,0))/30.42);D(u,_+1)<=p;_++);p=1+p-D(u,_),x=(c%864e5+864e5)%864e5,g=M(x/36e5)%24,b=M(x/6e4)%60,C=M(x/1e3)%60,I=x%1e3}else u=c.getUTCFullYear(),_=c.getUTCMonth(),p=c.getUTCDate(),g=c.getUTCHours(),b=c.getUTCMinutes(),C=c.getUTCSeconds(),I=c.getUTCMilliseconds();c=(0>=u||u>=1e4?(0>u?"-":"+")+L(6,0>u?-u:u):L(4,u))+"-"+L(2,_+1)+"-"+L(2,p)+"T"+L(2,g)+":"+L(2,b)+":"+L(2,C)+"."+L(3,I)+"Z"}else c=null;if(s&&(c=s.call(i,e,c)),null===c)return"null";if("[object Boolean]"==(h=v.call(c)))return""+c;if(h==S)return c>-1/0&&1/0>c?""+c:"null";if(h==w)return T(""+c);if("object"==(void 0===c?"undefined":o()(c))){for(j=l.length;j--;)if(l[j]===c)throw m();if(l.push(c),P=[],R=a,a+=r,h==A){for(B=0,j=c.length;j>B;B++)E=t(B,c,s,n,r,a,l),P.push(E===f?"null":E);V=P.length?r?"[\n"+a+P.join(",\n"+a)+"\n"+R+"]":"["+P.join(",")+"]":"[]"}else y(n||c,function(e){var i=t(e,c,s,n,r,a,l);i!==f&&P.push(T(e)+":"+(r?" ":"")+i)}),V=P.length?r?"{\n"+a+P.join(",\n"+a)+"\n"+R+"}":"{"+P.join(",")+"}":"{}";return l.pop(),V}};e.stringify=function(t,e,i){var s,n,a,l;if(r[void 0===e?"undefined":o()(e)]&&e)if((l=v.call(e))==b)n=e;else if(l==A){a={};for(var c,h=0,u=e.length;u>h;c=e[h++],((l=v.call(c))==w||l==S)&&(a[c]=1));}if(i)if((l=v.call(i))==S){if((i-=i%1)>0)for(s="",i>10&&(i=10);s.length<i;s+=" ");}else l==w&&(s=i.length<=10?i:i.slice(0,10));return E("",(c={},c[""]=t,c),n,a,s,"",[])}}if(!i("json-parse")){var B,j,R=a.fromCharCode,V={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},G=function(){throw B=j=null,u()},F=function(){for(var t,e,i,s,n,o=j,r=o.length;r>B;)switch(n=o.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=C?o.charAt(B):o[B],B++,t;case 34:for(t="@",B++;r>B;)if(32>(n=o.charCodeAt(B)))G();else if(92==n)switch(n=o.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=V[n],B++;break;case 117:for(e=++B,i=B+4;i>B;B++)(n=o.charCodeAt(B))>=48&&57>=n||n>=97&&102>=n||n>=65&&70>=n||G();t+=R("0x"+o.slice(e,B));break;default:G()}else{if(34==n)break;for(n=o.charCodeAt(B),e=B;n>=32&&92!=n&&34!=n;)n=o.charCodeAt(++B);t+=o.slice(e,B)}if(34==o.charCodeAt(B))return B++,t;G();default:if(e=B,45==n&&(s=!0,n=o.charCodeAt(++B)),n>=48&&57>=n){for(48==n&&(n=o.charCodeAt(B+1))>=48&&57>=n&&G(),s=!1;r>B&&(n=o.charCodeAt(B))>=48&&57>=n;B++);if(46==o.charCodeAt(B)){for(i=++B;r>i&&(n=o.charCodeAt(i))>=48&&57>=n;i++);i==B&&G(),B=i}if(101==(n=o.charCodeAt(B))||69==n){for(n=o.charCodeAt(++B),(43==n||45==n)&&B++,i=B;r>i&&(n=o.charCodeAt(i))>=48&&57>=n;i++);i==B&&G(),B=i}return+o.slice(e,B)}if(s&&G(),"true"==o.slice(B,B+4))return B+=4,!0;if("false"==o.slice(B,B+5))return B+=5,!1;if("null"==o.slice(B,B+4))return B+=4,null;G()}return"$"},O=function t(e){var i,s;if("$"==e&&G(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(i=[];"]"!=(e=F());s||(s=!0))s&&(","==e?"]"==(e=F())&&G():G()),","==e&&G(),i.push(t(e));return i}if("{"==e){for(i={};"}"!=(e=F());s||(s=!0))s&&(","==e?"}"==(e=F())&&G():G()),(","==e||"string"!=typeof e||"@"!=(C?e.charAt(0):e[0])||":"!=F())&&G(),i[e.slice(1)]=t(F());return i}G()}return e},k=function(t,e,i){var s=N(t,e,i);s===f?delete t[e]:t[e]=s},N=function(t,e,i){var s,n=t[e];if("object"==(void 0===n?"undefined":o()(n))&&n)if(v.call(n)==A)for(s=n.length;s--;)k(n,s,i);else y(n,function(t){k(n,t,i)});return i.call(t,e,n)};e.parse=function(t,e){var i,s;return B=0,j=""+t,i=O(F()),"$"!=F()&&G(),B=j=null,e&&v.call(e)==b?N((s={},s[""]=i,s),"",e):i}}}return e.runInContext=s,e}var n="function"==typeof define&&i("yNJ0"),r={function:!0,object:!0},a=r["undefined"==typeof exports?"undefined":o()(exports)]&&exports&&!exports.nodeType&&exports,l=r["undefined"==typeof window?"undefined":o()(window)]&&window||this,c=a&&r[o()(t)]&&t&&!t.nodeType&&"object"==(void 0===e?"undefined":o()(e))&&e;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),a&&!n)s(l,a);else{var h=l.JSON,u=l.JSON3,m=!1,_=s(l,l.JSON3={noConflict:function(){return m||(m=!0,l.JSON=h,l.JSON3=u,h=u=null),_}});l.JSON={parse:_.parse,stringify:_.stringify}}n&&define(function(){return _})}.call(this),function(){var t={};t.appendToHead=function(e){t.getHead().appendChild(e)},t.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},t.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=t}(),function(){var t={};t.parseXML=function(t,e){var i=null;try{if(window.DOMParser){var s=new DOMParser;i=s.parseFromString(t,e)}}catch(t){}if(!i)try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(t){i=null}return i},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var s=new t;return s.src=e,s}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var s=e.indexOf("?");s>-1&&(e=e.substr(0,s));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var s in t)i.push(s+"="+escape(t[s]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],s=t.indexOf("?");if(-1!=s){var n=t.slice(s+1);i=i.concat(n.split("&"))}return-1!=s?t.slice(0,s)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},t.isVideoTag=function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var o=0,r=s.ACTIVEX_VERSIONS.length;r>o;o++){var a=s.ACTIVEX_VERSIONS[o];try{n=new ActiveXObject(a);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var c in t.headers)i[c]=t.headers[c];for(c in i)n.setRequestHeader(c,i[c]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(t&&!Array.isArray(t))e=[t];else if(t)e=t;else if(arguments.length>0)return;var i=!1;if(e){for(;e.length;){var s=e.pop(),n=this.getResult(s);for(o=this._loadQueue.length-1;o>=0;o--)if(r=this._loadQueue[o].getItem(),r.id==s||r.src==s){this._loadQueue.splice(o,1)[0].cancel();break}for(o=this._loadQueueBackup.length-1;o>=0;o--)if(r=this._loadQueueBackup[o].getItem(),r.id==s||r.src==s){this._loadQueueBackup.splice(o,1)[0].cancel();break}if(n)this._disposeItem(this.getItem(s));else for(var o=this._currentLoads.length-1;o>=0;o--){var r=this._currentLoads[o].getItem();if(r.id==s||r.src==s){this._currentLoads.splice(o,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,s=this._loadQueueBackup.length;s>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,s=e.types.length;s>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,s=e.extensions.length;s>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var s=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(s)}this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(t,e,s){var n=null,r=null;if(Array.isArray(t)){if(0==t.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}n=t}else if("string"==typeof t)n=[{src:t,type:i.MANIFEST}];else{if("object"!=(void 0===t?"undefined":o()(t))){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}n=[t]}else void 0!==t.manifest&&(n=t.manifest,r=t.path)}for(var l=0,c=n.length;c>l;l++)this._addItem(n[l],r,s);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var s=i.id;return e&&this._loadedRawResults[s]?this._loadedRawResults[s]:this._loadedResults[s]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var s=this._loadItemsById[i],n=this.getResult(i);(!0!==t||null!=n)&&e.push({item:s,result:n,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var s=this._createLoadItem(t,e,i);if(null!=s){var n=this._createLoader(s);null!=n&&("plugins"in n&&(n.plugins=this._plugins),s._loader=n,this._loadQueue.push(n),this._loadQueueBackup.push(n),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&s.type==createjs.LoadQueue.JAVASCRIPT||!0===s.maintainOrder)&&(this._scriptOrder.push(s),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var s=createjs.LoadItem.create(t);if(null==s)return null;var n="",o=i||this._basePath;if(s.src instanceof Object){if(!s.type)return null;if(e){n=e;var r=createjs.RequestUtils.parseURI(e);null==o||r.absolute||r.relative||(n=o+n)}else null!=o&&(n=o)}else{var a=createjs.RequestUtils.parseURI(s.src);a.extension&&(s.ext=a.extension),null==s.type&&(s.type=createjs.RequestUtils.getTypeByExtension(s.ext));var l=s.src;if(!a.absolute&&!a.relative)if(e){n=e;var r=createjs.RequestUtils.parseURI(e);l=e+l,null==o||r.absolute||r.relative||(n=o+n)}else null!=o&&(n=o);s.src=n+s.src}s.path=n,(void 0===s.id||null===s.id||""===s.id)&&(s.id=l);var c=this._typeCallbacks[s.type]||this._extensionCallbacks[s.ext];if(c){var h=c.callback.call(c.scope,s,this);if(!1===h)return null;!0===h||null!=h&&(s._loader=h),a=createjs.RequestUtils.parseURI(s.src),null!=a.extension&&(s.ext=a.extension)}return this._loadItemsById[s.id]=s,this._loadItemsBySrc[s.src]=s,null==s.crossOrigin&&(s.crossOrigin=this._crossOrigin),s},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var s=this._availableLoaders[i];if(s&&s.canLoadItem(t))return new s(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),s=e.getResult();this._loadedResults[i.id]=s;var n=e.getResult(!0);null!=n&&n!==s&&(this._loadedRawResults[i.id]=n),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var s=e[i].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=e[i].result,this._loadedRawResults[s.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var s=createjs.indexOf(this._scriptOrder,i);return-1!=s&&(this._loadedScripts[s]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(!0!==i){var s=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(s);var n=i._loader;this._processFinishedLoad(i,n),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),s=0;i>s;){if(null==this._loadedScripts[s])return!1;s++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,s=0,n=this._currentLoads.length;n>s;s++)i+=this._currentLoads[s].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}(createjs.extend(t,createjs.AbstractLoader),t).canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?document.createElement("style"):document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){return this._formatImage},e._formatImage=function(t,e){var i=this._tag,s=window.URL||window.webkitURL;if(this._preferXHR)if(s){var n=s.createObjectURL(this.getResult(!0));i.src=n,i.addEventListener("load",this._cleanUpURL,!1),i.addEventListener("error",this._cleanUpURL,!1)}else i.src=this._item.src;i.complete?t(i):(i.onload=createjs.proxy(function(){t(this._tag)},this),i.onerror=createjs.proxy(function(){e(_this._tag)},this))},e._cleanUpURL=function(t){(window.URL||window.webkitURL).revokeObjectURL(t.target.src)},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,s=this.plugins.length;s>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;e._createTag=function(){return document.createElement("video")},i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images;i[i.indexOf(t.item.src)]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,s=0,n=e.length;n>s;s++)e[s].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,s=e.length;s>i;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(t){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,n=i._preloadHash[e].length;n>s;s++){var o=i._preloadHash[e][s];if(i._preloadHash[e][s]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=o.src,t.id=o.id,t.data=o.data,t.sprite=o.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,n=i._preloadHash[e].length;n>s;s++){var o=i._preloadHash[e][s];if(i._preloadHash[e][s]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=o.src,t.id=o.id,t.data=o.data,t.sprite=o.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return!!t.isSupported()&&(i.activePlugin=new t,!0)},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,s=t.length;s>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin||!i._pluginsRegistered&&!!i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var s;if(t.src instanceof Object?(s=i._parseSrc(t.src),s.src=t.path+s.src):s=i._parsePath(t.src),null==s)return!1;t.src=s.src,t.type="sound";var n=t.data,o=null;if(null!=n&&(isNaN(n.channels)?isNaN(n)||(o=parseInt(n)):o=parseInt(n.channels),n.audioSprite))for(var r,a=n.audioSprite.length;a--;)r=n.audioSprite[a],i._idHash[r.id]={src:t.src,startTime:parseInt(r.startTime),duration:parseInt(r.duration)},r.defaultPlayProps&&(i._defaultPlayPropsHash[r.id]=createjs.PlayPropsConfig.create(r.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var l=i.activePlugin.register(t);return e.create(t.src,o),null!=n&&isNaN(n)?t.data.channels=o||e.maxPerChannel():t.data=o||e.maxPerChannel(),l.type&&(t.type=l.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),l},i.registerSound=function(t,e,s,n,o){var r={src:t,id:e,data:s,defaultPlayProps:o};t instanceof Object&&t.src&&(n=e,r=t),r=createjs.LoadItem.create(r),r.path=n,null==n||r.src instanceof Object||(r.src=n+t);var a=i._registerSound(r);if(!a)return!1;if(i._preloadHash[r.src]||(i._preloadHash[r.src]=[]),i._preloadHash[r.src].push(r),1==i._preloadHash[r.src].length)a.on("complete",createjs.proxy(this._handleLoadComplete,this)),a.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(a);else if(1==i._preloadHash[r.src][0])return!0;return r},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,n=t.length;n>s;s++)i[s]=createjs.Sound.registerSound(t[s].src,t[s].id,t[s].data,e,t[s].defaultPlayProps);return i},i.removeSound=function(t,s){if(null==i.activePlugin)return!1;t instanceof Object&&t.src&&(t=t.src);var n;if(t instanceof Object?n=i._parseSrc(t):(t=i._getSrcById(t).src,n=i._parsePath(t)),null==n)return!1;t=n.src,null!=s&&(t=s+t);for(var o in i._idHash)i._idHash[o].src==t&&delete i._idHash[o];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,n=t.length;n>s;s++)i[s]=createjs.Sound.removeSound(t[s].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,void 0!=i._preloadHash[t]&&1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var s=e[4],n=e[5],o=i.capabilities,r=0;!o[n];)if(n=i.alternateExtensions[r++],r>i.alternateExtensions.length)return null;return t=t.replace("."+e[5],"."+n),{name:s,src:t,extension:n}},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},s=i.capabilities;for(var n in t)if(t.hasOwnProperty(n)&&s[n]){e.src=t[n],e.extension=n;break}if(!e.src)return!1;var o=e.src.lastIndexOf("/");return e.name=-1!=o?e.src.slice(o+1):e.src,e},i.play=function(t,e,s,n,o,r,a,l,c){var h;h=e instanceof Object||e instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(e):createjs.PlayPropsConfig.create({interrupt:e,delay:s,offset:n,loop:o,volume:r,pan:a,startTime:l,duration:c});var u=i.createInstance(t,h.startTime,h.duration);return i._playInstance(u,h)||u._playFailed(),u},i.createInstance=function(t,s,n){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,s,n);var o=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var r=i._parsePath(t.src),a=null;return null!=r&&null!=r.src?(e.create(r.src),null==s&&(s=t.startTime),a=i.activePlugin.create(r.src,s,n||t.duration),(o=o||i._defaultPlayPropsHash[r.src])&&a.applyPlayProps(o)):a=new createjs.DefaultSoundInstance(t,s,n),a.uniqueId=i._lastID++,a},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,s=0,n=e.length;n>s;s++)e[s].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,s=e.length;s>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i._playInstance=function(t,e){var s=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=s.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=s.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){if(!i._beginPlaying(t,e))return!1}else{var n=setTimeout(function(){i._beginPlaying(t,e)},e.delay);t.delayTimeoutId=n}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;if(!t._beginPlaying(i)){var s=createjs.indexOf(this._instances,t);return s>-1&&this._instances.splice(s,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){return null==e.get(t)&&(e.channels[t]=new e(t,i),!0)},e.removeSrc=function(t){var i=e.get(t);return null!=i&&(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var s=e.get(t.src);return null!=s&&s._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null!=i&&(i._remove(t),!0)},e.maxPerChannel=function(){return s.maxDefault},e.get=function(t){return e.channels[t]};var s=e.prototype;s.constructor=e,s.src=null,s.max=null,s.maxDefault=100,s.length=0,s.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},s._get=function(t){return this._instances[t]},s._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},s._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1!=e&&(this._instances.splice(e,1),this.length--,!0)},s._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},s._getSlot=function(e,i){var s,n;if(e!=t.INTERRUPT_NONE&&null==(n=this._get(0)))return!0;for(var o=0,r=this.max;r>o;o++){if(null==(s=this._get(o)))return!0;if(s.playState==t.PLAY_FINISHED||s.playState==t.PLAY_INTERRUPTED||s.playState==t.PLAY_FAILED){n=s;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&s.getPosition()<n.getPosition()||e==t.INTERRUPT_LATE&&s.getPosition()>n.getPosition())&&(n=s)}return null!=n&&(n._interrupt(),this._remove(n),!0)},s.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){var t=function(t,e,i,s){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),!1!==s&&!0!==s&&this.setPlaybackResource(s),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,s,n,o){var r;return r=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:s,volume:n,pan:o}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(r),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,r),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){return!0===t||!1===t?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],e=new this._loaderClass(t),e.on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){this._soundInstances[t][e].destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var s=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(s),s},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,s=this._soundInstances[e].length;s>i;i++){this._soundInstances[e][i].setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e,s,n){this.AbstractSoundInstance_constructor(t,e,s,n),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,s=.001*this._position;s>e&&(s=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,s),this._playbackStartTime=this.sourceNode.startTime-s,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-s)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var s=i.context.createBufferSource();s.buffer=this.playbackResource,s.connect(this.panNode);var n=.001*this._duration;return s.startTime=t+n,s.start(s.startTime,e+.001*this._startTime,n-e),s},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0)}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,n=0,o=e.length;o>n;n++){var r=e[n],a=s[r]||r;i._capabilities[r]="no"!=t.canPlayType("audio/"+r)&&""!=t.canPlayType("audio/"+r)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(t){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get(),e.src=t):i._tagUsed[t]?(e=i._tagPool.get(),e.src=t):i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null!=e&&(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null!=e&&e.duration?1e3*e.duration:0},createjs.HTMLAudioTagPool=t;var s=e.prototype;s.constructor=e,s.get=function(){var t;return t=0==this._tags.length?this._createTag():this._tags.pop(),null==t.parentNode&&document.body.appendChild(t),t},s.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},s.toString=function(){return"[TagPool]"},s._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s){this.AbstractSoundInstance_constructor(t,e,i,s),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,n=0,o=e.length;o>n;n++){var r=e[n],a=s[r]||r;i._capabilities[r]="no"!=t.canPlayType("audio/"+r)&&""!=t.canPlayType("audio/"+r)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var s=this.AbstractPlugin_create(t,e,i);return s.setPlaybackResource(null),s},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(e,i,s){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=s||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,s,n){return n&&t.removeTweens(e),new t(e,i,s)},t.tick=function(e,i){for(var s=t._tweens.slice(),n=s.length-1;n>=0;n--){var o=s[n];i&&!o.ignoreGlobalPause||o._paused||o.tick(o._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,s=i.length-1;s>=0;s--){var n=i[s];n._target==e&&(n._paused=!0,i.splice(s,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,s=e.length;s>i;i++){var n=e[i];n._paused=!0,n.target&&(n.target.tweenjs_count=0)}e.length=0},t.hasActiveTweens=function(e){return e?null!=e.tweenjs_count&&!!e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var s=e.priority;null==s&&(e.priority=s=0);for(var n=0,o=i.length,r=t._plugins;o>n;n++){var a=i[n];if(r[a]){for(var l=r[a],c=0,h=l.length;h>c&&!(s<l[c].priority);c++);r[a].splice(c,0,e)}else r[a]=[e]}},t._register=function(e,i){var s=e._target,n=t._tweens;if(i&&!e._registered)s&&(s.tweenjs_count=s.tweenjs_count?s.tweenjs_count+1:1),n.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else if(!i&&e._registered){s&&s.tweenjs_count--;for(var o=n.length;o--;)if(n[o]==e){n.splice(o,1);break}}e._registered=i},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e||[this],o:i||this._target})},e.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e||this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,s=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,s=!0)),i==this._prevPos)return s;var n=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(s)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var o=0,r=this._steps.length;r>o&&!(this._steps[o].t>i);o++);var a=this._steps[o-1];this._updateTargetProps(a,(this._stepPosition=i-a.t)/a.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&n>i?(n!=this.duration&&this._runActions(n,this.duration),this._runActions(0,i,!0)):this._runActions(n,i)),s&&this.setPaused(!0),this.dispatchEvent("change"),s},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e?this:(this._paused=!!e,t._register(this,!e),this)},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var s,n,o,r,a,l;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),s=e.p0,n=e.p1}else this.passive=!1,s=n=this._curQueueProps;for(var c in this._initQueueProps){null==(r=s[c])&&(s[c]=r=this._initQueueProps[c]),null==(a=n[c])&&(n[c]=a=r),o=r==a||0==i||1==i||"number"!=typeof r?1==i?a:r:r+(a-r)*i;var h=!1;if(l=t._plugins[c])for(var u=0,m=l.length;m>u;u++){var _=l[u].tween(this,c,o,s,n,i,!!e&&s==n,!e);_==t.IGNORE?h=!0:o=_}h||(this._target[c]=o)}},e._runActions=function(t,e,i){var s=t,n=e,o=-1,r=this._actions.length,a=1;for(t>e&&(s=e,n=t,o=r,r=a=-1);(o+=a)!=r;){var l=this._actions[o],c=l.t;(c==n||c>s&&n>c||i&&c==t)&&l.f.apply(l.o,l.p)}},e._appendQueueProps=function(e){var i,s,n,o,r;for(var a in e)if(void 0===this._initQueueProps[a]){if(s=this._target[a],i=t._plugins[a])for(n=0,o=i.length;o>n;n++)s=i[n].init(this,a,s);this._initQueueProps[a]=this._curQueueProps[a]=void 0===s?null:s}else s=this._curQueueProps[a];for(var a in e){if(s=this._curQueueProps[a],i=t._plugins[a])for(r=r||{},n=0,o=i.length;o>n;n++)i[n].step&&i[n].step(this,a,s,e[a],r);this._curQueueProps[a]=e[a]}return r&&this._appendQueueProps(r),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;e>s;s++)i=i&&this.removeTween(arguments[s]);return i}if(0==e)return!1;for(var n=this._tweens,s=n.length;s--;)if(n[s]==t)return n.splice(s,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var s=0,n=i.length;n>s&&!(e<i[s].position);s++);i.splice(s,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t||{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var s=0;i>s&&!(e<t[s].position);s++);return 0==s?null:t[s-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){var i=this._calcPosition(t),s=!this.loop&&t>=this.duration;if(i==this._prevPos)return s;this._prevPosition=t,this.position=this._prevPos=i;for(var n=0,o=this._tweens.length;o>n;n++)if(this._tweens[n].setPosition(i,e),i!=this._prevPos)return!1;return s&&this.setPaused(!0),this.dispatchEvent("change"),s},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},e._calcPosition=function(t){return 0>t?0:t<this.duration?t:this.loop?t%this.duration:this.duration},createjs.Timeline=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var n=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var n=e/i*Math.asin(1/t);return t*Math.pow(2,-10*s)*Math.sin((s-n)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(s){var n=e/i*Math.asin(1/t);return(s*=2)<1?t*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/e)*-.5:t*Math.pow(2,-10*(s-=1))*Math.sin((s-n)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var s=t.target;return s.hasOwnProperty("x")||(s.x=0),s.hasOwnProperty("y")||(s.y=0),s.hasOwnProperty("rotation")||(s.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,s,n,o){if("rotation"==i&&(e.__rotGlobalS=s,e.__rotGlobalE=n,t.testRotData(e,o)),"guide"!=i)return n;var r,a=n;a.hasOwnProperty("path")||(a.path=[]);var l=a.path;if(a.hasOwnProperty("end")||(a.end=1),a.hasOwnProperty("start")||(a.start=s&&s.hasOwnProperty("end")&&s.path===l?s.end:0),a.hasOwnProperty("_segments")&&a._length)return n;var c=l.length;if(!(c>=6&&(c-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";a._segments=[],a._length=0;for(var h=2;c>h;h+=4){for(var u,m,_=l[h-2],p=l[h-1],d=l[h+0],y=l[h+1],f=l[h+2],x=l[h+3],v=_,g=p,b=0,S=[],w=1;10>=w;w++){var A=w/10,C=1-A;u=C*C*_+2*C*A*d+A*A*f,m=C*C*p+2*C*A*y+A*A*x,b+=S[S.push(Math.sqrt((r=u-v)*r+(r=m-g)*r))-1],v=u,g=m}a._segments.push(b),a._segments.push(S),a._length+=b}r=a.orient,a.orient=!0;var M={};return t.calc(a,a.start,M),e.__rotPathS=Number(M.rotation.toFixed(5)),t.calc(a,a.end,M),e.__rotPathE=Number(M.rotation.toFixed(5)),a.orient=!1,t.calc(a,a.end,o),a.orient=r,a.orient?(e.__guideData=a,t.testRotData(e,o),n):n},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;void 0!==t._curQueueProps.rotation?t.__rotGlobalS=t.__rotGlobalE=t._curQueueProps.rotation:t.__rotGlobalS=t.__rotGlobalE=e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,s=t.__rotGlobalE-t.__rotGlobalS,n=t.__rotPathE-t.__rotPathS,o=s-n;if("auto"==i.orient)o>180?o-=360:-180>o&&(o+=360);else if("cw"==i.orient){for(;0>o;)o+=360;0==o&&s>0&&180!=s&&(o+=360)}else if("ccw"==i.orient){for(o=s-(n>180?360-n:n);o>0;)o-=360;0==o&&0>s&&-180!=s&&(o-=360)}i.rotDelta=o,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,s,n,o,r,a,l){var c=o.guide;if(void 0==c||c===n.guide)return s;if(c.lastRatio!=r){var h=(c.end-c.start)*(a?c.end:r)+c.start;switch(t.calc(c,h,e.target),c.orient){case"cw":case"ccw":case"auto":e.target.rotation+=c.rotOffS+c.rotDelta*r;break;case"fixed":default:e.target.rotation+=c.rotOffS}c.lastRatio=r}return"rotation"!=i||c.orient&&"false"!=c.orient?e.target[i]:s},t.calc=function(t,e,i){if(void 0==t._segments)throw"Missing critical pre-calculated information, please file a bug";void 0==i&&(i={x:0,y:0,rotation:0});for(var s=t._segments,n=t.path,o=t._length*e,r=s.length-2,a=0;o>s[a]&&r>a;)o-=s[a],a+=2;var l=s[a+1],c=0;for(r=l.length-1;o>l[c]&&r>c;)o-=l[c],c++;var h=c/++r+o/(r*l[c]);a=2*a+2;var u=1-h;return i.x=u*u*n[a-2]+2*u*h*n[a+0]+h*h*n[a+2],i.y=u*u*n[a-1]+2*u*h*n[a+1]+h*h*n[a+3],t.orient&&(i.rotation=57.2957795*Math.atan2((n[a+1]-n[a-1])*u+(n[a+3]-n[a+1])*h,(n[a+0]-n[a-2])*u+(n[a+2]-n[a+0])*h)),i},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){var t=createjs.TweenJS=createjs.TweenJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}()}.call(e,i("pv+l")(t),i("h6ac"))},sxPs:function(t,e,i){var s=i("z7R8"),n=i("0WCH"),o=i("Wyka"),r=i("EKwp"),a=i("yS17"),l=i("R6c1"),c=Object.getOwnPropertyDescriptor;e.f=i("6MLN")?c:function(t,e){if(t=o(t),e=r(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return n(!s.f.call(t,e),t[e])}},tuDi:function(t,e){},tvE3:function(t,e,i){i("FshL");var s=i("zKeE").Object;t.exports=function(t,e){return s.defineProperties(t,e)}},uRfg:function(t,e,i){"use strict";var s=i("1kq3"),n=i("vSO4"),o=i("gojl"),r=i("akPY"),a=i("dhak"),l=i("b7Q2"),c=i("11Ut"),h=i("HHE0"),u=i("Ug9I")("iterator"),m=!([].keys&&"next"in[].keys()),_=function(){return this};t.exports=function(t,e,i,p,d,y,f){l(i,e,p);var x,v,g,b=function(t){if(!m&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",w="values"==d,A=!1,C=t.prototype,M=C[u]||C["@@iterator"]||d&&C[d],I=M||b(d),D=d?w?b("entries"):I:void 0,P="Array"==e?C.entries||M:M;if(P&&(g=h(P.call(new t)))!==Object.prototype&&g.next&&(c(g,S,!0),s||"function"==typeof g[u]||r(g,u,_)),w&&M&&"values"!==M.name&&(A=!0,I=function(){return M.call(this)}),s&&!f||!m&&!A&&C[u]||r(C,u,I),a[e]=I,a[S]=_,d)if(x={values:w?I:b("values"),keys:y?I:b("keys"),entries:D},f)for(v in x)v in C||o(C,v,x[v]);else n(n.P+n.F*(m||A),e,x);return x}},vSO4:function(t,e,i){var s=i("i1Q6"),n=i("zKeE"),o=i("3zRh"),r=i("akPY"),a=i("yS17"),l=function(t,e,i){var c,h,u,m=t&l.F,_=t&l.G,p=t&l.S,d=t&l.P,y=t&l.B,f=t&l.W,x=_?n:n[e]||(n[e]={}),v=x.prototype,g=_?s:p?s[e]:(s[e]||{}).prototype;_&&(i=e);for(c in i)(h=!m&&g&&void 0!==g[c])&&a(x,c)||(u=h?g[c]:i[c],x[c]=_&&"function"!=typeof g[c]?i[c]:y&&h?o(u,s):f&&g[c]==u?function(t){var e=function(e,i,s){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,s)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):d&&"function"==typeof u?o(Function.call,u):u,d&&((x.virtual||(x.virtual={}))[c]=u,t&l.R&&v&&!v[c]&&r(v,c,u)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},wLcK:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"xwD+":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},yNJ0:function(t,e){(function(e){t.exports=e}).call(e,{})},yS17:function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},ycyv:function(t,e,i){var s=i("knrM"),n=i("Ocr3"),o=i("z7R8");t.exports=function(t){var e=s(t),i=n.f;if(i)for(var r,a=i(t),l=o.f,c=0;a.length>c;)l.call(t,r=a[c++])&&e.push(r);return e}},z7R8:function(t,e){e.f={}.propertyIsEnumerable},zKeE:function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},zotD:function(t,e,i){var s=i("BxvP");t.exports=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t}}},[0]);